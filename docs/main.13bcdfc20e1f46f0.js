"use strict";(self.webpackChunksocial_media=self.webpackChunksocial_media||[]).push([[179],{6304:(ft,Se,F)=>{F.d(Se,{Dh:()=>Fe,GT:()=>fe,cc:()=>Ne,hO:()=>He,on:()=>j,pX:()=>ie,xv:()=>me});var f=F(5879),te=F(7142),U=F(8186);ft=F.hmd(ft);const ne=["ngOnDestroy"],ie=(je,wt,gt,oe={})=>new Proxy(je,{get:(Ee,re)=>gt.runOutsideAngular(()=>{var Ae;if(je[re])return!(null===(Ae=oe?.spy)||void 0===Ae)&&Ae.get&&oe.spy.get(re,je[re]),je[re];if(ne.indexOf(re)>-1)return()=>{};const Ve=wt.toPromise().then(Ke=>{const ue=Ke&&Ke[re];return"function"==typeof ue?ue.bind(Ke):ue&&ue.then?ue.then(Ct=>gt.run(()=>Ct)):gt.run(()=>ue)});return new Proxy(()=>{},{get:(Ke,ue)=>Ve[ue],apply:(Ke,ue,Ct)=>Ve.then($t=>{var br;const gi=$t&&$t(...Ct);return!(null===(br=oe?.spy)||void 0===br)&&br.apply&&oe.spy.apply(re,Ct,gi),gi})})})}),fe=(je,wt)=>{wt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(oe=>{Object.defineProperty(je.prototype,oe,Object.getOwnPropertyDescriptor(gt.prototype||gt,oe))})})};class ve{constructor(wt){return wt}}const Fe=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function j(je,wt,gt){const Ee="object"==typeof gt&&gt||{};Ee.name=Ee.name||"string"==typeof gt&&gt||"[DEFAULT]";const Ae=te.Z.apps.filter(Ve=>Ve&&Ve.name===Ee.name)[0]||wt.runOutsideAngular(()=>te.Z.initializeApp(je,Ee));try{JSON.stringify(je)!==JSON.stringify(Ae.options)&&z("error",`${Ae.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Ae)}const z=(je,...wt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[je](...wt)},ee={provide:ve,useFactory:j,deps:[Fe,f.R0b,[new f.FiY,me]]};let He=(()=>{class je{constructor(gt){te.Z.registerVersion("angularfire",U.q4.full,"core"),te.Z.registerVersion("angularfire",U.q4.full,"app-compat"),te.Z.registerVersion("angular",f.q4F.full,gt.toString())}static initializeApp(gt,oe){return{ngModule:je,providers:[{provide:Fe,useValue:gt},{provide:me,useValue:oe}]}}}return je.\u0275fac=function(gt){return new(gt||je)(f.LFG(f.Lbi))},je.\u0275mod=f.oAB({type:je}),je.\u0275inj=f.cJS({providers:[ee]}),je})();function Ne(je,wt,gt,oe,Ee){const[,re,Ae]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===je)||[];if(re)return function Ye(je,wt){try{return je.toString()===wt.toString()}catch{return je===wt}}(Ee,Ae)||(Ze("error",`${wt} was already initialized on the ${gt} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Ee,was:Ae})),re;{const Ve=oe();return globalThis.\u0275AngularfireInstanceCache.push([je,Ve,Ee]),Ve}}const Pe=!!ft.hot,Ze=(je,...wt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[je](...wt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(ft,Se,F)=>{F.d(Se,{q4:()=>Kn,iC:()=>ca,fc:()=>dd,HU:()=>aa,vb:()=>tg,JM:()=>ds});var f=F(5879),te=F(3182),U=F(5861),ne=F(534),ie=F(9058),fe=F(4537),ve=F(7879);const Fe=(C,T)=>T.some(R=>C instanceof R);let me,j;const He=new WeakMap,Ne=new WeakMap,Ye=new WeakMap,Pe=new WeakMap,Ze=new WeakMap;let gt={get(C,T,R){if(C instanceof IDBTransaction){if("done"===T)return Ne.get(C);if("objectStoreNames"===T)return C.objectStoreNames||Ye.get(C);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ae(C[T])},set:(C,T,R)=>(C[T]=R,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function re(C){return"function"==typeof C?function Ee(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(Ve(this),T),Ae(He.get(this))}:function(...T){return Ae(C.apply(Ve(this),T))}:function(T,...R){const L=C.call(Ve(this),T,...R);return Ye.set(L,T.sort?T.sort():[T]),Ae(L)}}(C):(C instanceof IDBTransaction&&function wt(C){if(Ne.has(C))return;const T=new Promise((R,L)=>{const q=()=>{C.removeEventListener("complete",Q),C.removeEventListener("error",ye),C.removeEventListener("abort",ye)},Q=()=>{R(),q()},ye=()=>{L(C.error||new DOMException("AbortError","AbortError")),q()};C.addEventListener("complete",Q),C.addEventListener("error",ye),C.addEventListener("abort",ye)});Ne.set(C,T)}(C),Fe(C,function z(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,gt):C)}function Ae(C){if(C instanceof IDBRequest)return function je(C){const T=new Promise((R,L)=>{const q=()=>{C.removeEventListener("success",Q),C.removeEventListener("error",ye)},Q=()=>{R(Ae(C.result)),q()},ye=()=>{L(C.error),q()};C.addEventListener("success",Q),C.addEventListener("error",ye)});return T.then(R=>{R instanceof IDBCursor&&He.set(R,C)}).catch(()=>{}),Ze.set(T,C),T}(C);if(Pe.has(C))return Pe.get(C);const T=re(C);return T!==C&&(Pe.set(C,T),Ze.set(T,C)),T}const Ve=C=>Ze.get(C),Ct=["get","getKey","getAll","getAllKeys","count"],$t=["put","add","delete","clear"],br=new Map;function gi(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(br.get(T))return br.get(T);const R=T.replace(/FromIndex$/,""),L=T!==R,q=$t.includes(R);if(!(R in(L?IDBIndex:IDBObjectStore).prototype)||!q&&!Ct.includes(R))return;const Q=function(){var ye=(0,U.Z)(function*(qe,...ze){const ut=this.transaction(qe,q?"readwrite":"readonly");let St=ut.store;return L&&(St=St.index(ze.shift())),(yield Promise.all([St[R](...ze),q&&ut.done]))[0]});return function(ze){return ye.apply(this,arguments)}}();return br.set(T,Q),Q}!function oe(C){gt=C(gt)}(C=>({...C,get:(T,R,L)=>gi(T,R)||C.get(T,R,L),has:(T,R)=>!!gi(T,R)||C.has(T,R)}));const js="@firebase/installations",tr="0.6.4",$o=1e4,Hs=`w:${tr}`,de="FIS_v2",ge="https://firebaseinstallations.googleapis.com/v1",Ie=36e5,rt=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(C){return C instanceof ie.ZR&&C.code.includes("request-failed")}function Vn({projectId:C}){return`${ge}/projects/${C}/installations`}function _t(C){return{token:C.token,requestStatus:2,expiresIn:Vr(C.expiresIn),creationTime:Date.now()}}function en(C,T){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,U.Z)(function*(C,T){const L=(yield T.json()).error;return rt.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Mn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function gr(C){return pn.apply(this,arguments)}function pn(){return(pn=(0,U.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function Vr(C){return Number(C.replace("s","000"))}function xi(){return(xi=(0,U.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:R}){const L=Vn(C),q=Mn(C),Q=T.getImmediate({optional:!0});if(Q){const ut=yield Q.getHeartbeatsHeader();ut&&q.append("x-firebase-client",ut)}const qe={method:"POST",headers:q,body:JSON.stringify({fid:R,authVersion:de,appId:C.appId,sdkVersion:Hs})},ze=yield gr(()=>fetch(L,qe));if(ze.ok){const ut=yield ze.json();return{fid:ut.fid||R,registrationStatus:2,refreshToken:ut.refreshToken,authToken:_t(ut.authToken)}}throw yield en("Create Installation",ze)})).apply(this,arguments)}function Ri(C){return new Promise(T=>{setTimeout(T,C)})}const gc=/^[cdef][\w-]{21}$/,yt="";function Gt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function Mt(C){return function po(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return gc.test(R)?R:yt}catch{return yt}}function wn(C){return`${C.appName}!${C.appId}`}const Pn=new Map;function mi(C,T){const R=wn(C);ba(R,T),function un(C,T){const R=function Vt(){return!Br&&"BroadcastChannel"in self&&(Br=new BroadcastChannel("[Firebase] FID Change"),Br.onmessage=C=>{ba(C.data.key,C.data.fid)}),Br}();R&&R.postMessage({key:C,fid:T}),function as(){0===Pn.size&&Br&&(Br.close(),Br=null)}()}(R,T)}function ba(C,T){const R=Pn.get(C);if(R)for(const L of R)L(T)}let Br=null;const go="firebase-installations-database",Da=1,Ni="firebase-installations-store";let vs=null;function Tr(){return vs||(vs=function Ke(C,T,{blocked:R,upgrade:L,blocking:q,terminated:Q}={}){const ye=indexedDB.open(C,T),qe=Ae(ye);return L&&ye.addEventListener("upgradeneeded",ze=>{L(Ae(ye.result),ze.oldVersion,ze.newVersion,Ae(ye.transaction))}),R&&ye.addEventListener("blocked",()=>R()),qe.then(ze=>{Q&&ze.addEventListener("close",()=>Q()),q&&ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),qe}(go,Da,{upgrade:(C,T)=>{0===T&&C.createObjectStore(Ni)}})),vs}function lr(C,T){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,U.Z)(function*(C,T){const R=wn(C),q=(yield Tr()).transaction(Ni,"readwrite"),Q=q.objectStore(Ni),ye=yield Q.get(R);return yield Q.put(T,R),yield q.done,(!ye||ye.fid!==T.fid)&&mi(C,T.fid),T})).apply(this,arguments)}function ws(C){return tn.apply(this,arguments)}function tn(){return(tn=(0,U.Z)(function*(C){const T=wn(C),L=(yield Tr()).transaction(Ni,"readwrite");yield L.objectStore(Ni).delete(T),yield L.done})).apply(this,arguments)}function Es(C,T){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,U.Z)(function*(C,T){const R=wn(C),q=(yield Tr()).transaction(Ni,"readwrite"),Q=q.objectStore(Ni),ye=yield Q.get(R),qe=T(ye);return void 0===qe?yield Q.delete(R):yield Q.put(qe,R),yield q.done,qe&&(!ye||ye.fid!==qe.fid)&&mi(C,qe.fid),qe})).apply(this,arguments)}function $(C){return H.apply(this,arguments)}function H(){return H=(0,U.Z)(function*(C){let T;const R=yield Es(C.appConfig,L=>{const q=function Y(C){return vn(C||{fid:Gt(),registrationStatus:0})}(L),Q=function Te(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(rt.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function ce(C,T){return ot.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:vt(C)}:{installationEntry:T}}(C,q);return T=Q.registrationPromise,Q.installationEntry});return R.fid===yt?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}}),H.apply(this,arguments)}function ot(){return ot=(0,U.Z)(function*(C,T){try{const R=yield function Ca(C,T){return xi.apply(this,arguments)}(C,T);return lr(C.appConfig,R)}catch(R){throw ct(R)&&409===R.customData.serverCode?yield ws(C.appConfig):yield lr(C.appConfig,{fid:T.fid,registrationStatus:0}),R}}),ot.apply(this,arguments)}function vt(C){return zt.apply(this,arguments)}function zt(){return(zt=(0,U.Z)(function*(C){let T=yield Rn(C.appConfig);for(;1===T.registrationStatus;)yield Ri(100),T=yield Rn(C.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield $(C);return L||R}return T})).apply(this,arguments)}function Rn(C){return Es(C,T=>{if(!T)throw rt.create("installation-not-found");return vn(T)})}function vn(C){return function Dt(C){return 1===C.registrationStatus&&C.registrationTime+$o<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Sr(){return(Sr=(0,U.Z)(function*({appConfig:C,heartbeatServiceProvider:T},R){const L=function zi(C,{fid:T}){return`${Vn(C)}/${T}/authTokens:generate`}(C,R),q=function xn(C,{refreshToken:T}){const R=Mn(C);return R.append("Authorization",function Mi(C){return`${de} ${C}`}(T)),R}(C,R),Q=T.getImmediate({optional:!0});if(Q){const ut=yield Q.getHeartbeatsHeader();ut&&q.append("x-firebase-client",ut)}const qe={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Hs,appId:C.appId}})},ze=yield gr(()=>fetch(L,qe));if(ze.ok)return _t(yield ze.json());throw yield en("Generate Auth Token",ze)})).apply(this,arguments)}function Is(C){return Oi.apply(this,arguments)}function Oi(){return Oi=(0,U.Z)(function*(C,T=!1){let R;const L=yield Es(C.appConfig,Q=>{if(!Ft(Q))throw rt.create("not-registered");const ye=Q.authToken;if(!T&&function Xt(C){return 2===C.requestStatus&&!function ur(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+Ie}(C)}(ye))return Q;if(1===ye.requestStatus)return R=function _e(C,T){return se.apply(this,arguments)}(C,T),Q;{if(!navigator.onLine)throw rt.create("app-offline");const qe=function nr(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}(Q);return R=function pt(C,T){return Tt.apply(this,arguments)}(C,qe),qe}});return R?yield R:L.authToken}),Oi.apply(this,arguments)}function se(){return(se=(0,U.Z)(function*(C,T){let R=yield Le(C.appConfig);for(;1===R.authToken.requestStatus;)yield Ri(100),R=yield Le(C.appConfig);const L=R.authToken;return 0===L.requestStatus?Is(C,T):L})).apply(this,arguments)}function Le(C){return Es(C,T=>{if(!Ft(T))throw rt.create("not-registered");return function $s(C){return 1===C.requestStatus&&C.requestTime+$o<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Tt(){return Tt=(0,U.Z)(function*(C,T){try{const R=yield function Zt(C,T){return Sr.apply(this,arguments)}(C,T),L=Object.assign(Object.assign({},T),{authToken:R});return yield lr(C.appConfig,L),R}catch(R){if(!ct(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield lr(C.appConfig,L)}else yield ws(C.appConfig);throw R}}),Tt.apply(this,arguments)}function Ft(C){return void 0!==C&&2===C.registrationStatus}function mc(){return(mc=(0,U.Z)(function*(C){const T=C,{installationEntry:R,registrationPromise:L}=yield $(T);return L?L.catch(console.error):Is(T).catch(console.error),R.fid})).apply(this,arguments)}function ki(){return ki=(0,U.Z)(function*(C,T=!1){const R=C;return yield function lh(C){return qi.apply(this,arguments)}(R),(yield Is(R,T)).token}),ki.apply(this,arguments)}function qi(){return(qi=(0,U.Z)(function*(C){const{registrationPromise:T}=yield $(C);T&&(yield T)})).apply(this,arguments)}function zo(C){return rt.create("missing-app-config-values",{valueName:C})}const dh="installations",b_=C=>{const T=C.getProvider("app").getImmediate(),R=function Cl(C){if(!C||!C.options)throw zo("App Configuration");if(!C.name)throw zo("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!C.options[R])throw zo(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ne._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},zs=C=>{const T=C.getProvider("app").getImmediate(),R=(0,ne._getProvider)(T,dh).getImmediate();return{getId:()=>function Go(C){return mc.apply(this,arguments)}(R),getToken:q=>function ch(C){return ki.apply(this,arguments)}(R,q)}};(function Lp(){(0,ne._registerComponent)(new fe.wA(dh,b_,"PUBLIC")),(0,ne._registerComponent)(new fe.wA("installations-internal",zs,"PRIVATE"))})(),(0,ne.registerVersion)(js,tr),(0,ne.registerVersion)(js,tr,"esm2017");const yc="@firebase/remote-config",gn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _i{constructor(T,R,L,q){this.client=T,this.storage=R,this.storageCache=L,this.logger=q}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,q=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${q}.`),q}fetch(T){var R=this;return(0,U.Z)(function*(){const[L,q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(q&&R.isCachedDataFresh(T.cacheMaxAgeMillis,L))return q;T.eTag=q&&q.eTag;const Q=yield R.client.fetch(T),ye=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&ye.push(R.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(ye),Q})()}}function ph(C=navigator){return C.languages&&C.languages[0]||C.language}class Cs{constructor(T,R,L,q,Q,ye){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=L,this.projectId=q,this.apiKey=Q,this.appId=ye}fetch(T){var R=this;return(0,U.Z)(function*(){const[L,q]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ye=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ze={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:q,app_id:R.appId,language_code:ph()},ut={method:"POST",headers:qe,body:JSON.stringify(ze)},St=fetch(ye,ut),At=new Promise((ai,Ns)=>{T.signal.addEventListener(()=>{const fd=new Error("The operation was aborted.");fd.name="AbortError",Ns(fd)})});let oi;try{yield Promise.race([St,At]),oi=yield St}catch(ai){let Ns="fetch-client-network";throw"AbortError"===ai?.name&&(Ns="fetch-timeout"),gn.create(Ns,{originalErrorMessage:ai?.message})}let Sn=oi.status;const Za=oi.headers.get("ETag")||void 0;let So,Rs;if(200===oi.status){let ai;try{ai=yield oi.json()}catch(Ns){throw gn.create("fetch-client-parse",{originalErrorMessage:Ns?.message})}So=ai.entries,Rs=ai.state}if("INSTANCE_STATE_UNSPECIFIED"===Rs?Sn=500:"NO_CHANGE"===Rs?Sn=304:("NO_TEMPLATE"===Rs||"EMPTY_CONFIG"===Rs)&&(So={}),304!==Sn&&200!==Sn)throw gn.create("fetch-status",{httpStatus:Sn});return{status:Sn,eTag:Za,config:So}})()}}class wc{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,U.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:L}){var q=this;return(0,U.Z)(function*(){yield function Fn(C,T){return new Promise((R,L)=>{const q=Math.max(T-Date.now(),0),Q=setTimeout(R,q);C.addEventListener(()=>{clearTimeout(Q),L(gn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const Q=yield q.client.fetch(T);return yield q.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function Aa(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Q))throw Q;const ye={throttleEndTimeMillis:Date.now()+(0,ie.$s)(L),backoffCount:L+1};return yield q.storage.setThrottleMetadata(ye),q.attemptFetch(T,ye)}})()}}class gh{constructor(T,R,L,q,Q){this.app=T,this._client=R,this._storageCache=L,this._storage=q,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fi(C,T){const R=C.target.error||void 0;return gn.create(T,{originalErrorMessage:R&&R?.message})}const qn="app_namespace_store";class yC{constructor(T,R,L,q=function Ht(){return new Promise((C,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{T(Fi(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(qn,{keyPath:"compositeKey"})}}catch(R){T(gn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=L,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,U.Z)(function*(){const L=yield R.openDbPromise;return new Promise((q,Q)=>{const qe=L.transaction([qn],"readonly").objectStore(qn),ze=R.createCompositeKey(T);try{const ut=qe.get(ze);ut.onerror=St=>{Q(Fi(St,"storage-get"))},ut.onsuccess=St=>{const At=St.target.result;q(At?At.value:void 0)}}catch(ut){Q(gn.create("storage-get",{originalErrorMessage:ut?.message}))}})})()}set(T,R){var L=this;return(0,U.Z)(function*(){const q=yield L.openDbPromise;return new Promise((Q,ye)=>{const ze=q.transaction([qn],"readwrite").objectStore(qn),ut=L.createCompositeKey(T);try{const St=ze.put({compositeKey:ut,value:R});St.onerror=At=>{ye(Fi(At,"storage-set"))},St.onsuccess=()=>{Q()}}catch(St){ye(gn.create("storage-set",{originalErrorMessage:St?.message}))}})})()}delete(T){var R=this;return(0,U.Z)(function*(){const L=yield R.openDbPromise;return new Promise((q,Q)=>{const qe=L.transaction([qn],"readwrite").objectStore(qn),ze=R.createCompositeKey(T);try{const ut=qe.delete(ze);ut.onerror=St=>{Q(Fi(St,"storage-delete"))},ut.onsuccess=()=>{q()}}catch(ut){Q(gn.create("storage-delete",{originalErrorMessage:ut?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Tl{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,U.Z)(function*(){const R=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),q=T.storage.getActiveConfig(),Q=yield R;Q&&(T.lastFetchStatus=Q);const ye=yield L;ye&&(T.lastSuccessfulFetchTimestampMillis=ye);const qe=yield q;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Zo(){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,U.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function bs(){(0,ne._registerComponent)(new fe.wA("remote-config",function C(T,{instanceIdentifier:R}){const L=T.getProvider("app").getImmediate(),q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gn.create("registration-window");if(!(0,ie.hl)())throw gn.create("indexed-db-unavailable");const{projectId:Q,apiKey:ye,appId:qe}=L.options;if(!Q)throw gn.create("registration-project-id");if(!ye)throw gn.create("registration-api-key");if(!qe)throw gn.create("registration-app-id");const ze=new yC(qe,L.name,R=R||"firebase"),ut=new Tl(ze),St=new ve.Yd(yc);St.logLevel=ve.in.ERROR;const At=new Cs(q,ne.SDK_VERSION,R,Q,ye,qe),oi=new wc(At,ze),Sn=new _i(oi,ze,ut,St),Za=new gh(L,Sn,ut,ze,St);return function Nt(C){const T=(0,ie.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Za),Za},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(yc,"0.4.4"),(0,ne.registerVersion)(yc,"0.4.4","esm2017")}();const Mr=(C,T)=>T.some(R=>C instanceof R);let D_,Wn;const Ws=new WeakMap,Zs=new WeakMap,xr=new WeakMap,Hr=new WeakMap,Ou=new WeakMap;let Ec={get(C,T,R){if(C instanceof IDBTransaction){if("done"===T)return Zs.get(C);if("objectStoreNames"===T)return C.objectStoreNames||xr.get(C);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ds(C[T])},set:(C,T,R)=>(C[T]=R,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function T_(C){return"function"==typeof C?function Bp(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xa(){return Wn||(Wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(ku(this),T),Ds(Ws.get(this))}:function(...T){return Ds(C.apply(ku(this),T))}:function(T,...R){const L=C.call(ku(this),T,...R);return xr.set(L,T.sort?T.sort():[T]),Ds(L)}}(C):(C instanceof IDBTransaction&&function mh(C){if(Zs.has(C))return;const T=new Promise((R,L)=>{const q=()=>{C.removeEventListener("complete",Q),C.removeEventListener("error",ye),C.removeEventListener("abort",ye)},Q=()=>{R(),q()},ye=()=>{L(C.error||new DOMException("AbortError","AbortError")),q()};C.addEventListener("complete",Q),C.addEventListener("error",ye),C.addEventListener("abort",ye)});Zs.set(C,T)}(C),Mr(C,function Li(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Ec):C)}function Ds(C){if(C instanceof IDBRequest)return function Up(C){const T=new Promise((R,L)=>{const q=()=>{C.removeEventListener("success",Q),C.removeEventListener("error",ye)},Q=()=>{R(Ds(C.result)),q()},ye=()=>{L(C.error),q()};C.addEventListener("success",Q),C.addEventListener("error",ye)});return T.then(R=>{R instanceof IDBCursor&&Ws.set(R,C)}).catch(()=>{}),Ou.set(T,C),T}(C);if(Hr.has(C))return Hr.get(C);const T=T_(C);return T!==C&&(Hr.set(C,T),Ou.set(T,C)),T}const ku=C=>Ou.get(C);function _h(C,T,{blocked:R,upgrade:L,blocking:q,terminated:Q}={}){const ye=indexedDB.open(C,T),qe=Ds(ye);return L&&ye.addEventListener("upgradeneeded",ze=>{L(Ds(ye.result),ze.oldVersion,ze.newVersion,Ds(ye.transaction))}),R&&ye.addEventListener("blocked",()=>R()),qe.then(ze=>{Q&&ze.addEventListener("close",()=>Q()),q&&ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),qe}function Ic(C,{blocked:T}={}){const R=indexedDB.deleteDatabase(C);return T&&R.addEventListener("blocked",()=>T()),Ds(R).then(()=>{})}const yh=["get","getKey","getAll","getAllKeys","count"],jp=["put","add","delete","clear"],Pu=new Map;function Hp(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(Pu.get(T))return Pu.get(T);const R=T.replace(/FromIndex$/,""),L=T!==R,q=jp.includes(R);if(!(R in(L?IDBIndex:IDBObjectStore).prototype)||!q&&!yh.includes(R))return;const Q=function(){var ye=(0,U.Z)(function*(qe,...ze){const ut=this.transaction(qe,q?"readwrite":"readonly");let St=ut.store;return L&&(St=St.index(ze.shift())),(yield Promise.all([St[R](...ze),q&&ut.done]))[0]});return function(ze){return ye.apply(this,arguments)}}();return Pu.set(T,Q),Q}!function Vp(C){Ec=C(Ec)}(C=>({...C,get:(T,R,L)=>Hp(T,R)||C.get(T,R,L),has:(T,R)=>!!Hp(T,R)||C.has(T,R)}));const vh="/firebase-messaging-sw.js",Fu="/firebase-cloud-messaging-push-scope",Cc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wh="https://fcmregistrations.googleapis.com/v1",Eh="google.c.a.c_id",Zn="google.c.a.c_l",$p="google.c.a.ts";var Ih=function(C){return C.PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",C}(Ih||{});function Zi(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bc(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),q=new Uint8Array(L.length);for(let Q=0;Q<L.length;++Q)q[Q]=L.charCodeAt(Q);return q}const Dc="fcm_token_details_db",Ch=5,Na="fcm_token_object_Store";function Oa(){return Oa=(0,U.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Dc))return null;let T=null;return(yield _h(Dc,Ch,{upgrade:(L=(0,U.Z)(function*(q,Q,ye,qe){var ze;if(Q<2||!q.objectStoreNames.contains(Na))return;const ut=qe.objectStore(Na),St=yield ut.index("fcmSenderId").get(C);if(yield ut.clear(),St)if(2===Q){const At=St;if(!At.auth||!At.p256dh||!At.endpoint)return;T={token:At.fcmToken,createTime:null!==(ze=At.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Zi(At.vapidKey)}}}else if(3===Q){const At=St;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Zi(At.auth),p256dh:Zi(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Zi(At.vapidKey)}}}else if(4===Q){const At=St;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Zi(At.auth),p256dh:Zi(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Zi(At.vapidKey)}}}}),function(Q,ye,qe,ze){return L.apply(this,arguments)})})).close(),yield Ic(Dc),yield Ic("fcm_vapid_details_db"),yield Ic("undefined"),function Ts(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var L}),Oa.apply(this,arguments)}const ka="firebase-messaging-database",ir=1,wi="firebase-messaging-store";let bh=null;function Pa(){return bh||(bh=_h(ka,ir,{upgrade:(C,T)=>{0===T&&C.createObjectStore(wi)}})),bh}function Tc(C){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,U.Z)(function*(C){const T=Sl(C),L=yield(yield Pa()).transaction(wi).objectStore(wi).get(T);if(L)return L;{const q=yield function aw(C){return Oa.apply(this,arguments)}(C.appConfig.senderId);if(q)return yield Dh(C,q),q}}),Ks.apply(this,arguments)}function Dh(C,T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,U.Z)(function*(C,T){const R=Sl(C),q=(yield Pa()).transaction(wi,"readwrite");return yield q.objectStore(wi).put(T,R),yield q.done,T})).apply(this,arguments)}function Fa(){return(Fa=(0,U.Z)(function*(C){const T=Sl(C),L=(yield Pa()).transaction(wi,"readwrite");yield L.objectStore(wi).delete(T),yield L.done})).apply(this,arguments)}function Sl({appConfig:C}){return C.appId}const $r=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Gp(C,T){return zp.apply(this,arguments)}function zp(){return(zp=(0,U.Z)(function*(C,T){const R=yield Al(C),L=qp(T),q={method:"POST",headers:R,body:JSON.stringify(L)};let Q;try{Q=yield(yield fetch(La(C.appConfig),q)).json()}catch(ye){throw $r.create("token-subscribe-failed",{errorInfo:ye?.toString()})}if(Q.error)throw $r.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw $r.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function Bu(){return(Bu=(0,U.Z)(function*(C,T){const R=yield Al(C),L=qp(T.subscriptionOptions),q={method:"PATCH",headers:R,body:JSON.stringify(L)};let Q;try{Q=yield(yield fetch(`${La(C.appConfig)}/${T.token}`,q)).json()}catch(ye){throw $r.create("token-update-failed",{errorInfo:ye?.toString()})}if(Q.error)throw $r.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw $r.create("token-update-no-token");return Q.token})).apply(this,arguments)}function ju(C,T){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,U.Z)(function*(C,T){const L={method:"DELETE",headers:yield Al(C)};try{const Q=yield(yield fetch(`${La(C.appConfig)}/${T}`,L)).json();if(Q.error)throw $r.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(q){throw $r.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function La({projectId:C}){return`${wh}/projects/${C}/registrations`}function Al(C){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,U.Z)(function*({appConfig:C,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function qp({p256dh:C,auth:T,endpoint:R,vapidKey:L}){const q={web:{endpoint:R,auth:T,p256dh:C}};return L!==Cc&&(q.web.applicationPubKey=L),q}const $u=6048e5;function Ml(){return Ml=(0,U.Z)(function*(C){const T=yield function Mc(C,T){return Ua.apply(this,arguments)}(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:Zi(T.getKey("auth")),p256dh:Zi(T.getKey("p256dh"))},L=yield Tc(C.firebaseDependencies);if(L){if(function Gr(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}(L.subscriptionOptions,R))return Date.now()>=L.createTime+$u?function Ss(C,T){return Ac.apply(this,arguments)}(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield ju(C.firebaseDependencies,L.token)}catch(q){console.warn(q)}return Mh(C.firebaseDependencies,R)}return Mh(C.firebaseDependencies,R)}),Ml.apply(this,arguments)}function Ah(){return Ah=(0,U.Z)(function*(C){const T=yield Tc(C.firebaseDependencies);T&&(yield ju(C.firebaseDependencies,T.token),yield function Th(C){return Fa.apply(this,arguments)}(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),Ah.apply(this,arguments)}function Ac(){return Ac=(0,U.Z)(function*(C,T){try{const R=yield function Sh(C,T){return Bu.apply(this,arguments)}(C.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Dh(C.firebaseDependencies,L),R}catch(R){throw yield function Gu(C){return Ah.apply(this,arguments)}(C),R}}),Ac.apply(this,arguments)}function Mh(C,T){return ln.apply(this,arguments)}function ln(){return(ln=(0,U.Z)(function*(C,T){const L={token:yield Gp(C,T),createTime:Date.now(),subscriptionOptions:T};return yield Dh(C,L),L.token})).apply(this,arguments)}function Ua(){return(Ua=(0,U.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bc(T)})})).apply(this,arguments)}function Va(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function xh(C,T){if(!T.notification)return;C.notification={};const R=T.notification.title;R&&(C.notification.title=R);const L=T.notification.body;L&&(C.notification.body=L);const q=T.notification.image;q&&(C.notification.image=q);const Q=T.notification.icon;Q&&(C.notification.icon=Q)}(T,C),function Ys(C,T){T.data&&(C.data=T.data)}(T,C),function Ki(C,T){var R,L,q,Q,ye;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;C.fcmOptions={};const qe=null!==(q=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==q?q:null===(Q=T.notification)||void 0===Q?void 0:Q.click_action;qe&&(C.fcmOptions.link=qe);const ze=null===(ye=T.fcmOptions)||void 0===ye?void 0:ye.analytics_label;ze&&(C.fcmOptions.analyticsLabel=ze)}(T,C),T}function Rh(C,T){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<T.length&&R.push(T.charAt(L));return R.join("")}function As(C){return $r.create("missing-app-config-values",{valueName:C})}Rh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Rh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Nh{constructor(T,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function zu(C){if(!C||!C.options)throw As("App Configuration Object");if(!C.name)throw As("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of T)if(!R[L])throw As(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:q,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function xl(){return(xl=(0,U.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(vh,{scope:Fu}),C.swRegistration.update().catch(()=>{})}catch(T){throw $r.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function _o(){return(_o=(0,U.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield function qu(C){return xl.apply(this,arguments)}(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw $r.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function bt(){return(bt=(0,U.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=Cc)})).apply(this,arguments)}function Oh(){return Oh=(0,U.Z)(function*(C,T){if(!navigator)throw $r.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $r.create("permission-blocked");return yield function yo(C,T){return bt.apply(this,arguments)}(C,T?.vapidKey),yield function Wu(C,T){return _o.apply(this,arguments)}(C,T?.serviceWorkerRegistration),function Wp(C){return Ml.apply(this,arguments)}(C)}),Oh.apply(this,arguments)}function kh(){return(kh=(0,U.Z)(function*(C,T,R){const L=function Kp(C){switch(C){case Ih.NOTIFICATION_CLICKED:return"notification_open";case Ih.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[Eh],message_name:R[Zn],message_time:R[$p],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cs(){return cs=(0,U.Z)(function*(C,T){const R=T.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===Ih.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Va(R)):C.onMessageHandler.next(Va(R)));const L=R.data;(function S_(C){return"object"==typeof C&&!!C&&Eh in C})(L)&&"1"===L["google.c.a.e"]&&(yield function Zp(C,T,R){return kh.apply(this,arguments)}(C,R.messageType,L))}),cs.apply(this,arguments)}const Ba="@firebase/messaging",Yu=C=>{const T=new Nh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Ku(C,T){return cs.apply(this,arguments)}(T,R)),T},Qu=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:L=>function Zu(C,T){return Oh.apply(this,arguments)}(T,L)}};function Re(){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,U.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Yp(){(0,ne._registerComponent)(new fe.wA("messaging",Yu,"PUBLIC")),(0,ne._registerComponent)(new fe.wA("messaging-internal",Qu,"PRIVATE")),(0,ne.registerVersion)(Ba,"0.12.4"),(0,ne.registerVersion)(Ba,"0.12.4","esm2017")}();const Bn="analytics",A_="firebase_id",Nl="origin",ri=6e4,Yi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ol="https://www.googletagmanager.com/gtag/js",Ln=new ve.Yd("@firebase/analytics"),qr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Rc(C){if(!C.startsWith(Ol)){const T=qr.create("invalid-gtag-resource",{gtagURL:C});return Ln.warn(T.message),""}return C}function Fh(C){return Promise.all(C.map(T=>T.catch(R=>R)))}function Yo(){return(Yo=(0,U.Z)(function*(C,T,R,L,q,Q){const ye=L[q];try{if(ye)yield T[ye];else{const ze=(yield Fh(R)).find(ut=>ut.measurementId===q);ze&&(yield T[ze.appId])}}catch(qe){Ln.error(qe)}C("config",q,Q)})).apply(this,arguments)}function kl(){return(kl=(0,U.Z)(function*(C,T,R,L,q){try{let Q=[];if(q&&q.send_to){let ye=q.send_to;Array.isArray(ye)||(ye=[ye]);const qe=yield Fh(R);for(const ze of ye){const ut=qe.find(At=>At.measurementId===ze),St=ut&&T[ut.appId];if(!St){Q=[];break}Q.push(St)}}0===Q.length&&(Q=Object.values(T)),yield Promise.all(Q),C("event",L,q||{})}catch(Q){Ln.error(Q)}})).apply(this,arguments)}const Xp=30,Lh=new class Qo{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function x_(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Eo(){return(Eo=(0,U.Z)(function*(C){var T;const{appId:R,apiKey:L}=C,q={method:"GET",headers:x_(L)},Q=Yi.replace("{app-id}",R),ye=yield fetch(Q,q);if(200!==ye.status&&304!==ye.status){let qe="";try{const ze=yield ye.json();null!==(T=ze.error)&&void 0!==T&&T.message&&(qe=ze.error.message)}catch{}throw qr.create("config-fetch-failed",{httpStatus:ye.status,responseMessage:qe})}return ye.json()})).apply(this,arguments)}function Lc(){return(Lc=(0,U.Z)(function*(C,T=Lh,R){const{appId:L,apiKey:q,measurementId:Q}=C.options;if(!L)throw qr.create("no-app-id");if(!q){if(Q)return{measurementId:Q,appId:L};throw qr.create("no-api-key")}const ye=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new td;return setTimeout((0,U.Z)(function*(){qe.abort()}),void 0!==R?R:ri),Jp({appId:L,apiKey:q,measurementId:Q},ye,qe,T)})).apply(this,arguments)}function Jp(C,T,R){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,U.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:R},L,q=Lh){var Q;const{appId:ye,measurementId:qe}=C;try{yield function eg(C,T){return new Promise((R,L)=>{const q=Math.max(T-Date.now(),0),Q=setTimeout(R,q);C.addEventListener(()=>{clearTimeout(Q),L(qr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(L,T)}catch(ze){if(qe)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:ye,measurementId:qe};throw ze}try{const ze=yield function Ei(C){return Eo.apply(this,arguments)}(C);return q.deleteThrottleMetadata(ye),ze}catch(ze){const ut=ze;if(!function Vc(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ut)){if(q.deleteThrottleMetadata(ye),qe)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${ut?.message}]`),{appId:ye,measurementId:qe};throw ze}const St=503===Number(null===(Q=ut?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,ie.$s)(R,q.intervalMillis,Xp):(0,ie.$s)(R,q.intervalMillis),At={throttleEndTimeMillis:Date.now()+St,backoffCount:R+1};return q.setThrottleMetadata(ye,At),Ln.debug(`Calling attemptFetch again in ${St} millis`),Jp(C,At,L,q)}}),Uc.apply(this,arguments)}class td{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Bc,dt;function Uh(){return(Uh=(0,U.Z)(function*(C,T,R,L,q){if(q&&q.global)C("event",R,L);else{const Q=yield T;C("event",R,Object.assign(Object.assign({},L),{send_to:Q}))}})).apply(this,arguments)}function sd(){return(sd=(0,U.Z)(function*(){if(!(0,ie.hl)())return Ln.warn(qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return Ln.warn(qr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function ea(){return ea=(0,U.Z)(function*(C,T,R,L,q,Q,ye){var qe;const ze=function jn(C){return Lc.apply(this,arguments)}(C);ze.then(Sn=>{R[Sn.measurementId]=Sn.appId,C.options.measurementId&&Sn.measurementId!==C.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sn=>Ln.error(Sn)),T.push(ze);const ut=function id(){return sd.apply(this,arguments)}().then(Sn=>{if(Sn)return L.getId()}),[St,At]=yield Promise.all([ze,ut]);(function ed(C){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(Ol)&&R.src.includes(C))return R;return null})(Q)||function Oc(C,T){const R=function Nc(C,T){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(C,T)),R}("firebase-js-sdk-policy",{createScriptURL:Rc}),L=document.createElement("script"),q=`${Ol}?l=${C}&id=${T}`;L.src=R?R?.createScriptURL(q):q,L.async=!0,document.head.appendChild(L)}(Q,St.measurementId),dt&&(q("consent","default",dt),function Wr(C){dt=C}(void 0)),q("js",new Date);const oi=null!==(qe=ye?.config)&&void 0!==qe?qe:{};return oi[Nl]="firebase",oi.update=!0,null!=At&&(oi[A_]=At),q("config",St.measurementId,oi),Bc&&(q("set",Bc),function Ll(C){Bc=C}(void 0)),St.measurementId}),ea.apply(this,arguments)}class Io{constructor(T){this.app=T}_delete(){return delete dr[this.app.options.appId],Promise.resolve()}}let dr={},mt=[];const Hc={};let ta,Xi,Ha="dataLayer",sr=!1;function od(C,T,R){!function Ui(){const C=[];if((0,ie.ru)()&&C.push("This is a browser extension environment."),(0,ie.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((L,q)=>`(${q+1}) ${L}`).join(" "),R=qr.create("invalid-analytics-context",{errorInfo:T});Ln.warn(R.message)}}();const L=C.options.appId;if(!L)throw qr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw qr.create("no-api-key");Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=dr[L])throw qr.create("already-exists",{id:L});if(!sr){!function Ju(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(Ha);const{wrappedGtag:Q,gtagCore:ye}=function Fc(C,T,R,L,q){let Q=function(...ye){window[L].push(arguments)};return window[q]&&"function"==typeof window[q]&&(Q=window[q]),window[q]=function Pc(C,T,R,L){function Q(){return Q=(0,U.Z)(function*(ye,...qe){try{if("event"===ye){const[ze,ut]=qe;yield function Ms(C,T,R,L,q){return kl.apply(this,arguments)}(C,T,R,ze,ut)}else if("config"===ye){const[ze,ut]=qe;yield function kc(C,T,R,L,q,Q){return Yo.apply(this,arguments)}(C,T,R,L,ze,ut)}else if("consent"===ye){const[ze]=qe;C("consent","update",ze)}else if("get"===ye){const[ze,ut,St]=qe;C("get",ze,ut,St)}else if("set"===ye){const[ze]=qe;C("set",ze)}else C(ye,...qe)}catch(ze){Ln.error(ze)}}),Q.apply(this,arguments)}return function q(ye){return Q.apply(this,arguments)}}(Q,C,T,R),{gtagCore:Q,wrappedGtag:window[q]}}(dr,mt,Hc,Ha,"gtag");Xi=Q,ta=ye,sr=!0}return dr[L]=function Vh(C,T,R,L,q,Q,ye){return ea.apply(this,arguments)}(C,mt,Hc,T,ta,Ha,R),new Io(C)}function na(){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,U.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const Gc="@firebase/analytics";!function Xs(){(0,ne._registerComponent)(new fe.wA(Bn,(T,{options:R})=>od(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ne._registerComponent)(new fe.wA("analytics-internal",function C(T){try{const R=T.getProvider(Bn).getImmediate();return{logEvent:(L,q,Q)=>function ia(C,T,R,L){C=(0,ie.m9)(C),function Xo(C,T,R,L,q){return Uh.apply(this,arguments)}(Xi,dr[C.app.options.appId],T,R,L).catch(q=>Ln.error(q))}(R,L,q,Q)}}catch(R){throw qr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ne.registerVersion)(Gc,"0.10.0"),(0,ne.registerVersion)(Gc,"0.10.0","esm2017")}();var En=F(1954),Ga=F(2631);const ii=new class Rr extends Ga.v{}(class sa extends En.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,R,L):(T.flush(this),0)}});var za=F(6321),qa=F(9397),Zr=F(3093),Ci=F(5137);const Kn=new f.GfV("7.6.1"),Vi="__angularfire_symbol__analyticsIsSupportedValue",xs="__angularfire_symbol__analyticsIsSupported",oa="__angularfire_symbol__remoteConfigIsSupportedValue",Wa="__angularfire_symbol__remoteConfigIsSupported",ld="__angularfire_symbol__messagingIsSupportedValue",ud="__angularfire_symbol__messagingIsSupported";function ds(C,T,R){if(T){if(1===T.length)return T[0];const Q=T.filter(ye=>ye.app===R);if(1===Q.length)return Q[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[xs]||(globalThis[xs]=na().then(C=>globalThis[Vi]=C).catch(()=>globalThis[Vi]=!1)),globalThis[ud]||(globalThis[ud]=Re().then(C=>globalThis[ld]=C).catch(()=>globalThis[ld]=!1)),globalThis[Wa]||(globalThis[Wa]=Zo().then(C=>globalThis[oa]=C).catch(()=>globalThis[oa]=!1));const tg=(C,T)=>{const R=T?[T]:(0,te.C6)(),L=[];return R.forEach(q=>{q.container.getProvider(C).instances.forEach(ye=>{L.includes(ye)||L.push(ye)})}),L};function To(){}class mn{constructor(T,R=ii){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,L){const q=this.zone;return this.delegate.schedule(function(ye){q.runGuarded(()=>{T.apply(this,[ye])})},R,L)}}class jh{constructor(T){this.zone=T,this.task=null}call(T,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",To,{},To,To)),R.pipe((0,qa.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let aa=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new mn(Zone.current)),this.insideAngular=R.run(()=>new mn(Zone.current,za.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(f.LFG(f.R0b))},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function bi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function dd(C){return C.pipe((0,Zr.Q)(bi().outsideAngular))}function ca(C){return bi(),function ng(C){return function(R){return(R=R.lift(new jh(C.ngZone))).pipe((0,Ci.R)(C.outsideAngular),(0,Zr.Q)(C.insideAngular))}}(bi())(C)}},9058:(ft,Se,F)=>{F.d(Se,{$s:()=>ws,BH:()=>re,DV:()=>Vr,Dv:()=>ba,G6:()=>Hs,GJ:()=>gr,L:()=>me,LL:()=>xe,Pz:()=>Ee,Sg:()=>Ae,UG:()=>ue,UI:()=>Ca,US:()=>fe,Wj:()=>Vt,Wl:()=>_t,Yr:()=>$o,ZB:()=>ee,ZR:()=>De,aH:()=>oe,b$:()=>br,cI:()=>Vn,dS:()=>go,eu:()=>ge,g5:()=>U,gK:()=>un,gQ:()=>Mt,h$:()=>Fe,hl:()=>de,hu:()=>te,jU:()=>Ct,lb:()=>as,m9:()=>Qt,ne:()=>wn,p$:()=>z,pd:()=>Gt,r3:()=>pn,ru:()=>$t,tV:()=>j,uI:()=>Ke,ug:()=>Da,vZ:()=>xi,w1:()=>js,w9:()=>xn,xO:()=>gc,xb:()=>Mi,z$:()=>Ve,zI:()=>Ie,zd:()=>yt});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function($,H){if(!$)throw U(H)},U=function($){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},ne=function($){const H=[];let Y=0;for(let Te=0;Te<$.length;Te++){let ce=$.charCodeAt(Te);ce<128?H[Y++]=ce:ce<2048?(H[Y++]=ce>>6|192,H[Y++]=63&ce|128):55296==(64512&ce)&&Te+1<$.length&&56320==(64512&$.charCodeAt(Te+1))?(ce=65536+((1023&ce)<<10)+(1023&$.charCodeAt(++Te)),H[Y++]=ce>>18|240,H[Y++]=ce>>12&63|128,H[Y++]=ce>>6&63|128,H[Y++]=63&ce|128):(H[Y++]=ce>>12|224,H[Y++]=ce>>6&63|128,H[Y++]=63&ce|128)}return H},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,H){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let ce=0;ce<$.length;ce+=3){const ot=$[ce],vt=ce+1<$.length,zt=vt?$[ce+1]:0,Rn=ce+2<$.length,vn=Rn?$[ce+2]:0;let Sr=(15&zt)<<2|vn>>6,zi=63&vn;Rn||(zi=64,vt||(Sr=64)),Te.push(Y[ot>>2],Y[(3&ot)<<4|zt>>4],Y[Sr],Y[zi])}return Te.join("")},encodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa($):this.encodeByteArray(ne($),H)},decodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?atob($):function($){const H=[];let Y=0,Te=0;for(;Y<$.length;){const ce=$[Y++];if(ce<128)H[Te++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const ot=$[Y++];H[Te++]=String.fromCharCode((31&ce)<<6|63&ot)}else if(ce>239&&ce<365){const Rn=((7&ce)<<18|(63&$[Y++])<<12|(63&$[Y++])<<6|63&$[Y++])-65536;H[Te++]=String.fromCharCode(55296+(Rn>>10)),H[Te++]=String.fromCharCode(56320+(1023&Rn))}else{const ot=$[Y++],vt=$[Y++];H[Te++]=String.fromCharCode((15&ce)<<12|(63&ot)<<6|63&vt)}}return H.join("")}(this.decodeStringToByteArray($,H))},decodeStringToByteArray($,H){this.init_();const Y=H?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let ce=0;ce<$.length;){const ot=Y[$.charAt(ce++)],zt=ce<$.length?Y[$.charAt(ce)]:0;++ce;const vn=ce<$.length?Y[$.charAt(ce)]:64;++ce;const Zt=ce<$.length?Y[$.charAt(ce)]:64;if(++ce,null==ot||null==zt||null==vn||null==Zt)throw new ve;Te.push(ot<<2|zt>>4),64!==vn&&(Te.push(zt<<4&240|vn>>2),64!==Zt&&Te.push(vn<<6&192|Zt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function($){const H=ne($);return fe.encodeByteArray(H,!0)},me=function($){return Fe($).replace(/\./g,"")},j=function($){try{return fe.decodeString($,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z($){return ee(void 0,$)}function ee($,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return H}for(const Y in H)!H.hasOwnProperty(Y)||!He(Y)||($[Y]=ee($[Y],H[Y]));return $}function He($){return"__proto__"!==$}const je=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=$&&j($[1]);return H&&JSON.parse(H)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},oe=()=>{var $;return null===($=je())||void 0===$?void 0:$.config},Ee=$=>{var H;return null===(H=je())||void 0===H?void 0:H[`_${$}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Y)=>{this.resolve=H,this.reject=Y})}wrapCallback(H){return(Y,Te)=>{Y?this.reject(Y):this.resolve(Te),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Y):H(Y,Te))}}}function Ae($,H){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=H||"demo-project",ce=$.iat||0,ot=$.sub||$.user_id;if(!ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:ce,exp:ce+3600,auth_time:ce,sub:ot,user_id:ot,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(vt)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ue(){var $;const H=null===($=je())||void 0===$?void 0:$.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ct(){return"object"==typeof self&&self.self===self}function $t(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function br(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function js(){const $=Ve();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function $o(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function Hs(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise(($,H)=>{try{let Y=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",ce=self.indexedDB.open(Te);ce.onsuccess=()=>{ce.result.close(),Y||self.indexedDB.deleteDatabase(Te),$(!0)},ce.onupgradeneeded=()=>{Y=!1},ce.onerror=()=>{var ot;H((null===(ot=ce.error)||void 0===ot?void 0:ot.message)||"")}}catch(Y){H(Y)}})}function Ie(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class De extends Error{constructor(H,Y,Te){super(Y),this.code=H,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,De.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xe.prototype.create)}}class xe{constructor(H,Y,Te){this.service=H,this.serviceName=Y,this.errors=Te}create(H,...Y){const Te=Y[0]||{},ce=`${this.service}/${H}`,ot=this.errors[H],vt=ot?function rt($,H){return $.replace(ct,(Y,Te)=>{const ce=H[Te];return null!=ce?String(ce):`<${Te}?>`})}(ot,Te):"Error";return new De(ce,`${this.serviceName}: ${vt} (${ce}).`,Te)}}const ct=/\{\$([^}]+)}/g;function Vn($){return JSON.parse($)}function _t($){return JSON.stringify($)}const en=function($){let H={},Y={},Te={},ce="";try{const ot=$.split(".");H=Vn(j(ot[0])||""),Y=Vn(j(ot[1])||""),ce=ot[2],Te=Y.d||{},delete Y.d}catch{}return{header:H,claims:Y,data:Te,signature:ce}},xn=function($){const Y=en($).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},gr=function($){const H=en($).claims;return"object"==typeof H&&!0===H.admin};function pn($,H){return Object.prototype.hasOwnProperty.call($,H)}function Vr($,H){if(Object.prototype.hasOwnProperty.call($,H))return $[H]}function Mi($){for(const H in $)if(Object.prototype.hasOwnProperty.call($,H))return!1;return!0}function Ca($,H,Y){const Te={};for(const ce in $)Object.prototype.hasOwnProperty.call($,ce)&&(Te[ce]=H.call(Y,$[ce],ce,$));return Te}function xi($,H){if($===H)return!0;const Y=Object.keys($),Te=Object.keys(H);for(const ce of Y){if(!Te.includes(ce))return!1;const ot=$[ce],vt=H[ce];if(Ri(ot)&&Ri(vt)){if(!xi(ot,vt))return!1}else if(ot!==vt)return!1}for(const ce of Te)if(!Y.includes(ce))return!1;return!0}function Ri($){return null!==$&&"object"==typeof $}function gc($){const H=[];for(const[Y,Te]of Object.entries($))Array.isArray(Te)?Te.forEach(ce=>{H.push(encodeURIComponent(Y)+"="+encodeURIComponent(ce))}):H.push(encodeURIComponent(Y)+"="+encodeURIComponent(Te));return H.length?"&"+H.join("&"):""}function yt($){const H={};return $.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[ce,ot]=Te.split("=");H[decodeURIComponent(ce)]=decodeURIComponent(ot)}}),H}function Gt($){const H=$.indexOf("?");if(!H)return"";const Y=$.indexOf("#",H);return $.substring(H,Y>0?Y:void 0)}class Mt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Y){Y||(Y=0);const Te=this.W_;if("string"==typeof H)for(let Zt=0;Zt<16;Zt++)Te[Zt]=H.charCodeAt(Y)<<24|H.charCodeAt(Y+1)<<16|H.charCodeAt(Y+2)<<8|H.charCodeAt(Y+3),Y+=4;else for(let Zt=0;Zt<16;Zt++)Te[Zt]=H[Y]<<24|H[Y+1]<<16|H[Y+2]<<8|H[Y+3],Y+=4;for(let Zt=16;Zt<80;Zt++){const Sr=Te[Zt-3]^Te[Zt-8]^Te[Zt-14]^Te[Zt-16];Te[Zt]=4294967295&(Sr<<1|Sr>>>31)}let vn,Dt,ce=this.chain_[0],ot=this.chain_[1],vt=this.chain_[2],zt=this.chain_[3],Rn=this.chain_[4];for(let Zt=0;Zt<80;Zt++){Zt<40?Zt<20?(vn=zt^ot&(vt^zt),Dt=1518500249):(vn=ot^vt^zt,Dt=1859775393):Zt<60?(vn=ot&vt|zt&(ot|vt),Dt=2400959708):(vn=ot^vt^zt,Dt=3395469782);const Sr=(ce<<5|ce>>>27)+vn+Rn+Dt+Te[Zt]&4294967295;Rn=zt,zt=vt,vt=4294967295&(ot<<30|ot>>>2),ot=ce,ce=Sr}this.chain_[0]=this.chain_[0]+ce&4294967295,this.chain_[1]=this.chain_[1]+ot&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+Rn&4294967295}update(H,Y){if(null==H)return;void 0===Y&&(Y=H.length);const Te=Y-this.blockSize;let ce=0;const ot=this.buf_;let vt=this.inbuf_;for(;ce<Y;){if(0===vt)for(;ce<=Te;)this.compress_(H,ce),ce+=this.blockSize;if("string"==typeof H){for(;ce<Y;)if(ot[vt]=H.charCodeAt(ce),++vt,++ce,vt===this.blockSize){this.compress_(ot),vt=0;break}}else for(;ce<Y;)if(ot[vt]=H[ce],++vt,++ce,vt===this.blockSize){this.compress_(ot),vt=0;break}}this.inbuf_=vt,this.total_+=Y}digest(){const H=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ce=this.blockSize-1;ce>=56;ce--)this.buf_[ce]=255&Y,Y/=256;this.compress_(this.buf_);let Te=0;for(let ce=0;ce<5;ce++)for(let ot=24;ot>=0;ot-=8)H[Te]=this.chain_[ce]>>ot&255,++Te;return H}}function wn($,H){const Y=new Pn($,H);return Y.subscribe.bind(Y)}class Pn{constructor(H,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{H(this)}).catch(Te=>{this.error(Te)})}next(H){this.forEachObserver(Y=>{Y.next(H)})}error(H){this.forEachObserver(Y=>{Y.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Y,Te){let ce;if(void 0===H&&void 0===Y&&void 0===Te)throw new Error("Missing Observer.");ce=function cn($,H){if("object"!=typeof $||null===$)return!1;for(const Y of H)if(Y in $&&"function"==typeof $[Y])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Y,complete:Te},void 0===ce.next&&(ce.next=Dr),void 0===ce.error&&(ce.error=Dr),void 0===ce.complete&&(ce.complete=Dr);const ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch{}}),this.observers.push(ce),ot}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,H)}sendOne(H,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Y(this.observers[H])}catch(Te){typeof console<"u"&&console.error&&console.error(Te)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dr(){}const ba=function($,H,Y,Te){let ce;if(Te<H?ce="at least "+H:Te>Y&&(ce=0===Y?"none":"no more than "+Y),ce)throw new Error($+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+ce+".")};function un($,H){return`${$} failed: ${H} argument `}function Vt($,H,Y,Te){if((!Te||Y)&&"function"!=typeof Y)throw new Error(un($,H)+"must be a valid function.")}function as($,H,Y,Te){if((!Te||Y)&&("object"!=typeof Y||null===Y))throw new Error(un($,H)+"must be a valid context object.")}const go=function($){const H=[];let Y=0;for(let Te=0;Te<$.length;Te++){let ce=$.charCodeAt(Te);if(ce>=55296&&ce<=56319){const ot=ce-55296;Te++,te(Te<$.length,"Surrogate pair missing trail surrogate."),ce=65536+(ot<<10)+($.charCodeAt(Te)-56320)}ce<128?H[Y++]=ce:ce<2048?(H[Y++]=ce>>6|192,H[Y++]=63&ce|128):ce<65536?(H[Y++]=ce>>12|224,H[Y++]=ce>>6&63|128,H[Y++]=63&ce|128):(H[Y++]=ce>>18|240,H[Y++]=ce>>12&63|128,H[Y++]=ce>>6&63|128,H[Y++]=63&ce|128)}return H},Da=function($){let H=0;for(let Y=0;Y<$.length;Y++){const Te=$.charCodeAt(Y);Te<128?H++:Te<2048?H+=2:Te>=55296&&Te<=56319?(H+=4,Y++):H+=3}return H},vs=1e3,Tr=2,lr=144e5,Cn=.5;function ws($,H=vs,Y=Tr){const Te=H*Math.pow(Y,$),ce=Math.round(Cn*Te*(Math.random()-.5)*2);return Math.min(lr,Te+ce)}function Qt($){return $&&$._delegate?$._delegate:$}},8807:(ft,Se,F)=>{var f=F(5879);let te=null;function U(){return te}class ie{}const fe=new f.OlP("DocumentToken");let ve=(()=>{var t;class e{historyGo(r){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return(0,f.f3M)(me)},providedIn:"platform"}),e})();const Fe=new f.OlP("Location Initialized");let me=(()=>{var t;class e extends ve{constructor(){super(),this._doc=(0,f.f3M)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(r){const i=U().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=U().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function j(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function z(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ee(t){return t&&"?"!==t[0]?"?"+t:t}let He=(()=>{var t;class e{historyGo(r){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return(0,f.f3M)(Ye)},providedIn:"root"}),e})();const Ne=new f.OlP("appBaseHref");let Ye=(()=>{var t;class e extends He{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return j(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+ee(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,l){const h=this.prepareExternalUrl(o+ee(l));this._platformLocation.pushState(r,i,h)}replaceState(r,i,o,l){const h=this.prepareExternalUrl(o+ee(l));this._platformLocation.replaceState(r,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(ve),f.LFG(Ne,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Pe=(()=>{var t;class e extends He{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=j(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,l){let h=this.prepareExternalUrl(o+ee(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(r,i,h)}replaceState(r,i,o,l){let h=this.prepareExternalUrl(o+ee(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(ve),f.LFG(Ne,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})(),Ze=(()=>{var t;class e{constructor(r){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function oe(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(z(gt(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ee(i))}normalize(r){return e.stripTrailingSlash(function wt(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,gt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ee(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ee(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}}return(t=e).normalizeQueryParams=ee,t.joinWithSlash=j,t.stripTrailingSlash=z,t.\u0275fac=function(r){return new(r||t)(f.LFG(He))},t.\u0275prov=f.Yz7({token:t,factory:function(){return function je(){return new Ze((0,f.LFG)(He))}()},providedIn:"root"}),e})();function gt(t){return t.replace(/\/index.html$/,"")}class Mu{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _c=(()=>{var t;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((o,l,h)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new Mu(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)i.remove(null===l?void 0:l);else if(null!==l){const _=i.get(l);i.move(_,h),uh(_,o)}});for(let o=0,l=i.length;o<l;o++){const _=i.get(o).context;_.index=o,_.count=l,_.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{uh(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},t.\u0275dir=f.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function uh(t,e){t.context.$implicit=e.item}let Gs=(()=>{var t;class e{constructor(r,i){this._viewContainer=r,this._context=new C_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Fp("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Fp("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(f.s_b),f.Y36(f.Rgc))},t.\u0275dir=f.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class C_{constructor(){this.$implicit=null,this.ngIf=null}}function Fp(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let yi=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({}),e})();const Ma="browser";function Wo(t){return"server"===t}let bs=(()=>{var t;class e{}return(t=e).\u0275prov=(0,f.Yz7)({token:t,providedIn:"root",factory:()=>new vi((0,f.LFG)(fe),window)}),e})();class vi{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function Zo(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Wi(this.window.history)||Wi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Wi(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Ua extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gr extends Ua{static makeCurrent(){!function ne(t){te||(te=t)}(new Gr)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function xh(){return Va=Va||document.querySelector("base"),Va?Va.getAttribute("href"):null}();return null==n?null:function Ki(t){Ys=Ys||document.createElement("a"),Ys.setAttribute("href",t);const e=Ys.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Go(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Ys,Va=null,Rh=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();const zu=new f.OlP("EventManagerPlugins");let As=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(l=>l.supports(r)),!i)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(zu),f.LFG(f.R0b))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();class Nh{constructor(e){this._doc=e}}const qu="ng-app-id";let xl=(()=>{var t;class e{constructor(r,i,o,l={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wo(l),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${qu}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){const o=this.styleRef;if(o.has(r)){const l=o.get(r);return l.usage+=i,l.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const o=this.styleNodesInDOM,l=o?.get(i);if(l?.parentNode===r)return o.delete(i),l.removeAttribute(qu),l;{const h=this.doc.createElement("style");return this.nonce&&h.setAttribute("nonce",this.nonce),h.textContent=i,this.platformIsServer&&h.setAttribute(qu,this.appId),h}}addStyleToHost(r,i){const o=this.getStyleElement(r,i);r.appendChild(o);const l=this.styleRef,h=l.get(i)?.elements;h?h.push(o):l.set(i,{elements:[o],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(fe),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();const Wu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_o=/%COMP%/g,Zp=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ku(t,e){return e.map(n=>n.replace(_o,t))}let cs=(()=>{var t;class e{constructor(r,i,o,l,h,_,w,D=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=l,this.doc=h,this.platformId=_,this.ngZone=w,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=Wo(_),this.defaultRenderer=new Ba(r,h,w,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===f.ifc.ShadowDom&&(i={...i,encapsulation:f.ifc.Emulated});const o=this.getOrCreateRenderer(r,i);return o instanceof Kt?o.applyToHost(r):o instanceof Re&&o.applyStyles(),o}getOrCreateRenderer(r,i){const o=this.rendererByCompId;let l=o.get(i.id);if(!l){const h=this.doc,_=this.ngZone,w=this.eventManager,D=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,k=this.platformIsServer;switch(i.encapsulation){case f.ifc.Emulated:l=new Kt(w,D,i,this.appId,S,h,_,k);break;case f.ifc.ShadowDom:return new Yp(w,D,r,i,h,_,this.nonce,k);default:l=new Re(w,D,i,S,h,_,k)}o.set(i.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(As),f.LFG(xl),f.LFG(f.AFp),f.LFG(Zp),f.LFG(fe),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();class Ba{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Wu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Qu(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Qu(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new f.vHH(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Wu[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Wu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(n,r,i&f.JOm.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&f.JOm.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=U().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Qu(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Yp extends Ba{constructor(e,n,r,i,o,l,h,_){super(e,o,l,_),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const w=Ku(i.id,i.styles);for(const D of w){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=D,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Re extends Ba{constructor(e,n,r,i,o,l,h,_){super(e,o,l,h),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=_?Ku(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Kt extends Re{constructor(e,n,r,i,o,l,h,_){const w=i+"-"+r.id;super(e,n,r,o,l,h,_,w),this.contentAttr=function kh(t){return"_ngcontent-%COMP%".replace(_o,t)}(w),this.hostAttr=function Kp(t){return"_nghost-%COMP%".replace(_o,t)}(w)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Qp=(()=>{var t;class e extends Nh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(fe))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();const vo=["alt","control","meta","shift"],zr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wo={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Rl=(()=>{var t;class e extends Nh{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,o){const l=e.parseEventName(i),h=e.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(r,l.domEventName,h))}static parseEventName(r){const i=r.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const l=e._normalizeKey(i.pop());let h="",_=i.indexOf("code");if(_>-1&&(i.splice(_,1),h="code."),vo.forEach(D=>{const S=i.indexOf(D);S>-1&&(i.splice(S,1),h+=D+".")}),h+=l,0!=i.length||0===l.length)return null;const w={};return w.domEventName=o,w.fullKey=h,w}static matchEventFullKeyCode(r,i){let o=zr[r.key]||r.key,l="";return i.indexOf("code.")>-1&&(o=r.code,l="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),vo.forEach(h=>{h!==o&&(0,wo[h])(r)&&(l+=h+".")}),l+=o,l===i)}static eventCallback(r,i,o){return l=>{e.matchEventFullKeyCode(l,r)&&o.runGuarded(()=>i(l))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(fe))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();const Ol=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Ma},{provide:f.g9A,useValue:function A_(){Gr.makeCurrent()},multi:!0},{provide:fe,useFactory:function ri(){return(0,f.RDi)(document),document},deps:[]}]),Ln=new f.OlP(""),us=[{provide:f.rWj,useClass:class S_{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new f.vHH(5103,!1);return o},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const h=function(_){l=l||_,o--,0==o&&r(l)};i.forEach(_=>{_.whenStable(h)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?U().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],qr=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Nl(){return new f.qLn},deps:[]},{provide:zu,useClass:Qp,multi:!0,deps:[fe,f.R0b,f.Lbi]},{provide:zu,useClass:Rl,multi:!0,deps:[fe]},cs,xl,As,{provide:f.FYo,useExisting:cs},{provide:class Mr{},useClass:Rh,deps:[]},[]];let Rc=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:f.AFp,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(Ln,12))},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[...qr,...us],imports:[yi,f.hGG]}),e})(),kc=(()=>{var t;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(fe))},t.\u0275prov=f.Yz7({token:t,factory:function(r){let i=null;return i=r?new r:function Ju(){return new kc((0,f.LFG)(fe))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;var Fl=F(3182);const Jo_firebaseConfig={apiKey:"AIzaSyAHv1O3IHOckYVk4ye3djNt2v4TS3_6l3k",authDomain:"social-media-32cff.firebaseapp.com",projectId:"social-media-32cff",storageBucket:"social-media-32cff.appspot.com",messagingSenderId:"112571007352",appId:"1:112571007352:web:a1e7e45db308ff725a888d",measurementId:"G-XZ639FYW6N"};var Qi=F(5592),Ii=F(4674),dn=F(2459),dt=F(2096),Wr=F(5619);const{isArray:Ll}=Array,{getPrototypeOf:id,prototype:sd,keys:Vh}=Object;function ea(t){if(1===t.length){const e=t[0];if(Ll(e))return{args:e,keys:null};if(function Io(t){return t&&"object"==typeof t&&id(t)===sd}(e)){const n=Vh(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}var dr=F(2737),mt=F(7398);const{isArray:Hc}=Array;function Co(t){return(0,mt.U)(e=>function Ha(t,e){return Hc(e)?t(...e):t(e)}(t,e))}var ta=F(4564);function Xi(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}var sr=F(8251),Bh=F(7103);function Ui(...t){const e=(0,ta.yG)(t),n=(0,ta.jO)(t),{args:r,keys:i}=ea(t);if(0===r.length)return(0,dn.D)([],e);const o=new Qi.y(function od(t,e,n=dr.y){return r=>{Ul(e,()=>{const{length:i}=t,o=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)Ul(e,()=>{const w=(0,dn.D)(t[_],e);let D=!1;w.subscribe((0,sr.x)(r,S=>{o[_]=S,D||(D=!0,h--),h||r.next(n(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Xi(i,l):dr.y));return n?o.pipe(Co(n)):o}function Ul(t,e,n){t?(0,Bh.f)(n,t,e):e()}const na=(0,F(2306).d)(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});var Qs=F(7537);function ad(...t){return function $a(){return(0,Qs.J)(1)}()((0,dn.D)(t,(0,ta.yG)(t)))}var bo=F(4829);function Vl(t){return new Qi.y(e=>{(0,bo.Xf)(t()).subscribe(e)})}var cd=F(8407);function Do(t,e){const n=(0,Ii.m)(t)?t:()=>t,r=i=>i.error(n());return new Qi.y(e?i=>e.schedule(r,0,i):r)}var ra=F(6232),ia=F(7394),Hn=F(9360);function Gc(){return(0,Hn.e)((t,e)=>{let n=null;t._refCount++;const r=(0,sr.x)(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class Bl extends Qi.y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ia.w0;const n=this.getSubject();e.add(this.source.subscribe((0,sr.x)(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ia.w0.EMPTY)}return e}refCount(){return Gc()(this)}}var Xs=F(8645),En=F(4664);function sa(t){return t<=0?()=>ra.E:(0,Hn.e)((e,n)=>{let r=0;e.subscribe((0,sr.x)(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ga(...t){const e=(0,ta.yG)(t);return(0,Hn.e)((n,r)=>{(e?ad(t,n,e):ad(t,n)).subscribe(r)})}function Rr(t,e){return(0,Hn.e)((n,r)=>{let i=0;n.subscribe((0,sr.x)(r,o=>t.call(e,o,i++)&&r.next(o)))})}var ii=F(1631);function jl(t){return(0,Hn.e)((e,n)=>{let r=!1;e.subscribe((0,sr.x)(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function za(t=qa){return(0,Hn.e)((e,n)=>{let r=!1;e.subscribe((0,sr.x)(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function qa(){return new na}function Zr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rr((i,o)=>t(i,o,r)):dr.y,sa(1),n?jl(e):za(()=>new na))}function Ci(t,e){return(0,Ii.m)(e)?(0,ii.z)(t,e,1):(0,ii.z)(t,1)}var Kn=F(9397);function Vi(t){return(0,Hn.e)((e,n)=>{let o,r=null,i=!1;r=e.subscribe((0,sr.x)(n,void 0,void 0,l=>{o=(0,bo.Xf)(t(l,Vi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function oa(t,e){return(0,Hn.e)(function xs(t,e,n,r,i){return(o,l)=>{let h=n,_=e,w=0;o.subscribe((0,sr.x)(l,D=>{const S=w++;_=h?t(_,D,S):(h=!0,D),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}(t,e,arguments.length>=2,!0))}function Wa(t){return t<=0?()=>ra.E:(0,Hn.e)((e,n)=>{let r=[];e.subscribe((0,sr.x)(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function zc(t){return(0,Hn.e)((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Bt="primary",qc=Symbol("RouteTitle");class cw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ds(t){return new cw(t)}function tg(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],h=t[o];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function mn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!jh(t[i],e[i]))return!1;return!0}function jh(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function aa(t){return t.length>0?t[t.length-1]:null}function bi(t){return function jc(t){return!!t&&(t instanceof Qi.y||(0,Ii.m)(t.lift)&&(0,Ii.m)(t.subscribe))}(t)?t:(0,f.QGY)(t)?(0,dn.D)(Promise.resolve(t)):(0,dt.of)(t)}const si={exact:function ca(t,e,n){if(!Q(t.segments,e.segments)||!C(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!ca(t.children[r],e.children[r],n))return!1;return!0},subset:rg},Ji={exact:function hd(t,e){return mn(t,e)},subset:function ng(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jh(t[n],e[n]))},ignored:()=>!0};function dd(t,e,n){return si[n.paths](t.root,e.root,n.matrixParams)&&Ji[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function rg(t,e,n){return ig(t,e,e.segments,n)}function ig(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Q(i,n)||e.hasChildren()||!C(i,n,r))}if(t.segments.length===n.length){if(!Q(t.segments,n)||!C(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!rg(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Q(t.segments,i)&&C(t.segments,i,r)&&t.children[Bt])&&ig(t.children[Bt],e,o,r)}}function C(t,e,n){return e.every((r,i)=>Ji[n](t[i].parameters,r.parameters))}class T{constructor(e=new R([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ds(this.queryParams)),this._queryParamMap}toString(){return ut.serialize(this)}}class R{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return St(this)}}class L{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ds(this.parameters)),this._parameterMap}toString(){return Ns(this)}}function Q(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let qe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return new ze},providedIn:"root"}),e})();class ze{parse(e){const n=new O_(e);return new T(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${At(e.root,!0)}`,r=function pd(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Sn(n)}=${Sn(i)}`).join("&"):`${Sn(n)}=${Sn(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Za(t){return encodeURI(t)}(e.fragment)}`:""}`}}const ut=new ze;function St(t){return t.segments.map(e=>Ns(e)).join("/")}function At(t,e){if(!t.hasChildren())return St(t);if(e){const n=t.children[Bt]?At(t.children[Bt],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Bt&&r.push(`${i}:${At(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function ye(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Bt&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Bt&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Bt?[At(t.children[Bt],!1)]:[`${i}:${At(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Bt]?`${St(t)}/${n[0]}`:`${St(t)}/(${n.join("//")})`}}function oi(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sn(t){return oi(t).replace(/%3B/gi,";")}function So(t){return oi(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rs(t){return decodeURIComponent(t)}function ai(t){return Rs(t.replace(/\+/g,"%20"))}function Ns(t){return`${So(t.path)}${function fd(t){return Object.keys(t).map(e=>`;${So(e)}=${So(t[e])}`).join("")}(t.parameters)}`}const Hh=/^[^\/()?;#]+/;function sg(t){const e=t.match(Hh);return e?e[0]:""}const og=/^[^\/()?;=#]+/,la=/^[^=?&#]+/,N_=/^[^&#]+/;class O_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new R([],{}):new R([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Bt]=new R(e,n)),r}parseSegment(){const e=sg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new L(Rs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function R_(t){const e=t.match(og);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=sg(this.remaining);i&&(r=i,this.capture(r))}e[Rs(n)]=Rs(r)}parseQueryParam(e){const n=function Hl(t){const e=t.match(la);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const l=function vC(t){const e=t.match(N_);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ai(n),o=ai(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sg(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Bt);const l=this.parseChildren();n[o]=1===Object.keys(l).length?l[Bt]:new R([],l),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function k_(t){return t.segments.length>0?new R([],{[Bt]:t}):t}function lw(t){const e={};for(const r of Object.keys(t.children)){const o=lw(t.children[r]);if(r===Bt&&0===o.segments.length&&o.hasChildren())for(const[l,h]of Object.entries(o.children))e[l]=h;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function uw(t){if(1===t.numberOfChildren&&t.children[Bt]){const e=t.children[Bt];return new R(t.segments.concat(e.segments),e.children)}return t}(new R(t.segments,e))}function Ka(t){return t instanceof T}function $h(t){let e;const i=k_(function n(o){const l={};for(const _ of o.children){const w=n(_);l[_.outlet]=w}const h=new R(o.url,l);return o===t&&(e=h),h}(t.root));return e??i}function ua(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return zh(i,i,i,n,r);const o=function hw(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new cg(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([_,w])=>{h[_]="string"==typeof w?w.split("/"):w}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?n=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new cg(n,e,r)}(e);if(o.toRoot())return zh(i,i,new R([],{}),n,r);const l=function gd(t,e,n){if(t.isAbsolute)return new qh(e,!0,0);if(!n)return new qh(e,!1,NaN);if(null===n.parent)return new qh(n,!0,0);const r=Gh(t.commands[0])?0:1;return function wC(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new qh(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),h=l.processChildren?Wh(l.segmentGroup,l.index,o.commands):Gl(l.segmentGroup,l.index,o.commands);return zh(i,l.segmentGroup,h,n,r)}function Gh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function $l(t){return"object"==typeof t&&null!=t&&t.outlets}function zh(t,e,n,r,i){let l,o={};r&&Object.entries(r).forEach(([_,w])=>{o[_]=Array.isArray(w)?w.map(D=>`${D}`):`${w}`}),l=t===e?n:ag(t,e,n);const h=k_(lw(l));return new T(h,o,i)}function ag(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:ag(o,e,n)}),new R(t.segments,r)}class cg{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Gh(r[0]))throw new f.vHH(4003,!1);const i=r.find($l);if(i&&i!==aa(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qh{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Gl(t,e,n){if(t||(t=new R([],{})),0===t.segments.length&&t.hasChildren())return Wh(t,e,n);const r=function IC(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const l=t.segments[i],h=n[r];if($l(h))break;const _=`${h}`,w=r<n.length-1?n[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!lg(_,w,l))return o;r+=2}else{if(!lg(_,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new R(t.segments.slice(0,r.pathIndex),{});return o.children[Bt]=new R(t.segments.slice(r.pathIndex),t.children),Wh(o,0,i)}return r.match&&0===i.length?new R(t.segments,{}):r.match&&!t.hasChildren()?P_(t,e,n):r.match?Wh(t,0,i):P_(t,e,n)}function Wh(t,e,n){if(0===n.length)return new R(t.segments,{});{const r=function EC(t){return $l(t[0])?t[0].outlets:{[Bt]:t}}(n),i={};if(!r[Bt]&&t.children[Bt]&&1===t.numberOfChildren&&0===t.children[Bt].segments.length){const o=Wh(t.children[Bt],e,n);return new R(t.segments,o.children)}return Object.entries(r).forEach(([o,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[o]=Gl(t.children[o],e,l))}),Object.entries(t.children).forEach(([o,l])=>{void 0===r[o]&&(i[o]=l)}),new R(t.segments,i)}}function P_(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if($l(o)){const _=CC(o.outlets);return new R(r,_)}if(0===i&&Gh(n[0])){r.push(new L(t.segments[e].path,fw(n[0]))),i++;continue}const l=$l(o)?o.outlets[Bt]:`${o}`,h=i<n.length-1?n[i+1]:null;l&&h&&Gh(h)?(r.push(new L(l,fw(h))),i+=2):(r.push(new L(l,{})),i++)}return new R(r,{})}function CC(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=P_(new R([],{}),0,r))}),e}function fw(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function lg(t,e,n){return t==n.path&&mn(e,n.parameters)}const Ao="imperative";class hs{constructor(e,n){this.id=e,this.url=n}}class Zh extends hs{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mo extends hs{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wc extends hs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xo extends hs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class Kh extends hs{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class md extends hs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yh extends hs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qh extends hs{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xh extends hs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F_ extends hs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pw{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class L_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ug{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _d{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mw{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dg{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class yw{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yd,this.attachRef=null}}let yd=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new yw,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class Bi{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=zl(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=zl(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=ql(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ql(e,this._root).map(n=>n.value)}}function zl(t,e){if(t===e.value)return e;for(const n of e.children){const r=zl(t,n);if(r)return r}return null}function ql(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ql(t,n);if(r.length)return r.unshift(e),r}return[]}class fs{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function or(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Wl extends Bi{constructor(e,n){super(e),this.snapshot=n,Zl(this,e)}toString(){return this.snapshot.toString()}}function vd(t,e){const n=function U_(t,e){const l=new wd([],{},{},"",{},Bt,e,null,{});return new Jh("",new fs(l,[]))}(0,e),r=new Wr.X([new L("",{})]),i=new Wr.X({}),o=new Wr.X({}),l=new Wr.X({}),h=new Wr.X(""),_=new Kr(r,i,l,h,o,Bt,e,n.root);return _.snapshot=n.root,new Wl(new fs(_,[]),n)}class Kr{constructor(e,n,r,i,o,l,h,_){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,mt.U)(w=>w[qc]))??(0,dt.of)(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>ds(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>ds(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zc(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function V_(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class wd{get title(){return this.data?.[qc]}constructor(e,n,r,i,o,l,h,_,w){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.routeConfig=_,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ds(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ds(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jh extends Bi{constructor(e,n){super(n),this.url=e,Zl(this,n)}toString(){return B_(this._root)}}function Zl(t,e){e.value._routerState=t,e.children.forEach(n=>Zl(t,n))}function B_(t){const e=t.children.length>0?` { ${t.children.map(B_).join(", ")} } `:"";return`${t.value}${e}`}function ef(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,mn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),mn(e.params,n.params)||t.paramsSubject.next(n.params),function To(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!mn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),mn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ed(t,e){const n=mn(t.params,e.params)&&function q(t,e){return Q(t,e)&&t.every((n,r)=>mn(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Ed(t.parent,e.parent))}let Os=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Bt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(yd),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(Ya,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=r;const o=this.location,h=r.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,w=new j_(r,_,o.injector);this.activated=o.createComponent(h,{index:o.length,injector:w,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=f.lG2({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),e})();class j_{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Kr?this.route:e===yd?this.childContexts:this.parent.get(e,n)}}const Ya=new f.OlP("");let H_=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,o=Ui([i.queryParams,i.params,i.data]).pipe((0,En.w)(([l,h,_],w)=>(_={...l,...h,..._},0===w?(0,dt.of)(_):Promise.resolve(_)))).subscribe(l=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const h=(0,f.qFp)(i.component);if(h)for(const{templateName:_}of h.inputs)r.activatedComponentRef.setInput(_,l[_]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,o)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();function Kc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function ji(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Kc(t,r,i);return Kc(t,r)})}(t,e,n);return new fs(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Kc(t,h)),l}}const r=function tf(t){return new Kr(new Wr.X(t.url),new Wr.X(t.params),new Wr.X(t.queryParams),new Wr.X(t.fragment),new Wr.X(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Kc(t,o));return new fs(r,i)}}const Ro="ngNavigationCancelingError";function Id(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ka(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Js(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Js(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[Ro]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Qa(t){return Kl(t)&&Ka(t.url)}function Kl(t){return t&&t[Ro]}let hg=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(r,i){1&r&&f._UZ(0,"router-outlet")},dependencies:[Os],encapsulation:2}),e})();function E(t){const e=t.children&&t.children.map(E),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Bt&&(n.component=hg),n}function M(t){return t.outlet||Bt}function G(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Ge{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ef(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=or(n);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,n,l.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=or(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=or(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=or(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new mw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ug(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(ef(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,l.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),ef(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=G(i.snapshot);l.attachRef=null,l.route=i,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class it{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class st{constructor(e,n){this.component=e,this.route=n}}function On(t,e,n){const r=t._root;return Yc(r,e?e._root:null,n,[r.value])}function No(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||(0,f.Z0I)(t)?e.get(t):t:r}function Yc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=or(e);return t.children.forEach(l=>{(function nf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,l=e?e.value:null,h=n?n.getContext(t.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const _=function rf(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Q(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Q(t.url,e.url)||!mn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ed(t,e)||!mn(t.queryParams,e.queryParams);default:return!Ed(t,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new it(r)):(o.data=l.data,o._resolvedData=l._resolvedData),Yc(t,e,o.component?h?h.children:null:n,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new st(h.outlet.component,l))}else l&&Qc(e,h,i),i.canActivateChecks.push(new it(r)),Yc(t,null,o.component?h?h.children:null:n,r,i)})(l,o[l.value.outlet],n,r.concat([l.value]),i),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>Qc(h,n.getContext(l),i)),i}function Qc(t,e,n){const r=or(t),i=t.value;Object.entries(r).forEach(([o,l])=>{Qc(l,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new st(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Oo(t){return"function"==typeof t}function Ew(t){return t instanceof na||"EmptyError"===t?.name}const q_=Symbol("INITIAL_VALUE");function af(){return(0,En.w)(t=>Ui(t.map(e=>e.pipe(sa(1),Ga(q_)))).pipe((0,mt.U)(e=>{for(const n of e)if(!0!==n){if(n===q_)return q_;if(!1===n||n instanceof T)return n}return!0}),Rr(e=>e!==q_),sa(1)))}function MC(t){return(0,cd.z)((0,Kn.b)(e=>{if(Ka(e))throw Id(0,e)}),(0,mt.U)(e=>!0===e))}class Z_{constructor(e){this.segmentGroup=e||null}}class lf{constructor(e){this.urlTree=e}}function Xc(t){return Do(new Z_(t))}function K_(t){return Do(new lf(t))}class NC{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new f.vHH(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,dt.of)(r);if(i.numberOfChildren>1||!i.children[Bt])return Do(new f.vHH(4e3,!1));i=i.children[Bt]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new T(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);r[i]=n[h]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let l={};return Object.entries(n.children).forEach(([h,_])=>{l[h]=this.createSegmentGroup(e,_,r,i)}),new R(o,l)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new f.vHH(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const Jc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WA(t,e,n,r,i){const o=bw(t,e,n);return o.matched?(r=function ww(t,e){return t.providers&&!t._injector&&(t._injector=(0,f.MMx)(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Cw(t,e,n,r){const i=e.canMatch;if(!i||0===i.length)return(0,dt.of)(!0);const o=i.map(l=>{const h=No(l,t);return bi(function Dd(t){return t&&Oo(t.canMatch)}(h)?h.canMatch(e,n):t.runInContext(()=>h(e,n)))});return(0,dt.of)(o).pipe(af(),MC())}(r,e,n).pipe((0,mt.U)(l=>!0===l?o:{...Jc}))):(0,dt.of)(o)}function bw(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Jc}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tg)(n,t,e);if(!i)return{...Jc};const o={};Object.entries(i.posParams??{}).forEach(([h,_])=>{o[h]=_.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function OC(t,e,n,r){return n.length>0&&function el(t,e,n){return n.some(r=>Y_(t,e,r)&&M(r)!==Bt)}(t,n,r)?{segmentGroup:new R(e,KA(r,new R(n,t.children))),slicedSegments:[]}:0===n.length&&function uf(t,e,n){return n.some(r=>Y_(t,e,r))}(t,n,r)?{segmentGroup:new R(t.segments,ZA(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new R(t.segments,t.children),slicedSegments:n}}function ZA(t,e,n,r,i){const o={};for(const l of r)if(Y_(t,n,l)&&!i[M(l)]){const h=new R([],{});o[M(l)]=h}return{...i,...o}}function KA(t,e){const n={};n[Bt]=e;for(const r of t)if(""===r.path&&M(r)!==Bt){const i=new R([],{});n[M(r)]=i}return n}function Y_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class JA{constructor(e,n,r,i,o,l,h){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new NC(this.urlSerializer,this.urlTree)}noMatchError(e){return new f.vHH(4002,!1)}recognize(){const e=OC(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Bt).pipe(Vi(n=>{if(n instanceof lf)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Z_?this.noMatchError(n):n}),(0,mt.U)(n=>{const r=new wd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bt,this.rootComponentType,null,{}),i=new fs(r,n),o=new Jh("",i),l=function dw(t,e,n=null,r=null){return ua($h(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(o._root),{state:o,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Bt).pipe(Vi(r=>{throw r instanceof Z_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=Zc(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,dn.D)(i).pipe(Ci(o=>{const l=r.children[o],h=function N(t,e){const n=t.filter(r=>M(r)===e);return n.push(...t.filter(r=>M(r)!==e)),n}(n,o);return this.processSegmentGroup(e,h,l,o)}),oa((o,l)=>(o.push(...l),o)),jl(null),function ld(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rr((i,o)=>t(i,o,r)):dr.y,Wa(1),n?jl(e):za(()=>new na))}(),(0,ii.z)(o=>{if(null===o)return Xc(r);const l=PC(o);return function eM(t){t.sort((e,n)=>e.value.outlet===Bt?-1:n.value.outlet===Bt?1:e.value.outlet.localeCompare(n.value.outlet))}(l),(0,dt.of)(l)}))}processSegment(e,n,r,i,o,l){return(0,dn.D)(n).pipe(Ci(h=>this.processSegmentAgainstRoute(h._injector??e,n,h,r,i,o,l).pipe(Vi(_=>{if(_ instanceof Z_)return(0,dt.of)(null);throw _}))),Zr(h=>!!h),Vi(h=>{if(Ew(h))return function QA(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?(0,dt.of)([]):Xc(r);throw h}))}processSegmentAgainstRoute(e,n,r,i,o,l,h){return function YA(t,e,n,r){return!!(M(t)===r||r!==Bt&&Y_(e,n,t))&&("**"===t.path||bw(e,t,n).matched)}(r,i,o,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,l):Xc(i):Xc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?K_(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,ii.z)(l=>{const h=new R(l,{});return this.processSegment(e,n,h,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=bw(n,i,o);if(!h)return Xc(n);const S=this.applyRedirects.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?K_(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,ii.z)(k=>this.processSegment(e,r,n,k.concat(w),l,!1)))}matchSegmentAgainstRoute(e,n,r,i,o,l){let h;if("**"===r.path){const _=i.length>0?aa(i).parameters:{},w=new wd(i,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,FC(r),M(r),r.component??r._loadedComponent??null,r,LC(r));h=(0,dt.of)({snapshot:w,consumedSegments:[],remainingSegments:[]}),n.children={}}else h=WA(n,r,i,e).pipe((0,mt.U)(({matched:_,consumedSegments:w,remainingSegments:D,parameters:S})=>_?{snapshot:new wd(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,FC(r),M(r),r.component??r._loadedComponent??null,r,LC(r)),consumedSegments:w,remainingSegments:D}:null));return h.pipe((0,En.w)(_=>null===_?Xc(n):this.getChildConfig(e=r._injector??e,r,i).pipe((0,En.w)(({routes:w})=>{const D=r._loadedInjector??e,{snapshot:S,consumedSegments:k,remainingSegments:B}=_,{segmentGroup:W,slicedSegments:le}=OC(n,k,B,w);if(0===le.length&&W.hasChildren())return this.processChildren(D,w,W).pipe((0,mt.U)($e=>null===$e?null:[new fs(S,$e)]));if(0===w.length&&0===le.length)return(0,dt.of)([new fs(S,[])]);const pe=M(r)===o;return this.processSegment(D,w,W,le,pe?Bt:o,!0).pipe((0,mt.U)($e=>[new fs(S,$e)]))}))))}getChildConfig(e,n,r){return n.children?(0,dt.of)({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?(0,dt.of)({routes:n._loadedRoutes,injector:n._loadedInjector}):function CP(t,e,n,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,dt.of)(!0);const o=i.map(l=>{const h=No(l,t);return bi(function fg(t){return t&&Oo(t.canLoad)}(h)?h.canLoad(e,n):t.runInContext(()=>h(e,n)))});return(0,dt.of)(o).pipe(af(),MC())}(e,n,r).pipe((0,ii.z)(i=>i?this.configLoader.loadChildren(e,n).pipe((0,Kn.b)(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function RC(t){return Do(Js(!1,3))}())):(0,dt.of)({routes:[],injector:e})}}function kC(t){const e=t.value.routeConfig;return e&&""===e.path}function PC(t){const e=[],n=new Set;for(const r of t){if(!kC(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=PC(r.children);e.push(new fs(r.value,i))}return e.filter(r=>!n.has(r))}function FC(t){return t.data||{}}function LC(t){return t.resolve||{}}function tM(t){return"string"==typeof t.title||null===t.title}function jC(t){return(0,En.w)(e=>{const n=t(e);return n?(0,dn.D)(n).pipe((0,mt.U)(()=>e)):(0,dt.of)(e)})}const gg=new f.OlP("ROUTES");let mg=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,dt.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=bi(r.loadComponent()).pipe((0,mt.U)(nM),(0,Kn.b)(l=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=l}),zc(()=>{this.componentLoaders.delete(r)})),o=new Bl(i,()=>new Xs.x).pipe(Gc());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,dt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const l=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,mt.U)(_=>{this.onLoadEndListener&&this.onLoadEndListener(i);let w,D;return Array.isArray(_)?D=_:(w=_.create(r).injector,D=w.get(gg,[],f.XFs.Self|f.XFs.Optional).flat()),{routes:D.map(E),injector:w}}),zc(()=>{this.childrenLoaders.delete(i)})),h=new Bl(l,()=>new Xs.x).pipe(Gc());return this.childrenLoaders.set(i,h),h}loadModuleFactoryOrRoutes(r){return bi(r()).pipe((0,mt.U)(nM),(0,ii.z)(i=>i instanceof f.YKP||Array.isArray(i)?(0,dt.of)(i):(0,dn.D)(this.compiler.compileModuleAsync(i))))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function nM(t){return function Dw(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Tw=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Xs.x,this.configLoader=(0,f.f3M)(mg),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(qe),this.rootContexts=(0,f.f3M)(yd),this.inputBindingEnabled=null!==(0,f.f3M)(Ya,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,dt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new gw(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new pw(o))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r){return this.transitions=new Wr.X({id:0,currentUrlTree:r.currentUrlTree,currentRawUrl:r.currentUrlTree,extractedUrl:r.urlHandlingStrategy.extract(r.currentUrlTree),urlAfterRedirects:r.urlHandlingStrategy.extract(r.currentUrlTree),rawUrl:r.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ao,restoredState:null,currentSnapshot:r.routerState.snapshot,targetSnapshot:null,currentRouterState:r.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rr(i=>0!==i.id),(0,mt.U)(i=>({...i,extractedUrl:r.urlHandlingStrategy.extract(i.rawUrl)})),(0,En.w)(i=>{let o=!1,l=!1;return(0,dt.of)(i).pipe((0,Kn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,En.w)(h=>{const _=r.browserUrlTree.toString(),w=!r.navigated||h.extractedUrl.toString()!==_||_!==r.currentUrlTree.toString();if(!w&&"reload"!==(h.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const S="";return this.events.next(new xo(h.id,r.serializeUrl(i.rawUrl),S,0)),r.rawUrlTree=h.rawUrl,h.resolve(null),ra.E}if(r.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Sw(h.source)&&(r.browserUrlTree=h.extractedUrl),(0,dt.of)(h).pipe((0,En.w)(S=>{const k=this.transitions?.getValue();return this.events.next(new Zh(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions?.getValue()?ra.E:Promise.resolve(S)}),function Q_(t,e,n,r,i,o){return(0,ii.z)(l=>function XA(t,e,n,r,i,o,l="emptyOnly"){return new JA(t,e,n,r,i,l,o).recognize()}(t,e,n,r,l.extractedUrl,i,o).pipe((0,mt.U)(({state:h,tree:_})=>({...l,targetSnapshot:h,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,Kn.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,i.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},"eager"===r.urlUpdateStrategy){if(!S.extras.skipLocationChange){const B=r.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);r.setBrowserUrl(B,S)}r.browserUrlTree=S.urlAfterRedirects}const k=new md(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(k)}));if(w&&r.urlHandlingStrategy.shouldProcessUrl(r.rawUrlTree)){const{id:S,extractedUrl:k,source:B,restoredState:W,extras:le}=h,pe=new Zh(S,this.urlSerializer.serialize(k),B,W);this.events.next(pe);const $e=vd(0,this.rootComponentType).snapshot;return i={...h,targetSnapshot:$e,urlAfterRedirects:k,extras:{...le,skipLocationChange:!1,replaceUrl:!1}},(0,dt.of)(i)}{const S="";return this.events.next(new xo(h.id,r.serializeUrl(i.extractedUrl),S,1)),r.rawUrlTree=h.rawUrl,h.resolve(null),ra.E}}),(0,Kn.b)(h=>{const _=new Yh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),(0,mt.U)(h=>i={...h,guards:On(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function GA(t,e){return(0,ii.z)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=n;return 0===l.length&&0===o.length?(0,dt.of)({...n,guardsResult:!0}):function SC(t,e,n,r){return(0,dn.D)(t).pipe((0,ii.z)(i=>function qA(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,dt.of)(!0);const l=o.map(h=>{const _=G(e)??i,w=No(h,_);return bi(function z_(t){return t&&Oo(t.canDeactivate)}(w)?w.canDeactivate(t,e,n,r):_.runInContext(()=>w(t,e,n,r))).pipe(Zr())});return(0,dt.of)(l).pipe(af())}(i.component,i.route,n,e,r)),Zr(i=>!0!==i,!0))}(l,r,i,t).pipe((0,ii.z)(h=>h&&function Yl(t){return"boolean"==typeof t}(h)?function AC(t,e,n,r){return(0,dn.D)(e).pipe(Ci(i=>ad(function Iw(t,e){return null!==t&&e&&e(new L_(t)),(0,dt.of)(!0)}(i.route.parent,r),function W_(t,e){return null!==t&&e&&e(new _d(t)),(0,dt.of)(!0)}(i.route,r),function zA(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function eo(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Vl(()=>{const h=l.guards.map(_=>{const w=G(l.node)??n,D=No(_,w);return bi(function bd(t){return t&&Oo(t.canActivateChild)}(D)?D.canActivateChild(r,t):w.runInContext(()=>D(r,t))).pipe(Zr())});return(0,dt.of)(h).pipe(af())}));return(0,dt.of)(o).pipe(af())}(t,i.path,n),function cf(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,dt.of)(!0);const i=r.map(o=>Vl(()=>{const l=G(e)??n,h=No(o,l);return bi(function Cd(t){return t&&Oo(t.canActivate)}(h)?h.canActivate(e,t):l.runInContext(()=>h(e,t))).pipe(Zr())}));return(0,dt.of)(i).pipe(af())}(t,i.route,n))),Zr(i=>!0!==i,!0))}(r,o,t,e):(0,dt.of)(h)),(0,mt.U)(h=>({...n,guardsResult:h})))})}(this.environmentInjector,h=>this.events.next(h)),(0,Kn.b)(h=>{if(i.guardsResult=h.guardsResult,Ka(h.guardsResult))throw Id(0,h.guardsResult);const _=new Qh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(_)}),Rr(h=>!!h.guardsResult||(r.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),jC(h=>{if(h.guards.canActivateChecks.length)return(0,dt.of)(h).pipe((0,Kn.b)(_=>{const w=new Xh(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}),(0,En.w)(_=>{let w=!1;return(0,dt.of)(_).pipe(function tl(t,e){return(0,ii.z)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return(0,dt.of)(n);let o=0;return(0,dn.D)(i).pipe(Ci(l=>function pg(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!tM(i)&&(o[qc]=i.title),function UC(t,e,n,r){const i=function VC(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return(0,dt.of)({});const o={};return(0,dn.D)(i).pipe((0,ii.z)(l=>function BC(t,e,n,r){const i=G(e)??r,o=No(t,i);return bi(o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n)))}(t[l],e,n,r).pipe(Zr(),(0,Kn.b)(h=>{o[l]=h}))),Wa(1),function ud(t){return(0,mt.U)(()=>t)}(o),Vi(l=>Ew(l)?ra.E:Do(l)))}(o,t,e,r).pipe((0,mt.U)(l=>(t._resolvedData=l,t.data=Zc(t,n).resolve,i&&tM(i)&&(t.data[qc]=i.title),null)))}(l.route,r,t,e)),(0,Kn.b)(()=>o++),Wa(1),(0,ii.z)(l=>o===i.length?(0,dt.of)(n):ra.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,Kn.b)({next:()=>w=!0,complete:()=>{w||(r.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Kn.b)(_=>{const w=new F_(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}))}),jC(h=>{const _=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Kn.b)(S=>{w.component=S}),(0,mt.U)(()=>{})));for(const S of w.children)D.push(..._(S));return D};return Ui(_(h.targetSnapshot.root)).pipe(jl(),sa(1))}),jC(()=>this.afterPreactivation()),(0,mt.U)(h=>{const _=function vw(t,e,n){const r=Kc(t,e._root,n?n._root:void 0);return new Wl(r,e)}(r.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:_}}),(0,Kn.b)(h=>{r.currentUrlTree=h.urlAfterRedirects,r.rawUrlTree=r.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),r.routerState=h.targetRouterState,"deferred"===r.urlUpdateStrategy&&(h.extras.skipLocationChange||r.setBrowserUrl(r.rawUrlTree,h),r.browserUrlTree=h.urlAfterRedirects)}),((t,e,n,r)=>(0,mt.U)(i=>(new Ge(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,r.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),sa(1),(0,Kn.b)({next:h=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,r.navigated=!0,this.events.next(new Mo(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(r.currentUrlTree))),r.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{o=!0}}),zc(()=>{o||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Vi(h=>{if(l=!0,Kl(h)){Qa(h)||(r.navigated=!0,r.restoreHistory(i,!0));const _=new Wc(i.id,this.urlSerializer.serialize(i.extractedUrl),h.message,h.cancellationCode);if(this.events.next(_),Qa(h)){const w=r.urlHandlingStrategy.merge(h.url,r.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===r.urlUpdateStrategy||Sw(i.source)};r.scheduleNavigation(w,Ao,null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{r.restoreHistory(i,!0);const _=new Kh(i.id,this.urlSerializer.serialize(i.extractedUrl),h,i.targetSnapshot??void 0);this.events.next(_);try{i.resolve(r.errorHandler(h))}catch(w){i.reject(w)}}return ra.E}))}))}cancelNavigationTransition(r,i,o){const l=new Wc(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(l),r.resolve(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Sw(t){return t!==Ao}let HC=(()=>{var t;class e{buildTitle(r){let i,o=r.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(l=>l.outlet===Bt);return i}getResolvedTitleForRoute(r){return r.data[qc]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return(0,f.f3M)(rM)},providedIn:"root"}),e})(),rM=(()=>{var t;class e extends HC{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(kc))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),iM=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return(0,f.f3M)($C)},providedIn:"root"}),e})();class sM{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let $C=(()=>{var t;class e extends sM{}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=f.n5z(t)))(i||t)}}(),t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Td=new f.OlP("",{providedIn:"root",factory:()=>({})});let GC=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:function(){return(0,f.f3M)(Aw)},providedIn:"root"}),e})(),Aw=(()=>{var t;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var _g=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(_g||{});function Ql(t,e){t.events.pipe(Rr(n=>n instanceof Mo||n instanceof Wc||n instanceof Kh||n instanceof xo),(0,mt.U)(n=>n instanceof Mo||n instanceof xo?_g.COMPLETE:n instanceof Wc&&(0===n.code||1===n.code)?_g.REDIRECTING:_g.FAILED),Rr(n=>n!==_g.REDIRECTING),sa(1)).subscribe(()=>{e()})}function oM(t){throw t}function aM(t,e,n){return e.parse("/")}const Mw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let es=(()=>{var t;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(Td,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||oM,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||aM,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(GC),this.routeReuseStrategy=(0,f.f3M)(iM),this.titleStrategy=(0,f.f3M)(HC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(gg,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(Tw),this.urlSerializer=(0,f.f3M)(qe),this.location=(0,f.f3M)(Ze),this.componentInputBindingEnabled=!!(0,f.f3M)(Ya,{optional:!0}),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new T,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vd(0,null),this.navigationTransitions.setupNavigations(this).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId??0},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ao,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,o){const l={replaceUrl:!0},h=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const _=this.parseUrl(r);this.scheduleNavigation(_,i,h,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(E),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,i={}){const{relativeTo:o,queryParams:l,fragment:h,queryParamsHandling:_,preserveFragment:w}=i,D=w?this.currentUrlTree.fragment:h;let k,S=null;switch(_){case"merge":S={...this.currentUrlTree.queryParams,...l};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=l||null}null!==S&&(S=this.removeEmptyProps(S));try{k=$h(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),k=this.currentUrlTree.root}return ua(k,r,S,D??null)}navigateByUrl(r,i={skipLocationChange:!1}){const o=Ka(r)?r:this.parseUrl(r),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,Ao,null,i)}navigate(r,i={skipLocationChange:!1}){return function cM(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new f.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return i}isActive(r,i){let o;if(o=!0===i?{...Mw}:!1===i?{...zC}:i,Ka(r))return dd(this.currentUrlTree,r,o);const l=this.parseUrl(r);return dd(this.currentUrlTree,l,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{const l=r[o];return null!=l&&(i[o]=l),i},{})}scheduleNavigation(r,i,o,l,h){if(this.disposed)return Promise.resolve(!1);let _,w,D;h?(_=h.resolve,w=h.reject,D=h.promise):D=new Promise((k,B)=>{_=k,w=B});const S=this.pendingTasks.add();return Ql(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:l,resolve:_,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(k=>Promise.reject(k))}setBrowserUrl(r,i){const o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const h={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",h)}else{const l={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(o,"",l)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-(this.browserPageId??this.currentPageId);0!==l?this.location.historyGo(l):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===l&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),df=(()=>{var t;class e{constructor(r,i,o,l,h,_){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=l,this.el=h,this.locationStrategy=_,this.href=null,this.commands=null,this.onChanges=new Xs.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const w=h.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=r.events.subscribe(D=>{D instanceof Mo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,l,h){return!!(null===this.urlTree||this.isAnchorElement&&(0!==r||i||o||l||h||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const r=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){const o=this.renderer,l=this.el.nativeElement;null!==i?o.setAttribute(l,r,i):o.removeAttribute(l,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(es),f.Y36(Kr),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(He))},t.\u0275dir=f.lG2({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&f.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&f.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",f.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",f.VuI],replaceUrl:["replaceUrl","replaceUrl",f.VuI],routerLink:"routerLink"},standalone:!0,features:[f.Xq5,f.TTD]}),e})();class uM{}let In=(()=>{var t;class e{constructor(r,i,o,l,h){this.router=r,this.injector=o,this.preloadingStrategy=l,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(Rr(r=>r instanceof Mo),Ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const o=[];for(const l of i){l.providers&&!l._injector&&(l._injector=(0,f.MMx)(l.providers,r,`Route: ${l.path}`));const h=l._injector??r,_=l._loadedInjector??h;(l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent)&&o.push(this.preloadConfig(h,l)),(l.children||l._loadedRoutes)&&o.push(this.processRoutes(_,l.children??l._loadedRoutes))}return(0,dn.D)(o).pipe((0,Qs.J)())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):(0,dt.of)(null);const l=o.pipe((0,ii.z)(h=>null===h?(0,dt.of)(void 0):(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,this.processRoutes(h.injector??r,h.routes))));if(i.loadComponent&&!i._loadedComponent){const h=this.loader.loadComponent(i);return(0,dn.D)([l,h]).pipe((0,Qs.J)())}return l})}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(es),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(uM),f.LFG(mg))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Sd=new f.OlP("");let xw=(()=>{var t;class e{constructor(r,i,o,l,h={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=l,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Zh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Mo?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof xo&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof dg&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dg(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(t=e).\u0275fac=function(r){f.$Z()},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();function Xa(t,e){return{\u0275kind:t,\u0275providers:e}}function gM(){const t=(0,f.f3M)(f.zs3);return e=>{const n=t.get(f.z2F);if(e!==n.components[0])return;const r=t.get(es),i=t.get(J_);1===t.get(Nw)&&r.initialNavigation(),t.get(Xl,null,f.XFs.Optional)?.setUpPreloading(),t.get(Sd,null,f.XFs.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const J_=new f.OlP("",{factory:()=>new Xs.x}),Nw=new f.OlP("",{providedIn:"root",factory:()=>1}),Xl=new f.OlP("");function _M(t){return Xa(0,[{provide:Xl,useExisting:In},{provide:uM,useExisting:t}])}const Jl=new f.OlP("ROUTER_FORROOT_GUARD"),Lw=[Ze,{provide:qe,useClass:ze},es,yd,{provide:Kr,useFactory:function Rw(t){return t.routerState.root},deps:[es]},mg,[]];function Uw(){return new f.PXZ("Router",es)}let YC=(()=>{var t;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Lw,[],{provide:gg,multi:!0,useValue:r},{provide:Jl,useFactory:vM,deps:[[es,new f.FiY,new f.tp0]]},{provide:Td,useValue:i||{}},i?.useHash?{provide:He,useClass:Pe}:{provide:He,useClass:Ye},{provide:Sd,useFactory:()=>{const t=(0,f.f3M)(bs),e=(0,f.f3M)(f.R0b),n=(0,f.f3M)(Td),r=(0,f.f3M)(Tw),i=(0,f.f3M)(qe);return n.scrollOffset&&t.setOffset(n.scrollOffset),new xw(i,r,t,e,n)}},i?.preloadingStrategy?_M(i.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:Uw},i?.initialNavigation?wM(i):[],i?.bindToComponentInputs?Xa(8,[H_,{provide:Ya,useExisting:H_}]).\u0275providers:[],[{provide:XC,useFactory:gM},{provide:f.tb,multi:!0,useExisting:XC}]]}}static forChild(r){return{ngModule:e,providers:[{provide:gg,multi:!0,useValue:r}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(Jl,8))},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({}),e})();function vM(t){return"guarded"}function wM(t){return["disabled"===t.initialNavigation?Xa(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(es);return()=>{e.setUpLocationChangeListener()}}},{provide:Nw,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Xa(2,[{provide:Nw,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const n=e.get(Fe,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(es),o=e.get(J_);Ql(i,()=>{r(!0)}),e.get(Tw).afterPreactivation=()=>(r(!0),o.closed?(0,dt.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const XC=new f.OlP("");let CM=(()=>{var t;class e{constructor(){this.contactData={name:"Social Media",email:"socialmedia@example.com",phone:"+1234567890",address:"123 Main Street, City"}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-contact-nav"]],decls:10,vars:4,template:function(r,i){1&r&&(f.TgZ(0,"h2"),f._uU(1,"Contact us for support"),f.qZA(),f.TgZ(2,"p"),f._uU(3),f.qZA(),f.TgZ(4,"p"),f._uU(5),f.qZA(),f.TgZ(6,"p"),f._uU(7),f.qZA(),f.TgZ(8,"p"),f._uU(9),f.qZA()),2&r&&(f.xp6(3),f.hij("Name: ",i.contactData.name,""),f.xp6(2),f.hij("Email: ",i.contactData.email,""),f.xp6(2),f.hij("Phone: ",i.contactData.phone,""),f.xp6(2),f.hij("Address: ",i.contactData.address,""))}}),e})();let bM=(()=>{var t;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(f.Qsj),f.Y36(f.SBq))},t.\u0275dir=f.lG2({type:t}),e})(),ff=(()=>{var t;class e extends bM{}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=f.n5z(t)))(i||t)}}(),t.\u0275dir=f.lG2({type:t,features:[f.qOj]}),e})();const to=new f.OlP("NgValueAccessor"),Bw={provide:to,useExisting:(0,f.Gpc)(()=>nl),multi:!0},jw=new f.OlP("CompositionEventMode");let nl=(()=>{var t;class e extends bM{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pf(){const t=U()?U().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(jw,8))},t.\u0275dir=f.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&f.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[f._Bn([Bw]),f.qOj]}),e})();function ko(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function yg(t){return null!=t&&"number"==typeof t.length}const Yr=new f.OlP("NgValidators"),rl=new f.OlP("NgAsyncValidators"),Hw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ad{static min(e){return function TM(t){return e=>{if(ko(e.value)||ko(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function ty(t){return e=>{if(ko(e.value)||ko(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function ny(t){return ko(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function $w(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function tb(t){return ko(t.value)||Hw.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function nb(t){return e=>ko(e.value)||!yg(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Gw(t){return e=>yg(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function zw(t){if(!t)return ry;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(ko(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Ww(e)}static composeAsync(e){return wg(e)}}function ry(t){return null}function rb(t){return null!=t}function SM(t){return(0,f.QGY)(t)?(0,dn.D)(t):t}function ib(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function iy(t,e){return e.map(n=>n(t))}function sb(t){return t.map(e=>function qw(t){return!t.validate}(e)?e:n=>e.validate(n))}function Ww(t){if(!t)return null;const e=t.filter(rb);return 0==e.length?null:function(n){return ib(iy(n,e))}}function vg(t){return null!=t?Ww(sb(t)):null}function wg(t){if(!t)return null;const e=t.filter(rb);return 0==e.length?null:function(n){return function eb(...t){const e=(0,ta.jO)(t),{args:n,keys:r}=ea(t),i=new Qi.y(o=>{const{length:l}=n;if(!l)return void o.complete();const h=new Array(l);let _=l,w=l;for(let D=0;D<l;D++){let S=!1;(0,bo.Xf)(n[D]).subscribe((0,sr.x)(o,k=>{S||(S=!0,w--),h[D]=k},()=>_--,void 0,()=>{(!_||!S)&&(w||o.next(r?Xi(r,h):h),o.complete())}))}});return e?i.pipe(Co(e)):i}(iy(n,e).map(SM)).pipe((0,mt.U)(ib))}}function Zw(t){return null!=t?wg(sb(t)):null}function Kw(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ob(t){return t._rawValidators}function Yw(t){return t._rawAsyncValidators}function ab(t){return t?Array.isArray(t)?t:[t]:[]}function sy(t,e){return Array.isArray(t)?t.includes(e):t===e}function Eg(t,e){const n=ab(e);return ab(t).forEach(i=>{sy(n,i)||n.push(i)}),n}function cb(t,e){return ab(e).filter(n=>!sy(t,n))}class Md{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Zw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ci extends Md{get formDirective(){return null}get path(){return null}}class eu extends Md{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ig=(()=>{var t;class e extends Qw{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(eu,2))},t.\u0275dir=f.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&f.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[f.qOj]}),e})(),Cg=(()=>{var t;class e extends Qw{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(ci,10))},t.\u0275dir=f.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&f.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[f.qOj]}),e})();const Ja="VALID",Po="INVALID",xd="PENDING",cy="DISABLED";function Jw(t){return(Tg(t)?t.validators:t)||null}function db(t,e){return(Tg(e)?e.asyncValidators:t)||null}function Tg(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function NM(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[n])throw new f.vHH(1001,"")}function eE(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new f.vHH(1002,"")})}class Rd{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ja}get invalid(){return this.status===Po}get pending(){return this.status==xd}get disabled(){return this.status===cy}get enabled(){return this.status!==cy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Eg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Eg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cb(e,this._rawAsyncValidators))}hasValidator(e){return sy(this._rawValidators,e)}hasAsyncValidator(e){return sy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=cy,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ja,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ja||this.status===xd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cy:Ja}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xd,this._hasOwnPendingAsyncValidator=!0;const n=SM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?cy:this.errors?Po:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xd)?xd:this._anyControlsHaveStatus(Po)?Po:Ja}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kP(t){return Array.isArray(t)?vg(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function hb(t){return Array.isArray(t)?Zw(t):t||null}(this._rawAsyncValidators)}}class mf extends Rd{constructor(e,n,r){super(Jw(n),db(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){eE(this,0,e),Object.keys(e).forEach(r=>{NM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class jt extends mf{}const tu=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ly}),ly="always";function uy(t,e){return[...e.path,t]}function _f(t,e,n=ly){tE(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function FM(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&UM(t,e)})}(t,e),function pb(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function LM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&UM(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function fb(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function dy(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function hy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function tE(t,e){const n=ob(t);null!==e.validator?t.setValidators(Kw(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=Yw(t);null!==e.asyncValidator?t.setAsyncValidators(Kw(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();hy(e._rawValidators,i),hy(e._rawAsyncValidators,i)}function Sg(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=ob(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=Yw(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return hy(e._rawValidators,r),hy(e._rawAsyncValidators,r),n}function UM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function nE(t,e){tE(t,e)}function xg(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function sE(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ng(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===nl?n=o:function Rg(t){return Object.getPrototypeOf(t.constructor)===ff}(o)?r=o:i=o}),i||r||n||null}const _b={provide:ci,useExisting:(0,f.Gpc)(()=>Og)},Nd=(()=>Promise.resolve())();let Og=(()=>{var t;class e extends ci{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new mf({},vg(r),Zw(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Nd.then(()=>{const i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),_f(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Nd.then(()=>{const i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Nd.then(()=>{const i=this._findContainer(r.path),o=new mf({});nE(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Nd.then(()=>{const i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Nd.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,sE(this.form,this._directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(Yr,10),f.Y36(rl,10),f.Y36(tu,8))},t.\u0275dir=f.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&f.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([_b]),f.qOj]}),e})();function yb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function vb(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const yf=class extends Rd{constructor(e=null,n,r){super(Jw(n),db(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=vb(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},$M={provide:eu,useExisting:(0,f.Gpc)(()=>fy)},Eb=(()=>Promise.resolve())();let fy=(()=>{var t;class e extends eu{constructor(r,i,o,l,h,_){super(),this._changeDetectorRef=h,this.callSetDisabledState=_,this.control=new yf,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Ng(0,l)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),xg(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_f(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){Eb.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,o=0!==i&&(0,f.VuI)(i);Eb.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?uy(r,this._parent):[r]}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(ci,9),f.Y36(Yr,10),f.Y36(rl,10),f.Y36(to,10),f.Y36(f.sBO,8),f.Y36(tu,8))},t.\u0275dir=f.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([$M]),f.qOj,f.TTD]}),e})(),vf=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=f.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),aE=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({}),e})();const lE=new f.OlP("NgModelWithFormControlWarning"),WM={provide:ci,useExisting:(0,f.Gpc)(()=>no)};let no=(()=>{var t;class e extends ci{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return _f(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){dy(r.control||null,r,!1),function oE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,sE(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,o=this.form.get(r.path);i!==o&&(dy(i||null,r),(t=>t instanceof yf)(o)&&(_f(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);nE(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function nu(t,e){return Sg(t,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tE(this.form,this),this._oldForm&&Sg(this._oldForm,this)}_checkFormPresent(){}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(Yr,10),f.Y36(rl,10),f.Y36(tu,8))},t.\u0275dir=f.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&f.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([WM]),f.qOj,f.TTD]}),e})();const Ab={provide:eu,useExisting:(0,f.Gpc)(()=>wf)};let wf=(()=>{var t;class e extends eu{set isDisabled(r){}constructor(r,i,o,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.name=null,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Ng(0,l)}ngOnChanges(r){this._added||this._setUpControl(),xg(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return uy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(t=e)._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(f.Y36(ci,13),f.Y36(Yr,10),f.Y36(rl,10),f.Y36(to,10),f.Y36(lE,8))},t.\u0275dir=f.lG2({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Ab]),f.qOj,f.TTD]}),e})(),Bb=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[aE]}),e})();class Ef extends Rd{constructor(e,n,r){super(Jw(n),db(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){eE(this,0,e),e.forEach((r,i)=>{NM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function jb(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let JM=(()=>{var t;class e{constructor(){this.useNonNullable=!1}get nonNullable(){const r=new e;return r.useNonNullable=!0,r}group(r,i=null){const o=this._reduceControls(r);let l={};return jb(i)?l=i:null!==i&&(l.validators=i.validator,l.asyncValidators=i.asyncValidator),new mf(o,l)}record(r,i=null){const o=this._reduceControls(r);return new jt(o,i)}control(r,i,o){let l={};return this.useNonNullable?(jb(i)?l=i:(l.validators=i,l.asyncValidators=o),new yf(r,{...l,nonNullable:!0})):new yf(r,i,o)}array(r,i,o){const l=r.map(h=>this._createControl(h));return new Ef(l,i,o)}_reduceControls(r){const i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){return r instanceof yf||r instanceof Rd?r:Array.isArray(r)?this.control(r[0],r.length>1?r[1]:null,r.length>2?r[2]:null):this.control(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),ex=(()=>{var t;class e{static withConfig(r){return{ngModule:e,providers:[{provide:tu,useValue:r.callSetDisabledState??ly}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[Bb]}),e})(),tx=(()=>{var t;class e{static withConfig(r){return{ngModule:e,providers:[{provide:lE,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:tu,useValue:r.callSetDisabledState??ly}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[Bb]}),e})();function Hb(t,e){1&t&&f._UZ(0,"span",12)}function wE(t,e){if(1&t){const n=f.EpF();f.TgZ(0,"div",13)(1,"p",14),f._uU(2,"Share post"),f.qZA(),f.TgZ(3,"button",15),f.NdJ("click",function(i){f.CHM(n);const o=f.oxw(2);return f.KtG(o.closeDiv(i))}),f._uU(4,"Share"),f.qZA()()}}function nx(t,e){if(1&t){const n=f.EpF();f.TgZ(0,"div",16)(1,"input",17),f.NdJ("ngModelChange",function(i){f.CHM(n);const o=f.oxw(2);return f.KtG(o.commentText=i)})("click",function(){f.CHM(n);const i=f.oxw(2);return f.KtG(i.addComment())}),f.qZA(),f.TgZ(2,"button",15),f.NdJ("click",function(){f.CHM(n);const i=f.oxw(2);return f.KtG(i.addComment())}),f._uU(3,"Add"),f.qZA(),f.TgZ(4,"button",15),f.NdJ("click",function(){f.CHM(n);const i=f.oxw(2);return f.KtG(i.CommentCloseButton())}),f._uU(5,"Close "),f.qZA()()}if(2&t){const n=f.oxw(2);f.xp6(1),f.Q6J("ngModel",n.commentText)}}function _y(t,e){if(1&t&&(f.TgZ(0,"div",18),f._uU(1),f.qZA()),2&t){const n=e.$implicit;f.xp6(1),f.Oqu(n)}}function rx(t,e){if(1&t){const n=f.EpF();f.TgZ(0,"div",1)(1,"div",2),f._UZ(2,"img",3),f.TgZ(3,"div",4)(4,"div",5),f.NdJ("click",function(){f.CHM(n);const i=f.oxw();return f.KtG(i.likeEvent())}),f.YNc(5,Hb,1,0,"span",6),f.qZA(),f.TgZ(6,"div",7),f.NdJ("click",function(){f.CHM(n);const i=f.oxw();return f.KtG(i.toggleComment())}),f.qZA(),f.TgZ(7,"div",8),f.NdJ("click",function(i){f.CHM(n);const o=f.oxw();return f.KtG(o.toggleShare(i))}),f.qZA()()(),f.YNc(8,wE,5,0,"div",9),f.YNc(9,nx,6,1,"div",10),f.YNc(10,_y,2,1,"div",11),f.qZA()}if(2&t){const n=f.oxw();f.xp6(2),f.Q6J("src",n.imageUrl,f.LSH),f.xp6(3),f.Q6J("ngIf",n.liked),f.xp6(3),f.Q6J("ngIf",n.showShareWindow),f.xp6(1),f.Q6J("ngIf",n.showCommentLabel),f.xp6(1),f.Q6J("ngForOf",n.comments)}}let ix=(()=>{var t;class e{constructor(){this.comments=[],this.liked=!1,this.showCommentLabel=!1,this.commentText=""}likeEvent(){this.liked=!this.liked}toggleComment(){this.showCommentLabel=!this.showCommentLabel,this.commentText=""}addComment(){""!==this.commentText.trim()&&(this.comments.push(this.commentText),this.commentText="")}CommentCloseButton(){this.showCommentLabel=!1}deleteAddedComment(r){this.comments.splice(r,1)}toggleShare(r){this.showShareWindow=!0,r&&r.stopPropagation()}closeDiv(r){this.showShareWindow=!1,r&&r.stopPropagation()}ngOnInit(){this.showShareWindow=!1}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-post"]],inputs:{imageUrl:"imageUrl"},decls:1,vars:1,consts:[["class","post",4,"ngIf"],[1,"post"],[1,"post-image-wrapper"],["alt","imgCat",1,"post-image",3,"src"],[1,"post-buttons"],[1,"post-image-button-action","icon-heart",3,"click"],["class","post-liked-post icon-heart",4,"ngIf"],[1,"post-image-button-action","icon-bubble2",3,"click"],[1,"post-image-button-action","icon-share2",3,"click"],["class","post-share-window",4,"ngIf"],["class","post-comment-label",4,"ngIf"],["class","post-comment-list",4,"ngFor","ngForOf"],[1,"post-liked-post","icon-heart"],[1,"post-share-window"],[1,"post-share-text"],[1,"post-button-close",3,"click"],[1,"post-comment-label"],["placeholder","Enter your comment...",1,"post-add-comment-input",3,"ngModel","ngModelChange","click"],[1,"post-comment-list"]],template:function(r,i){1&r&&f.YNc(0,rx,11,5,"div",0),2&r&&f.Q6J("ngIf",i.imageUrl)},dependencies:[_c,Gs,nl,Ig,fy],styles:['[_nghost-%COMP%]{display:inline-block;width:calc(50% - 10px);vertical-align:text-top}[_nghost-%COMP%]:nth-child(odd){margin:10px 10px 10px 0}[_nghost-%COMP%]:nth-child(even){margin:10px 0 10px 10px}.post[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:18px;overflow:hidden;background-color:#eae3d2;box-shadow:1px 1px 1px #674188}.post-image-wrapper[_ngcontent-%COMP%]{position:relative;aspect-ratio:16/9;overflow:hidden}.post-image-wrapper[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;height:0;width:100%;bottom:0;transition:height .5s ease-out;border-radius:18px;background:linear-gradient(0deg,rgba(0,0,0,.5130427171) 15%,rgba(255,255,255,0) 75%)}.post-image-wrapper[_ngcontent-%COMP%]:hover:before{height:100%}.post-image[_ngcontent-%COMP%]{display:inline-block;height:100%;width:100%;background-color:#b7b7b7;object-fit:cover;overflow:hidden}.post-buttons[_ngcontent-%COMP%]{position:absolute;display:flex;bottom:0;right:0;margin-right:5px;margin-bottom:5px;font-size:25px;color:#fff;z-index:2}.post-image-button-action[_ngcontent-%COMP%]{padding:8px;border:transparent;border-radius:50%;color:#fff;cursor:pointer}.post-image-button-action[_ngcontent-%COMP%]:hover{background-color:#adacac2e}.post-liked-post[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:220px;padding:6px;color:#fff}.post-share-window[_ngcontent-%COMP%]{position:absolute;top:60%;left:80%;display:flex;flex-direction:column;align-items:center;width:250px;height:100px;padding:10px;box-shadow:0 2px 5px #0003;border-radius:8px;transform:translate(-50%,-50%);background-color:#fff;background-color:#ffffff4d}.post-share-text[_ngcontent-%COMP%]{margin:16px 4px;font-weight:700}.post-button-close[_ngcontent-%COMP%]{display:flex;margin:0 4px;padding:8px 18px;background-color:#674188;border-radius:8px;border:none;color:#fff;font-size:medium;transition:.5s ease-in-out;cursor:pointer}.post-button-close[_ngcontent-%COMP%]:hover{background-color:#c3acd0;color:#000}.post-comment-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:16px 4px}.post-add-comment-input[_ngcontent-%COMP%]{width:250px;margin:10px;padding:10px 6px;border-radius:6px;box-shadow:1px 1px #674188;border:none;outline:none;font-size:medium}.post-comment-list[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:24px 14px;padding:20px;border-radius:6px;border:none}']}),e})(),sx=(()=>{var t;class e{constructor(){this.newUrl="",this.addNewUrl=new f.vpe}addNewItem(){""!==this.newUrl.trim()&&(this.addNewUrl.emit(this.newUrl),this.newUrl="")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-add-new-post"]],outputs:{addNewUrl:"addNewUrl"},decls:9,vars:1,consts:[[1,"content"],[1,"new-post"],["placeholder","url...",1,"input-add-new-post",3,"ngModel","ngModelChange"],[3,"click"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h1"),f._uU(3,"Add new post!"),f.qZA(),f.TgZ(4,"input",2),f.NdJ("ngModelChange",function(l){return i.newUrl=l}),f.qZA(),f.TgZ(5,"p"),f._uU(6,"Please add a valid jpg link and post !"),f.qZA(),f.TgZ(7,"button",3),f.NdJ("click",function(){return i.addNewItem()}),f._uU(8,"Add new Post"),f.qZA()()()),2&r&&(f.xp6(4),f.Q6J("ngModel",i.newUrl))},dependencies:[nl,Ig,fy],styles:[".new-post[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:70%;margin:28px 0;padding:30px 0;border-radius:16px;background-color:#c3acd0;transition:all .7s ease-in-out}.input-add-new-post[_ngcontent-%COMP%]{width:400px;margin:14px;padding:10px 8px;font-size:large;border:none;outline:none;border-radius:8px;transition:.4s ease}.input-add-new-post[_ngcontent-%COMP%]:hover{background-color:#fff}button[_ngcontent-%COMP%]{width:200px;margin:20px;padding:8px 24px;font-size:large;font-weight:600;color:#000;cursor:pointer;text-align:center;border:none;background-size:300% 100%;border-radius:50px;transition:all .4s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#674188;color:#fff}"]}),e})();function ox(t,e){if(1&t&&(f.ynx(0),f._UZ(1,"app-post",3),f.BQk()),2&t){const n=e.$implicit;f.xp6(1),f.Q6J("imageUrl",n)}}let ax=(()=>{var t;class e{constructor(){this.image=0,this.imageUrl=["https://www.tuxedo-cat.co.uk/wp-content/uploads/2016/12/shutterstock_138013388.jpg","https://media.istockphoto.com/id/1336021035/photo/black-and-white-color-cat-looking-at-camera-curiosity.webp?b=1&s=170667a&w=0&k=20&c=_z9Uj-G_QzE-mxqd4-mSRFYFTwB3UEi6g_hLySo_s2Y=","https://hellobark.com/wp-content/uploads/domestic-cats.jpg","https://www.hepper.com/wp-content/uploads/2021/07/Tuxedo-Ragamuffin-Cat_Kill_Baal_Shutterstock.jpg"]}addItem(r){this.isImageJPG(r)?this.imageUrl.push(r):alert("The URL entered is not an image of type JPG!")}isImageJPG(r){return r.toLowerCase().endsWith(".jpg")||r.toLowerCase().endsWith(".jpeg")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-content-feed"]],decls:5,vars:1,consts:[[1,"content"],[3,"addNewUrl"],[4,"ngFor","ngForOf"],[3,"imageUrl"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0)(1,"div")(2,"app-add-new-post",1),f.NdJ("addNewUrl",function(l){return i.addItem(l)}),f.qZA()(),f.TgZ(3,"div"),f.YNc(4,ox,2,1,"ng-container",2),f.qZA()()),2&r&&(f.xp6(4),f.Q6J("ngForOf",i.imageUrl))},dependencies:[_c,ix,sx]}),e})(),cx=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-elements-about"]],decls:11,vars:0,consts:[[1,"content"],[1,"element-wraper"],[1,"element"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2)(3,"div",2)(4,"div",2)(5,"div",2)(6,"div",2)(7,"div",2)(8,"div",2)(9,"div",2)(10,"div",2),f.qZA()())},styles:[".element[_ngcontent-%COMP%]{display:inline-block;width:calc(33.333% - 12px);height:50px;background-color:#674188;margin:6px}.element[_ngcontent-%COMP%]:nth-child(4), .element[_ngcontent-%COMP%]:nth-child(5){width:calc(50% - 12px);background-color:#c02525}.element[_ngcontent-%COMP%]:nth-child(n+6):nth-child(-n+9){width:calc(25% - 12px);background-color:#449fdb}"]}),e})(),lx=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-about"]],decls:3,vars:0,template:function(r,i){1&r&&(f.TgZ(0,"p"),f._uU(1,"about works!"),f.qZA(),f._UZ(2,"app-elements-about"))},dependencies:[cx]}),e})(),$b=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(r,i){1&r&&(f.TgZ(0,"h1"),f._uU(1,"Error: 404"),f.qZA())}}),e})(),Gb=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-shared-posts"]],decls:2,vars:0,template:function(r,i){1&r&&(f.TgZ(0,"p"),f._uU(1,"shared-posts works!"),f.qZA())}}),e})();F(5967);class WP{constructor(e,n){this.email=e,this.password=n}}var yy=F(6321),_n=F(8186);function zb(){return(0,Hn.e)((t,e)=>{let n,r=!1;t.subscribe((0,sr.x)(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}var We,Lg=F(3997),li=F(6304),EE=F(3106),we=F(5861),ps=F(534),Qr=F(4537),gs=F(7879),P=F(9058),kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ps={},Ug=Ug||{},xt=kd||self;function sl(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ec(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ru="closure_uid_"+(1e9*Math.random()>>>0),Cf=0;function bf(t,e,n){return t.call.apply(t.bind,arguments)}function Df(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Nr(t,e,n){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bf:Df).apply(null,arguments)}function Vg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ui(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function ol(){this.s=this.s,this.o=this.o}ol.prototype.s=!1,ol.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function If(t){Object.prototype.hasOwnProperty.call(t,ru)&&t[ru]||(t[ru]=++Cf)}(this)},ol.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const IE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vy(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function CE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(sl(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let l=0;l<o;l++)t[i+l]=r[l]}else t.push(r)}}function Hi(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Hi.prototype.h=function(){this.defaultPrevented=!0};var Wb=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xt.addEventListener("test",()=>{},e),xt.removeEventListener("test",()=>{},e)}catch{}return t}();function Pd(t){return/^[\s\xa0]*$/.test(t)}function wy(){var t=xt.navigator;return t&&(t=t.userAgent)?t:""}function al(t){return-1!=wy().indexOf(t)}function Zb(t){return Zb[" "](t),t}Zb[" "]=function(){};var jg,t,dx=al("Opera"),Bg=al("Trident")||al("MSIE"),Kb=al("Edge"),Yb=Kb||Bg,Qb=al("Gecko")&&!(-1!=wy().toLowerCase().indexOf("webkit")&&!al("Edge"))&&!(al("Trident")||al("MSIE"))&&!al("Edge"),hx=-1!=wy().toLowerCase().indexOf("webkit")&&!al("Edge");function Xb(){var t=xt.document;return t?t.documentMode:void 0}e:{var Fd="",Hg=(t=wy(),Qb?/rv:([^\);]+)(\)|;)/.exec(t):Kb?/Edge\/([\d\.]+)/.exec(t):Bg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):hx?/WebKit\/(\S+)/.exec(t):dx?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(Hg&&(Fd=Hg?Hg[1]:""),Bg){var Tf=Xb();if(null!=Tf&&Tf>parseFloat(Fd)){jg=String(Tf);break e}}jg=Fd}var Jb=xt.document&&Bg&&(Xb()||parseInt(jg,10))||void 0;function $g(t,e){if(Hi.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Qb){e:{try{Zb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Gg[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$g.$.h.call(this)}}ui($g,Hi);var Gg={2:"touch",3:"pen",4:"mouse"};$g.prototype.h=function(){$g.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var zg="closure_listenable_"+(1e6*Math.random()|0),fx=0;function px(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++fx,this.fa=this.ia=!1}function Iy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function qg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Wg(t){const e={};for(const n in t)e[n]=t[n];return e}const gx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eD(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<gx.length;o++)n=gx[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function by(t){this.src=t,this.g={},this.h=0}function Zg(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=IE(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Iy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function bE(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}by.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var l=bE(t,e,r,i);return-1<l?(e=t[l],n||(e.ia=!1)):((e=new px(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var Dy="closure_lm_"+(1e6*Math.random()|0),DE={};function tD(t,e,n,r,i){if(r&&r.once)return SE(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)tD(t,e[o],n,r,i);return null}return n=ME(n),t&&t[zg]?t.O(e,n,ec(r)?!!r.capture:!!r,i):TE(t,e,n,!1,r,i)}function TE(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var l=ec(i)?!!i.capture:!!i,h=Kg(t);if(h||(t[Dy]=h=new by(t)),(n=h.add(e,n,r,l,o)).proxy)return n;if(r=function nD(){const e=sD;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Wb||(i=l),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(iD(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function SE(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)SE(t,e[o],n,r,i);return null}return n=ME(n),t&&t[zg]?t.P(e,n,ec(r)?!!r.capture:!!r,i):TE(t,e,n,!0,r,i)}function rD(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rD(t,e[o],n,r,i);else r=ec(r)?!!r.capture:!!r,n=ME(n),t&&t[zg]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=bE(o=t.g[e],n,r,i))&&(Iy(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Kg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=bE(e,n,r,i)),(n=-1<t?e[t]:null)&&AE(n))}function AE(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[zg])Zg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(iD(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Kg(e))?(Zg(n,t),0==n.h&&(n.src=null,e[Dy]=null)):Iy(t)}}}function iD(t){return t in DE?DE[t]:DE[t]="on"+t}function sD(t,e){if(t.fa)t=!0;else{e=new $g(e,this);var n=t.listener,r=t.la||t.src;t.ia&&AE(t),t=n.call(r,e)}return t}function Kg(t){return(t=t[Dy])instanceof by?t:null}var Yg="__closure_events_fn_"+(1e9*Math.random()>>>0);function ME(t){return"function"==typeof t?t:(t[Yg]||(t[Yg]=function(e){return t.handleEvent(e)}),t[Yg])}function Or(){ol.call(this),this.i=new by(this),this.S=this,this.J=null}function Xr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Hi(e,t);else if(e instanceof Hi)e.target=e.target||t;else{var i=e;eD(e=new Hi(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var l=e.g=n[o];i=Af(l,r,!0,e)&&i}if(i=Af(l=e.g=t,r,!0,e)&&i,i=Af(l,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Af(l=e.g=n[o],r,!1,e)&&i}function Af(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==n){var h=l.listener,_=l.la||l.src;l.ia&&Zg(t.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}ui(Or,ol),Or.prototype[zg]=!0,Or.prototype.removeEventListener=function(t,e,n,r){rD(this,t,e,n,r)},Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Iy(n[r]);delete t.g[e],t.h--}}this.J=null},Or.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Or.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ty=xt.JSON.stringify;function _x(){var t=Ay;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Qg=new class mx{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Sy,t=>t.reset());class Sy{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function oD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function aD(t){xt.setTimeout(()=>{throw t},0)}let Xg,Jg=!1,Ay=new class yx{constructor(){this.h=this.g=null}add(e,n){const r=Qg.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},My=()=>{const t=xt.Promise.resolve(void 0);Xg=()=>{t.then(cD)}};var cD=()=>{for(var t;t=_x();){try{t.h.call(t.g)}catch(n){aD(n)}var e=Qg;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jg=!1};function Mf(t,e){Or.call(this),this.h=t||1,this.g=e||xt,this.j=Nr(this.qb,this),this.l=Date.now()}function xy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function xE(t,e,n){if("function"==typeof t)n&&(t=Nr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Nr(t.handleEvent,t)}return 2147483647<Number(e)?-1:xt.setTimeout(t,e||0)}function RE(t){t.g=xE(()=>{t.g=null,t.i&&(t.i=!1,RE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ui(Mf,Or),(We=Mf.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xr(this,"tick"),this.ga&&(xy(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){Mf.$.N.call(this),xy(this),delete this.g};class lD extends ol{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RE(this)}N(){super.N(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xf(t){ol.call(this),this.h=t,this.g={}}ui(xf,ol);var NE=[];function uD(t,e,n,r){Array.isArray(n)||(n&&(NE[0]=n.toString()),n=NE);for(var i=0;i<n.length;i++){var o=tD(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function dD(t){qg(t.g,function(e,n){this.g.hasOwnProperty(n)&&AE(e)},t),t.g={}}function Ry(){this.g=!0}function Ld(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return Ty(n)}catch{return e}}(t,n)+(r?" "+r:"")})}xf.prototype.N=function(){xf.$.N.call(this),dD(this)},xf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ry.prototype.Ea=function(){this.g=!1},Ry.prototype.info=function(){};var iu={},kE=null;function em(){return kE=kE||new Or}function PE(t){Hi.call(this,iu.Ta,t)}function Rf(t){const e=em();Xr(e,new PE(e))}function tm(t,e){Hi.call(this,iu.STAT_EVENT,t),this.stat=e}function _r(t){const e=em();Xr(e,new tm(e,t))}function gD(t,e){Hi.call(this,iu.Ua,t),this.size=e}function nm(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){t()},e)}iu.Ta="serverreachability",ui(PE,Hi),iu.STAT_EVENT="statevent",ui(tm,Hi),iu.Ua="timingevent",ui(gD,Hi);var Nf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},su={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rm(){}function Ny(){}rm.prototype.h=null;var LE,Oy={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _D(){Hi.call(this,"d")}function FE(){Hi.call(this,"c")}function im(){}function sm(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new xf(this),this.P=yD,this.V=new Mf(t=Yb?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jr}function Jr(){this.i=null,this.g="",this.h=!1}ui(_D,Hi),ui(FE,Hi),ui(im,rm),im.prototype.g=function(){return new XMLHttpRequest},im.prototype.i=function(){return{}},LE=new im;var yD=45e3,UE={},ky={};function Py(t,e,n){t.L=1,t.v=Fy(di(e)),t.s=n,t.S=!0,vD(t,null)}function vD(t,e){t.G=Date.now(),om(t),t.A=di(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),GE(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Jr,t.g=jD(t.l,n?e:null,!t.s),0<t.O&&(t.M=new lD(Nr(t.Pa,t,t.g),t.O)),uD(t.U,t.g,"readystatechange",t.nb),e=t.I?Wg(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Rf(),function hD(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var l="",h=o.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+l})}(t.j,t.u,t.A,t.m,t.W,t.s)}function VE(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function BE(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=Of(t,n),i==ky){4==e&&(t.o=4,_r(14),r=!1),Ld(t.j,t.m,null,"[Incomplete Response]");break}if(i==UE){t.o=4,_r(15),Ld(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ld(t.j,t.m,i,null),ED(t,i)}VE(t)&&i!=ky&&i!=UE&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,_r(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zy(e),e.M=!0,_r(11))):(Ld(t.j,t.m,n,"[Invalid Chunked Response]"),ou(t),cm(t))}function Of(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ky:(n=Number(e.substring(n,r)),isNaN(n)?UE:(r+=1)+n>e.length?ky:(e=e.slice(r,r+n),t.C=r+n,e))}function om(t){t.Y=Date.now()+t.P,wD(t,t.P)}function wD(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=nm(Nr(t.lb,t),e)}function am(t){t.B&&(xt.clearTimeout(t.B),t.B=null)}function cm(t){0==t.l.H||t.J||Vd(t.l,t)}function ou(t){am(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,xy(t.V),dD(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ED(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Ly(n.i,t)))if(!t.K&&Ly(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;n0(n),_m(n)}UD(n),_r(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=nm(Nr(n.ib,n),6e3));if(1>=qE(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Bd(n,11)}else if((t.K||n.g==t)&&n0(n),!Pd(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(n.V=w[0],w=w[1],2==n.H)if("c"==w[0]){n.K=w[1],n.pa=w[2];const D=w[3];null!=D&&(n.ra=D,n.l.info("VER="+n.ra));const S=w[4];null!=S&&(n.Ga=S,n.l.info("SVER="+n.Ga));const k=w[5];null!=k&&"number"==typeof k&&0<k&&(n.L=r=1.5*k,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const B=t.g;if(B){const W=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var o=r.i;o.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Uy(o,o.h),o.h=null))}if(r.F){const le=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.Da=le,Yn(r.I,r.F,le))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var l=t;if((r=n).wa=jd(r,r.J?r.pa:null,r.Y),l.K){WE(r.i,l);var h=l,_=r.L;_&&h.setTimeout(_),h.B&&(am(h),om(h)),r.g=l}else Gy(r);0<n.j.length&&tc(n)}else"stop"!=w[0]&&"close"!=w[0]||Bd(n,7);else 3==n.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Bd(n,7):$y(n):"noop"!=w[0]&&n.h&&n.h.Aa(w),n.A=0)}Rf()}catch{}}function da(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(sl(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function jE(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(sl(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function ID(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(sl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(We=sm.prototype).setTimeout=function(t){this.P=t},We.nb=function(t){t=t.target;const e=this.M;e&&3==ha(t)?e.l():this.Pa(t)},We.Pa=function(t){try{if(t==this.g)e:{const D=ha(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||Yb||this.g&&(this.h.h||this.g.ja()||QE(this.g)))){this.J||4!=D||7==e||Rf(),am(this);var n=this.g.da();this.ca=n;t:if(VE(this)){var r=QE(this.g);t="";var i=r.length,o=4==ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ou(this),cm(this);var l="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==n,function OE(t,e,n,r,i,o,l){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.W,D,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pd(h)){var w=h;break t}}w=null}if(!(n=w)){this.i=!1,this.o=3,_r(12),ou(this),cm(this);break e}Ld(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ED(this,n)}this.S?(BE(this,D,l),Yb&&this.i&&3==D&&(uD(this.U,this.V,"tick",this.mb),this.V.start())):(Ld(this.j,this.m,l,null),ED(this,l)),4==D&&ou(this),this.i&&!this.J&&(4==D?Vd(this.l,this):(this.i=!1,om(this)))}else(function FD(t){const e={};t=(t.g&&2<=ha(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Pd(t[r]))continue;var n=oD(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function Cy(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<l.indexOf("Unknown SID")?(this.o=3,_r(12)):(this.o=0,_r(13)),ou(this),cm(this)}}}catch{}},We.mb=function(){if(this.g){var t=ha(this.g),e=this.g.ja();this.C<e.length&&(am(this),BE(this,t,e),this.i&&4!=t&&om(this))}},We.cancel=function(){this.J=!0,ou(this)},We.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function fD(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Rf(),_r(17)),ou(this),this.o=2,cm(this)):wD(this,this.Y-t)};var CD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ts){this.h=t.h,Fs(this,t.j),this.s=t.s,this.g=t.g,lm(this,t.m),this.l=t.l;var e=t.i,n=new Pf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),HE(this,n),this.o=t.o}else t&&(e=String(t).match(CD))?(this.h=!1,Fs(this,e[1]||"",!0),this.s=um(e[2]||""),this.g=um(e[3]||"",!0),lm(this,e[4]),this.l=um(e[5]||"",!0),HE(this,e[6]||"",!0),this.o=um(e[7]||"")):(this.h=!1,this.i=new Pf(null,this.h))}function di(t){return new ts(t)}function Fs(t,e,n){t.j=n?um(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lm(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function HE(t,e,n){e instanceof Pf?(t.i=e,function TD(t,e){e&&!t.j&&(cl(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(hm(this,r),GE(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=dm(e,Ex)),t.i=new Pf(e,t.h))}function Yn(t,e,n){t.i.set(e,n)}function Fy(t){return Yn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function um(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dm(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$E),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $E(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ts.prototype.toString=function(){var t=[],e=this.j;e&&t.push(dm(e,kf,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(dm(e,kf,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(dm(n,"/"==n.charAt(0)?bD:wx,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",dm(n,Ix)),t.join("")};var kf=/[#\/\?@]/g,wx=/[#\?:]/g,bD=/[#\?]/g,Ex=/[#\?@]/g,Ix=/#/g;function Pf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function cl(t){t.g||(t.g=new Map,t.h=0,t.i&&function vx(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function hm(t,e){cl(t),e=Ud(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function DD(t,e){return cl(t),e=Ud(t,e),t.g.has(e)}function GE(t,e,n){hm(t,e),0<n.length&&(t.i=null,t.g.set(Ud(t,e),vy(n)),t.h+=n.length)}function Ud(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SD(t){this.l=t||zE,t=xt.PerformanceNavigationTiming?0<(t=xt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(xt.g&&xt.g.Ka&&xt.g.Ka()&&xt.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=Pf.prototype).add=function(t,e){cl(this),this.i=null,t=Ud(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},We.forEach=function(t,e){cl(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},We.ta=function(){cl(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},We.Z=function(t){cl(this);let e=[];if("string"==typeof t)DD(this,t)&&(e=e.concat(this.g.get(Ud(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},We.set=function(t,e){return cl(this),this.i=null,DD(this,t=Ud(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},We.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),t.push(i)}}return this.i=t.join("&")};var zE=10;function fm(t){return!!t.h||!!t.g&&t.g.size>=t.j}function qE(t){return t.h?1:t.g?t.g.size:0}function Ly(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Uy(t,e){t.g?t.g.add(e):t.h=e}function WE(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ZE(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return vy(t.i)}SD.prototype.cancel=function(){if(this.i=ZE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var AD=class{stringify(t){return xt.JSON.stringify(t,void 0)}parse(t){return xt.JSON.parse(t,void 0)}};function MD(){this.g=new AD}function xD(t,e,n){const r=n||"";try{da(t,function(i,o){let l=i;ec(i)&&(l=Ty(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function pm(t){this.l=t.fc||null,this.j=t.ob||!1}function By(t,e){Or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=KE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ui(pm,rm),pm.prototype.g=function(){return new By(this.l,this.j)},pm.prototype.i=function(t){return function(){return t}}({}),ui(By,Or);var KE=0;function RD(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function gm(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mm(t)}function mm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(We=By.prototype).open=function(t,e){if(this.readyState!=KE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mm(this)},We.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||xt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gm(this)),this.readyState=KE},We.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mm(this)),this.g&&(this.readyState=3,mm(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RD(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?gm(this):mm(this),3==this.readyState&&RD(this)}},We.Za=function(t){this.g&&(this.response=this.responseText=t,gm(this))},We.Ya=function(t){this.g&&(this.response=t,gm(this))},We.ka=function(){this.g&&gm(this)},We.setRequestHeader=function(t,e){this.v.append(t,e)},We.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(By.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Dx=xt.JSON.parse;function yr(t){Or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ND,this.L=this.M=!1}ui(yr,Or);var ND="",Tx=/^https?$/i,Sx=["POST","PUT"];function OD(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,kD(t),jy(t)}function kD(t){t.F||(t.F=!0,Xr(t,"complete"),Xr(t,"error"))}function PD(t){if(t.h&&typeof Ug<"u"&&(!t.C[1]||4!=ha(t)||2!=t.da()))if(t.v&&4==ha(t))xE(t.La,0,t);else if(Xr(t,"readystatechange"),4==ha(t)){t.h=!1;try{const l=t.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===l){var i=String(t.I).match(CD)[1]||null;!i&&xt.self&&xt.self.location&&(i=xt.self.location.protocol.slice(0,-1)),r=!Tx.test(i?i.toLowerCase():"")}n=r}if(n)Xr(t,"complete"),Xr(t,"success");else{t.m=6;try{var o=2<ha(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",kD(t)}}finally{jy(t)}}}function jy(t,e){if(t.g){YE(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Xr(t,"ready");try{n.onreadystatechange=r}catch{}}}function YE(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(xt.clearTimeout(t.A),t.A=null)}function ha(t){return t.g?t.g.readyState:0}function QE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ND:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function XE(t){let e="";return qg(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function Hy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=XE(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Yn(t,e,n))}function Ff(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function JE(t){this.Ga=0,this.j=[],this.l=new Ry,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ff("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ff("baseRetryDelayMs",5e3,t),this.hb=Ff("retryDelaySeedMs",1e4,t),this.eb=Ff("forwardChannelMaxRetries",2,t),this.xa=Ff("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new SD(t&&t.concurrentRequestLimit),this.Ja=new MD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $y(t){if(e0(t),3==t.H){var e=t.W++,n=di(t.I);if(Yn(n,"SID",t.K),Yn(n,"RID",e),Yn(n,"TYPE","terminate"),nc(t,n),(e=new sm(t,t.l,e)).L=2,e.v=Fy(di(n)),n=!1,xt.navigator&&xt.navigator.sendBeacon)try{n=xt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&xt.Image&&((new Image).src=e.v,n=!0),n||(e.g=jD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),om(e)}BD(t)}function _m(t){t.g&&(zy(t),t.g.cancel(),t.g=null)}function e0(t){_m(t),t.u&&(xt.clearTimeout(t.u),t.u=null),n0(t),t.i.cancel(),t.m&&("number"==typeof t.m&&xt.clearTimeout(t.m),t.m=null)}function tc(t){if(!fm(t.i)&&!t.m){t.m=!0;var e=t.Na;Xg||My(),Jg||(Xg(),Jg=!0),Ay.add(e,t),t.C=0}}function LD(t,e){var n;n=e?e.m:t.W++;const r=di(t.I);Yn(r,"SID",t.K),Yn(r,"RID",n),Yn(r,"AID",t.V),nc(t,r),t.o&&t.s&&Hy(r,t.o,t.s),n=new sm(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=xx(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Uy(t.i,n),Py(n,r,e)}function nc(t,e){t.na&&qg(t.na,function(n,r){Yn(e,r,n)}),t.h&&da({},function(n,r){Yn(e,r,n)})}function xx(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Nr(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const l=["count="+n];-1==o?0<n?(o=i[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let _=0;_<n;_++){let w=i[_].g;const D=i[_].map;if(w-=o,0>w)o=Math.max(0,i[_].g-100),h=!1;else try{xD(D,l,"req"+w+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Gy(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xg||My(),Jg||(Xg(),Jg=!0),Ay.add(e,t),t.A=0}}function UD(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=nm(Nr(t.Ma,t),VD(t,t.A)),t.A++,0))}function zy(t){null!=t.B&&(xt.clearTimeout(t.B),t.B=null)}function t0(t){t.g=new sm(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=di(t.wa);Yn(e,"RID","rpc"),Yn(e,"SID",t.K),Yn(e,"AID",t.V),Yn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Yn(e,"TO",t.qa),Yn(e,"TYPE","xmlhttp"),nc(t,e),t.o&&t.s&&Hy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Fy(di(e)),n.s=null,n.S=!0,vD(n,t)}function n0(t){null!=t.v&&(xt.clearTimeout(t.v),t.v=null)}function Vd(t,e){var n=null;if(t.g==e){n0(t),zy(t),t.g=null;var r=2}else{if(!Ly(t.i,e))return;n=e.F,WE(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Xr(r=em(),new gD(r,n)),tc(t)}else Gy(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Mx(t,e){return!(qE(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=nm(Nr(t.Na,t,e),VD(t,t.C)),t.C++,0)))}(t,e)||2==r&&UD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Bd(t,5);break;case 4:Bd(t,10);break;case 3:Bd(t,6);break;default:Bd(t,2)}}function VD(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Bd(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Nr(t.pb,t);n||(n=new ts("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Fs(n,"https"),Fy(n)),function bx(t,e){const n=new Ry;if(xt.Image){const r=new Image;r.onload=Vg(Vy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Vg(Vy,n,r,"TestLoadImage: error",!1,e),r.onabort=Vg(Vy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vg(Vy,n,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else _r(2);t.H=0,t.h&&t.h.za(e),BD(t),e0(t)}function BD(t){if(t.H=0,t.ma=[],t.h){const e=ZE(t.i);(0!=e.length||0!=t.j.length)&&(CE(t.ma,e),CE(t.ma,t.j),t.i.i.length=0,vy(t.j),t.j.length=0),t.h.ya()}}function jd(t,e,n){var r=n instanceof ts?di(n):new ts(n);if(""!=r.g)e&&(r.g=e+"."+r.g),lm(r,r.m);else{var i=xt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ts(null);r&&Fs(o,r),e&&(o.g=e),i&&lm(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Yn(r,n,e),Yn(r,"VER",t.ra),nc(t,r),r}function jD(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(n&&t.Ha&&!t.va?new pm({ob:!0}):t.va)).Oa(t.J),e}function ym(){}function Hd(){if(Bg&&!(10<=Number(Jb)))throw Error("Environmental error: no available transport.")}function $n(t,e){Or.call(this),this.g=new JE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pd(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new $d(this)}function Rx(t){_D.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function r0(){FE.call(this),this.status=1}function $d(t){this.g=t}function Fo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qy(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],l=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;l=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(l<<7&4294967295|l>>>25))+((l=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((o=(e=n+((l=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=o+((l=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function bn(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(We=yr.prototype).Oa=function(t){this.M=t},We.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():LE.g(),this.C=function mD(t){return t.h||(t.h=t.i())}(this.u?this.u:LE),this.g.onreadystatechange=Nr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void OD(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=xt.FormData&&t instanceof xt.FormData,!(0<=IE(Sx,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{YE(this),0<this.B&&((this.L=function Ax(t){return Bg&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.ua,this)):this.A=xE(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){OD(this,o)}},We.ua=function(){typeof Ug<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},We.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xr(this,"complete"),Xr(this,"abort"),jy(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jy(this,!0)),yr.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?PD(this):this.kb())},We.kb=function(){PD(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<ha(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Dx(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=JE.prototype).ra=8,We.H=1,We.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new sm(this,this.l,t);let o=this.s;if(this.U&&(o?(o=Wg(o),eD(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xx(this,i,e),Yn(n=di(this.I),"RID",t),Yn(n,"CVER",22),this.F&&Yn(n,"X-HTTP-Session-Id",this.F),nc(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(XE(o)))+"&"+e:this.o&&Hy(n,this.o,o)),Uy(this.i,i),this.bb&&Yn(n,"TYPE","init"),this.P?(Yn(n,"$req",e),Yn(n,"SID","null"),i.aa=!0,Py(i,n,null)):Py(i,n,e),this.H=2}}else 3==this.H&&(t?LD(this,t):0==this.j.length||fm(this.i)||LD(this))},We.Ma=function(){if(this.u=null,t0(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nm(Nr(this.jb,this),t)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_r(10),_m(this),t0(this))},We.ib=function(){null!=this.v&&(this.v=null,_m(this),UD(this),_r(19))},We.pb=function(t){t?(this.l.info("Successfully pinged google.com"),_r(2)):(this.l.info("Failed to ping google.com"),_r(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=ym.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},Hd.prototype.g=function(t,e){return new $n(t,e)},ui($n,Or),$n.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;_r(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=jd(t,null,t.Y),tc(t)},$n.prototype.close=function(){$y(this.g)},$n.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Ty(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&tc(e)},$n.prototype.N=function(){this.g.h=null,delete this.j,$y(this.g),delete this.g,$n.$.N.call(this)},ui(Rx,_D),ui(r0,FE),ui($d,ym),$d.prototype.Ba=function(){Xr(this.g,"a")},$d.prototype.Aa=function(t){Xr(this.g,new Rx(t))},$d.prototype.za=function(t){Xr(this.g,new r0)},$d.prototype.ya=function(){Xr(this.g,"b")},ui(Fo,function Nx(){this.blockSize=-1}),Fo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Fo.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)qy(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){qy(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){qy(this,r),i=0;break}}this.h=i,this.i+=e},Fo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var HD={};function s0(t){return-128<=t&&128>t?function ux(t,e){var n=HD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new bn([0|e],0>e?-1:0)}):new bn([0|t],0>t?-1:0)}function rc(t){if(isNaN(t)||!isFinite(t))return Lf;if(0>t)return Di(rc(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Gd;return new bn(e,0)}var Gd=4294967296,Lf=s0(0),o0=s0(1),GD=s0(16777216);function Lo(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ro(t){return-1==t.h}function Di(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bn(n,~t.h).add(o0)}function vm(t,e){return t.add(Di(e))}function Wy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ll(t,e){this.g=t,this.h=e}function au(t,e){if(Lo(e))throw Error("division by zero");if(Lo(t))return new ll(Lf,Lf);if(ro(t))return e=au(Di(t),e),new ll(Di(e.g),Di(e.h));if(ro(e))return e=au(t,Di(e)),new ll(Di(e.g),e.h);if(30<t.g.length){if(ro(t)||ro(e))throw Error("slowDivide_ only works with positive integers.");for(var n=o0,r=e;0>=r.X(t);)n=zD(n),r=zD(r);var i=Uf(n,1),o=Uf(r,1);for(r=Uf(r,2),n=Uf(n,2);!Lo(r);){var l=o.add(r);0>=l.X(t)&&(i=i.add(n),o=l),r=Uf(r,1),n=Uf(n,1)}return e=vm(t,i.R(e)),new ll(i,e)}for(i=Lf;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(o=rc(n)).R(e);ro(l)||0<l.X(t);)l=(o=rc(n-=r)).R(e);Lo(o)&&(o=o0),i=i.add(o),t=vm(t,l)}return new ll(i,t)}function zD(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bn(n,t.h)}function Uf(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new bn(i,t.h)}(We=bn.prototype).ea=function(){if(ro(this))return-Di(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Gd+r)*e,e*=Gd}return t},We.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Lo(this))return"0";if(ro(this))return"-"+Di(this).toString(t);for(var e=rc(Math.pow(t,6)),n=this,r="";;){var i=au(n,e).g,o=((0<(n=vm(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Lo(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},We.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},We.X=function(t){return ro(t=vm(this,t))?-1:Lo(t)?0:1},We.abs=function(){return ro(this)?Di(this):this},We.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),l=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=l>>>16,n[i]=(l&=65535)<<16|(o&=65535)}return new bn(n,-2147483648&n[n.length-1]?-1:0)},We.R=function(t){if(Lo(this)||Lo(t))return Lf;if(ro(this))return ro(t)?Di(this).R(Di(t)):Di(Di(this).R(t));if(ro(t))return Di(this.R(Di(t)));if(0>this.X(GD)&&0>t.X(GD))return rc(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,l=65535&this.D(r),h=t.D(i)>>>16,_=65535&t.D(i);n[2*r+2*i]+=l*_,Wy(n,2*r+2*i),n[2*r+2*i+1]+=o*_,Wy(n,2*r+2*i+1),n[2*r+2*i+1]+=l*h,Wy(n,2*r+2*i+1),n[2*r+2*i+2]+=o*h,Wy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bn(n,0)},We.gb=function(t){return au(this,t).h},We.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bn(n,this.h&t.h)},We.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bn(n,this.h|t.h)},We.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bn(n,this.h^t.h)},Hd.prototype.createWebChannel=Hd.prototype.g,$n.prototype.send=$n.prototype.u,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,Nf.NO_ERROR=0,Nf.TIMEOUT=8,Nf.HTTP_ERROR=6,su.COMPLETE="complete",Ny.EventType=Oy,Oy.OPEN="a",Oy.CLOSE="b",Oy.ERROR="c",Oy.MESSAGE="d",Or.prototype.listen=Or.prototype.O,yr.prototype.listenOnce=yr.prototype.P,yr.prototype.getLastError=yr.prototype.Sa,yr.prototype.getLastErrorCode=yr.prototype.Ia,yr.prototype.getStatus=yr.prototype.da,yr.prototype.getResponseJson=yr.prototype.Wa,yr.prototype.getResponseText=yr.prototype.ja,yr.prototype.send=yr.prototype.ha,yr.prototype.setWithCredentials=yr.prototype.Oa,Fo.prototype.digest=Fo.prototype.l,Fo.prototype.reset=Fo.prototype.reset,Fo.prototype.update=Fo.prototype.j,bn.prototype.add=bn.prototype.add,bn.prototype.multiply=bn.prototype.R,bn.prototype.modulo=bn.prototype.gb,bn.prototype.compare=bn.prototype.X,bn.prototype.toNumber=bn.prototype.ea,bn.prototype.toString=bn.prototype.toString,bn.prototype.getBits=bn.prototype.D,bn.fromNumber=rc,bn.fromString=function $D(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Di($D(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rc(Math.pow(e,8)),r=Lf,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+o),e);8>o?(o=rc(Math.pow(e,o)),r=r.R(o).add(rc(l))):r=(r=r.R(n)).add(rc(l))}return r};var Ox=Ps.createWebChannelTransport=function(){return new Hd},qD=Ps.getStatEventTarget=function(){return em()},Zy=Ps.ErrorCode=Nf,WD=Ps.EventType=su,kx=Ps.Event=iu,a0=Ps.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Px=Ps.FetchXmlHttpFactory=pm,Ky=Ps.WebChannel=Ny,ZP=Ps.XhrIo=yr,KP=Ps.Md5=Fo,wm=Ps.Integer=bn;const Fx="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let ul="9.23.0";const cu=new gs.Yd("@firebase/firestore");function c0(){return cu.logLevel}function Ue(t,...e){if(cu.logLevel<=gs.in.DEBUG){const n=e.map(l0);cu.debug(`Firestore (${ul}): ${t}`,...n)}}function kr(t,...e){if(cu.logLevel<=gs.in.ERROR){const n=e.map(l0);cu.error(`Firestore (${ul}): ${t}`,...n)}}function Uo(t,...e){if(cu.logLevel<=gs.in.WARN){const n=e.map(l0);cu.warn(`Firestore (${ul}): ${t}`,...n)}}function l0(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function lt(t="Unexpected state"){const e=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: `+t;throw kr(e),new Error(e)}function Et(t,e){t||lt()}function tt(t,e){return t}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends P.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class KD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hi.UNAUTHENTICATED))}shutdown(){}}class Ux{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QD{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=w=>this.i!==i?(i=this.i,n(w)):Promise.resolve();let l=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,we.Z)(function*(){yield w.promise,yield o(r.currentUser)}))},_=w=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new KD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new hi(e)}}class Vx{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class XD{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Vx(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u0{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=o=>{null!=o.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et("string"==typeof n.token),this.T=n.token,new JD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class d0{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=eT(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Ut(t,e){return t<e?-1:t>e?1:0}function Vf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function tT(t){return t+"\0"}class Gn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Oe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Gn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Gn(0,0))}static max(){return new It(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bf{constructor(e,n,r){void 0===n?n=0:n>e.length&&lt(),void 0===r?r=e.length-n:r>e.length-n&&lt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Bf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),l=n.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class hn extends Bf{construct(e,n,r){return new hn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new hn(n)}static emptyPath(){return new hn([])}}const Bx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Bf{construct(e,n,r){return new vr(e,n,r)}static isValidIdentifier(e){return Bx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Oe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Oe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Oe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new Oe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(n)}static emptyPath(){return new vr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(hn.fromString(e))}static fromName(e){return new Xe(hn.fromString(e).popFirst(5))}static empty(){return new Xe(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return hn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new hn(e.slice()))}}class Yy{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function h0(t){return t.fields.find(e=>2===e.kind)}function zd(t){return t.fields.filter(e=>2!==e.kind)}Yy.UNKNOWN_ID=-1;class Em{constructor(e,n){this.fieldPath=e,this.kind=n}}class Im{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Im(0,io.min())}}function rT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new Gn(n+1,0):new Gn(n,r));return new io(i,Xe.empty(),e)}function f0(t){return new io(t.readTime,t.key,-1)}class io{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new io(It.min(),Xe.empty(),-1)}static max(){return new io(It.max(),Xe.empty(),-1)}}function p0(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Xe.comparator(t.documentKey,e.documentKey),0!==n?n:Ut(t.largestBatchId,e.largestBatchId))}const iT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ic(t){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,we.Z)(function*(t){if(t.code!==he.FAILED_PRECONDITION||t.message!==iT)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}),Xy.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&n()},_=>r(_))}),l=!0,o===i&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(i=>i?ae.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ae((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let _=0;_<o;_++){const w=_;n(e[w]).next(D=>{l[w]=D,++h,h===o&&r(l)},D=>i(D))}})}static doWhile(e,n){return new ae((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Jy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new hr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Cm(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=oT(r.target.error);this.v.reject(new Cm(e,i))}}static open(e,n,r,i){try{return new Jy(n,e.transaction(i,r))}catch(o){throw new Cm(n,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new jf(n)}}class fa{constructor(e,n,r){this.name=e,this.version=n,this.V=r,12.2===fa.S((0,P.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),lu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,P.hl)())return!1;if(fa.C())return!0;const e=(0,P.z$)(),n=fa.S(e),r=0<n&&n<10,i=fa.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var n=this;return(0,we.Z)(function*(){return n.db||(Ue("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new Cm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Oe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Oe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Cm(e,h))},o.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',l.oldVersion),n.V.O(l.target.result,o.transaction,l.oldVersion,n.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=r=>n.F(r)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,we.Z)(function*(){const l="readonly"===n;let h=0;for(;;){++h;try{o.db=yield o.$(e);const _=Jy.open(o.db,e,l?"readonly":"readwrite",r),w=i(_).next(D=>(_.P(),D)).catch(D=>(_.abort(D),ae.reject(D))).toPromise();return w.catch(()=>{}),yield _.R,w}catch(_){const w=_,D="FirebaseError"!==w.name&&h<3;if(Ue("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),o.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class g0{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return lu(this.L.delete())}}class Cm extends Oe{constructor(e,n){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function dl(t){return"IndexedDbTransactionError"===t.name}class jf{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(Ue("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lu(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),lu(this.store.add(e))}get(e){return lu(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ue("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),lu(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),lu(this.store.count())}j(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(l,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ae((o,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}H(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new ae((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,n){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,l,h)=>h.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Z(e){const n=this.cursor({});return new ae((r,i)=>{n.onerror=o=>{const l=oT(o.target.error);i(l)},n.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,n){const r=[];return new ae((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new g0(h),w=n(h.primaryKey,h.value,_);if(w instanceof ae){const D=w.catch(S=>(_.done(),ae.reject(S)));r.push(D)}_.isDone?i():null===_.K?h.continue():h.continue(_.K)}}).next(()=>ae.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function lu(t){return new ae((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=oT(r.target.error);n(i)}})}let sT=!1;function oT(t){const e=fa.S((0,P.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sT||(sT=!0,setTimeout(()=>{throw r},0)),r}}return t}class m0{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){n.task=null;try{Ue("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(r){dl(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ic(r)}yield n.et(6e4)}))}}class _0{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,we.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.st(r,e))})()}st(e,n){const r=new Set;let i=n,o=!0;return ae.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});o=!1})).next(()=>n-i)}it(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,o)).next(h=>(Ue("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,n,h))).next(()=>l.size)}))}rt(e,n){let r=e;return n.changes.forEach((i,o)=>{const l=f0(o);p0(l,r)>0&&(r=l)}),new io(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let so=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function Hf(t){return null==t}function $f(t){return 0===t&&1/t==-1/0}function aT(t){return"number"==typeof t&&Number.isInteger(t)&&!$f(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function $i(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=v0(e)),e=y0(t.get(n),e);return v0(e)}function y0(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function v0(t){return t+"\x01\x01"}function pa(t){const e=t.length;if(Et(e>=2),2===e)return Et("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),hn.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const l=t.indexOf("\x01",o);switch((l<0||l>n)&&lt(),t.charAt(l+1)){case"\x01":const h=t.substring(o,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=t.substring(o,l),i+="\0";break;case"\x11":i+=t.substring(o,l+1);break;default:lt()}o=l+2}return new hn(r)}const w0=["userId","batchId"];function bm(t,e){return[t,$i(e)]}function cT(t,e,n){return[t,$i(e),n]}const Hx={},$x=["prefixPath","collectionGroup","readTime","documentId"],Gx=["prefixPath","collectionGroup","documentId"],lT=["collectionGroup","readTime","prefixPath","documentId"],QP=["canonicalId","targetId"],uT=["targetId","path"],zx=["path","targetId"],qx=["collectionId","parent"],XP=["indexId","uid"],Wx=["uid","sequenceNumber"],Zx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kx=["indexId","uid","orderedDocumentKey"],Yx=["userId","collectionPath","documentId"],Qx=["userId","collectionPath","largestBatchId"],Xx=["userId","collectionGroup","largestBatchId"],dT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Jx=[...dT,"documentOverlays"],hT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fT=hT,eR=[...fT,"indexConfiguration","indexState","indexEntries"];class E0 extends Qy{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function wr(t,e){const n=tt(t);return fa.M(n.ht,e)}function I0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Un{constructor(e,n){this.comparator=e,this.root=n||Gi.EMPTY}insert(e,n){return new Un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dm(this.root,e,this.comparator,!0)}}class Dm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Gi.RED,this.left=i??Gi.EMPTY,this.right=o??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Gi(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Gi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1,Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Gi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tR(this.data.getIterator())}getIteratorFrom(e){return new tR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qn(this.comparator);return n.data=e,n}}class tR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tm(t){return t.hasNext()?t.getNext():void 0}class Ls{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Ls([])}unionWith(e){let n=new Qn(vr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ls(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class pT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pT("Invalid base64 string: "+i):i}}(e);return new fi(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new fi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const rR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(t){if(Et(!!t),"string"==typeof t){let e=0;const n=rR.exec(t);if(Et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(t.seconds),nanos:Er(t.nanos)}}function Er(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ga(t){return"string"==typeof t?fi.fromBase64String(t):fi.fromUint8Array(t)}function oo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ev(t){const e=t.mapValue.fields.__previous_value__;return oo(e)?ev(e):e}function qd(t){const e=Vo(t.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}class Sm{constructor(e,n,r,i,o,l,h,_,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=_,this.useFetchStreams=w}}class uu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}const du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tv={nullValue:"NULL_VALUE"};function ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oo(t)?4:T0(t)?9007199254740991:10:lt()}function _a(t,e){if(t===e)return!0;const n=ma(t);if(n!==ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qd(t).isEqual(qd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Vo(r.timestampValue),l=Vo(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,ga(t.bytesValue).isEqual(ga(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Er(r.geoPointValue.latitude)===Er(i.geoPointValue.latitude)&&Er(r.geoPointValue.longitude)===Er(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Er(r.integerValue)===Er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Er(r.doubleValue),l=Er(i.doubleValue);return o===l?$f(o)===$f(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Vf(t.arrayValue.values||[],e.arrayValue.values||[],_a);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(I0(o)!==I0(l))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===l[h]||!_a(o[h],l[h])))return!1;return!0}(t,e);default:return lt()}var i}function Am(t,e){return void 0!==(t.values||[]).find(n=>_a(n,e))}function hu(t,e){if(t===e)return 0;const n=ma(t),r=ma(e);if(n!==r)return Ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Er(i.integerValue||i.doubleValue),h=Er(o.integerValue||o.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(t,e);case 3:return nv(t.timestampValue,e.timestampValue);case 4:return nv(qd(t),qd(e));case 5:return Ut(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ga(i),h=ga(o);return l.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),h=o.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=Ut(l[_],h[_]);if(0!==w)return w}return Ut(l.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ut(Er(i.latitude),Er(o.latitude));return 0!==l?l:Ut(Er(i.longitude),Er(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],h=o.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=hu(l[_],h[_]);if(w)return w}return Ut(l.length,h.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===du.mapValue&&o===du.mapValue)return 0;if(i===du.mapValue)return 1;if(o===du.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=o.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Ut(h[D],w[D]);if(0!==S)return S;const k=hu(l[h[D]],_[w[D]]);if(0!==k)return k}return Ut(h.length,w.length)}(t.mapValue,e.mapValue);default:throw lt()}}function nv(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ut(t,e);const n=Vo(t),r=Vo(e),i=Ut(n.seconds,r.seconds);return 0!==i?i:Ut(n.nanos,r.nanos)}function Gf(t){return b0(t)}function b0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Vo(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ga(t.bytesValue).toBase64():"referenceValue"in t?Xe.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=b0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${b0(r.fields[h])}`;return o+"}"}(t.mapValue):lt();var e}function Wd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function D0(t){return!!t&&"integerValue"in t}function zf(t){return!!t&&"arrayValue"in t}function xm(t){return!!t&&"nullValue"in t}function gT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rv(t){return!!t&&"mapValue"in t}function qf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function T0(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function S0(t){return"nullValue"in t?tv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wd(uu.empty(),Xe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:lt()}function mT(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wd(uu.empty(),Xe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?du:lt()}function _T(t,e){const n=hu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function A0(t,e){const n=hu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qf(n)}setAll(e){let n=vr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const _=this.getFieldsMap(n);this.applyChanges(_,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=qf(l):i.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());rv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _a(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){hl(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ti(qf(this.value))}}function yT(t){const e=[];return hl(t.fields,(n,r)=>{const i=new vr([n]);if(rv(r)){const o=yT(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Ls(e)}class Xn{constructor(e,n,r,i,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Xn(e,0,It.min(),It.min(),It.min(),Ti.empty(),0)}static newFoundDocument(e,n,r,i){return new Xn(e,1,n,It.min(),r,i,0)}static newNoDocument(e,n){return new Xn(e,2,n,It.min(),It.min(),Ti.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,It.min(),It.min(),Ti.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sc{constructor(e,n){this.position=e,this.inclusive=n}}function iv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(r=o.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),n.key):hu(l,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function M0(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_a(t.position[n],e.position[n]))return!1;return!0}class fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function x0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class vT{}class sn extends vT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new ET(e,n,r):"array-contains"===n?new CT(e,r):"in"===n?new ns(e,r):"not-in"===n?new Zf(e,r):"array-contains-any"===n?new sR(e,r):new sn(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new IT(e,r):new iR(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(hu(n,this.value)):null!==n&&ma(this.value)===ma(n)&&this.matchesComparison(hu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class An extends vT{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new An(e,n)}matches(e){return Wf(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Wf(t){return"and"===t.op}function sv(t){return"or"===t.op}function Rm(t){return R0(t)&&Wf(t)}function R0(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function N0(t){if(t instanceof sn)return t.field.canonicalString()+t.op.toString()+Gf(t.value);if(Rm(t))return t.filters.map(e=>N0(e)).join(",");{const e=t.filters.map(n=>N0(n)).join(",");return`${t.op}(${e})`}}function O0(t,e){return t instanceof sn?(n=t,(r=e)instanceof sn&&n.op===r.op&&n.field.isEqual(r.field)&&_a(n.value,r.value)):t instanceof An?function(n,r){return r instanceof An&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,o,l)=>i&&O0(o,r.filters[l]),!0)}(t,e):void lt();var n,r}function k0(t,e){const n=t.filters.concat(e);return An.create(n,t.op)}function wT(t){return t instanceof sn?`${(e=t).field.canonicalString()} ${e.op} ${Gf(e.value)}`:t instanceof An?function(e){return e.op.toString()+" {"+e.getFilters().map(wT).join(" ,")+"}"}(t):"Filter";var e}class ET extends sn{constructor(e,n,r){super(e,n,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const n=Xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class IT extends sn{constructor(e,n){super(e,"in",n),this.keys=P0(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iR extends sn{constructor(e,n){super(e,"not-in",n),this.keys=P0(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P0(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class CT extends sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zf(n)&&Am(n.arrayValue,this.value)}}class ns extends sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Am(this.value.arrayValue,n)}}class Zf extends sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Am(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Am(this.value.arrayValue,n)}}class sR extends sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Am(this.value.arrayValue,r))}}class oR{constructor(e,n=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.dt=null}}function bT(t,e=null,n=[],r=[],i=null,o=null,l=null){return new oR(t,e,n,r,i,o,l)}function Kf(t){const e=tt(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>N0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gf(r)).join(",")),e.dt=n}return e.dt}function Yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!O0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M0(t.startAt,e.startAt)&&M0(t.endAt,e.endAt)}function Qf(t){return Xe.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function pu(t,e){return t.filters.filter(n=>n instanceof sn&&n.field.isEqual(e))}function DT(t,e,n){let r=tv,i=!0;for(const o of pu(t,e)){let l=tv,h=!0;switch(o.op){case"<":case"<=":l=S0(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=tv}_T({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const l=n.position[o];_T({value:r,inclusive:i},{value:l,inclusive:n.inclusive})<0&&(r=l,i=n.inclusive);break}return{value:r,inclusive:i}}function ov(t,e,n){let r=du,i=!0;for(const o of pu(t,e)){let l=du,h=!0;switch(o.op){case">=":case">":l=mT(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=du}A0({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const l=n.position[o];A0({value:r,inclusive:i},{value:l,inclusive:n.inclusive})>0&&(r=l,i=n.inclusive);break}return{value:r,inclusive:i}}class fl{constructor(e,n=null,r=[],i=[],o=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=_,this.wt=null,this._t=null}}function F0(t,e,n,r,i,o,l,h){return new fl(t,e,n,r,i,o,l,h)}function Xf(t){return new fl(t)}function TT(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function L0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Jf(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function av(t){return null!==t.collectionGroup}function Zd(t){const e=tt(t);if(null===e.wt){e.wt=[];const n=Jf(e),r=L0(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new fu(n)),e.wt.push(new fu(vr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new fu(vr.keyField(),o))}}}return e.wt}function Si(t){const e=tt(t);if(!e._t)if("F"===e.limitType)e._t=bT(e.path,e.collectionGroup,Zd(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of Zd(e))n.push(new fu(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new sc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sc(e.startAt.position,e.startAt.inclusive):null;e._t=bT(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Nm(t,e){e.getFirstInequalityField(),Jf(t);const n=t.filters.concat([e]);return new fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function U0(t,e,n){return new fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ep(t,e){return Yf(Si(t),Si(e))&&t.limitType===e.limitType}function ST(t){return`${Kf(Si(t))}|lt:${t.limitType}`}function cv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>wT(r)).join(", ")}]`),Hf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gf(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gf(r)).join(",")),`Target(${n})`}(Si(t))}; limitType=${t.limitType})`}function oc(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Xe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Zd(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,o,l){const h=iv(i,o,l);return i.inclusive?h<=0:h<0}(n.startAt,Zd(n),r)||n.endAt&&!function(i,o,l){const h=iv(i,o,l);return i.inclusive?h>=0:h>0}(n.endAt,Zd(n),r)));var n,r}function AT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function V0(t){return(e,n)=>{let r=!1;for(const i of Zd(t)){const o=B0(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function B0(t,e,n){const r=t.field.isKeyField()?Xe.comparator(e.key,n.key):function(i,o,l){const h=o.data.field(i),_=l.data.field(i);return null!==h&&null!==_?hu(h,_):lt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}class gu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hl(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return C0(this.inner)}size(){return this.innerSize}}const aR=new Un(Xe.comparator);function ao(){return aR}const MT=new Un(Xe.comparator);function Om(...t){let e=MT;for(const n of t)e=e.insert(n.key,n);return e}function xT(t){let e=MT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ya(){return km()}function j0(){return km()}function km(){return new gu(t=>t.toString(),(t,e)=>t.isEqual(e))}const RT=new Un(Xe.comparator),NT=new Qn(Xe.comparator);function qt(...t){let e=NT;for(const n of t)e=e.add(n);return e}const cR=new Qn(Ut);function lv(){return cR}function OT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$f(e)?"-0":e}}function H0(t){return{integerValue:""+t}}function $0(t,e){return aT(e)?H0(e):OT(t,e)}class Pm{constructor(){this._=void 0}}function kT(t,e,n){return t instanceof Fm?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&oo(i)&&(i=ev(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof mu?uR(t,e):t instanceof tp?dR(t,e):function(r,i){const o=PT(r,i),l=hR(o)+hR(r.gt);return D0(o)&&D0(r.gt)?H0(l):OT(r.serializer,l)}(t,e)}function lR(t,e,n){return t instanceof mu?uR(t,e):t instanceof tp?dR(t,e):n}function PT(t,e){return t instanceof Lm?D0(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Fm extends Pm{}class mu extends Pm{constructor(e){super(),this.elements=e}}function uR(t,e){const n=fR(e);for(const r of t.elements)n.some(i=>_a(i,r))||n.push(r);return{arrayValue:{values:n}}}class tp extends Pm{constructor(e){super(),this.elements=e}}function dR(t,e){let n=fR(e);for(const r of t.elements)n=n.filter(i=>!_a(i,r));return{arrayValue:{values:n}}}class Lm extends Pm{constructor(e,n){super(),this.serializer=e,this.gt=n}}function hR(t){return Er(t.integerValue||t.doubleValue)}function fR(t){return zf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class uv{constructor(e,n){this.field=e,this.transform=n}}class e1{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function np(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Um{}function FT(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Bm(t.key,Jn.none()):new rp(t.key,t.data,Jn.none());{const n=t.data,r=Ti.empty();let i=new Qn(vr.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);null===l&&o.length>1&&(o=o.popLast(),l=n.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new ac(t.key,r,new Ls(i.toArray()),Jn.none())}}function dv(t,e,n){t instanceof rp?function(r,i,o){const l=r.value.clone(),h=UT(r.fieldTransforms,i,o.transformResults);l.setAll(h),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ac?function(r,i,o){if(!np(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=UT(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(LT(r)),h.setAll(l),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Vm(t,e,n,r){return t instanceof rp?function(i,o,l,h){if(!np(i.precondition,o))return l;const _=i.value.clone(),w=VT(i.fieldTransforms,h,o);return _.setAll(w),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null}(t,e,n,r):t instanceof ac?function(i,o,l,h){if(!np(i.precondition,o))return l;const _=VT(i.fieldTransforms,h,o),w=o.data;return w.setAll(LT(i)),w.setAll(_),o.convertToFoundDocument(o.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(t,e,n,r):(l=n,np(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function t1(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=PT(r.transform,i||null);null!=o&&(null===n&&(n=Ti.empty()),n.set(r.field,o))}return n||null}function pR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Vf(n,r,(i,o)=>function JP(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof mu&&r instanceof mu||n instanceof tp&&r instanceof tp?Vf(n.elements,r.elements,_a):n instanceof Lm&&r instanceof Lm?_a(n.gt,r.gt):n instanceof Fm&&r instanceof Fm);var n,r}(i,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class rp extends Um{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ac extends Um{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function UT(t,e,n){const r=new Map;Et(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,lR(l,h,n[i]))}return r}function VT(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,kT(o,l,e))}return r}class Bm extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G0 extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&dv(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=j0();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(i.key)?null:h;const _=FT(l,h);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qt())}isEqual(e){return this.batchId===e.batchId&&Vf(this.mutations,e.mutations,(n,r)=>pR(n,r))&&Vf(this.baseMutations,e.baseMutations,(n,r)=>pR(n,r))}}class fv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Et(e.mutations.length===r.length);let i=RT;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new fv(e,n,r,i)}}class BT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jT{constructor(e,n){this.count=e,this.unchangedNames=n}}var ei,yn;function rs(t){switch(t){default:return lt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function HT(t){if(void 0===t)return kr("GRPC error has no .code"),he.UNKNOWN;switch(t){case ei.OK:return he.OK;case ei.CANCELLED:return he.CANCELLED;case ei.UNKNOWN:return he.UNKNOWN;case ei.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case ei.INTERNAL:return he.INTERNAL;case ei.UNAVAILABLE:return he.UNAVAILABLE;case ei.UNAUTHENTICATED:return he.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case ei.NOT_FOUND:return he.NOT_FOUND;case ei.ALREADY_EXISTS:return he.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return he.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case ei.ABORTED:return he.ABORTED;case ei.OUT_OF_RANGE:return he.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return he.UNIMPLEMENTED;case ei.DATA_LOSS:return he.DATA_LOSS;default:return lt()}}(yn=ei||(ei={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class jm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return pv}static getOrCreateInstance(){return null===pv&&(pv=new jm),pv}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let pv=null;function $T(){return new TextEncoder}const z0=new wm([4294967295,4294967295],0);function q0(t){const e=$T().encode(t),n=new KP;return n.update(e),new Uint8Array(n.digest())}function W0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wm([n,r],0),new wm([i,o],0)]}class Z0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ip(`Invalid padding: ${n}`);if(r<0)throw new ip(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ip(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new ip(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=wm.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(wm.fromNumber(r)));return 1===i.compare(z0)&&(i=new wm([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=q0(e),[r,i]=W0(n);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);if(!this.At(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Z0(o,i,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const n=q0(e),[r,i]=W0(n);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);this.Rt(l)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class ip extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sp{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sp(It.min(),i,new Un(Ut),ao(),qt())}}class op{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new op(r,n,qt(),qt(),qt())}}class Hm{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class GT{constructor(e,n){this.targetId=e,this.Vt=n}}class K0{constructor(e,n,r=fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zT{constructor(){this.St=0,this.Dt=Q0(),this.Ct=fi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),n=qt(),r=qt();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new op(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=Q0()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Y0{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ao(),this.zt=pl(),this.Wt=new Un(Ut)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:lt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const l=o.target;if(Qf(l))if(0===i){const h=new Xe(l.path);this.Yt(r,h,Xn.newNoDocument(h,It.min()))}else Et(1===i);else{const h=this.ie(r);if(h!==i){const _=this.re(e,h);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=jm.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(w,D,S){var k,B,W,le,pe,$e;const nt={localCacheCount:D,existenceFilterCount:S.count},Qe=S.unchangedNames;return Qe&&(nt.bloomFilter={applied:0===w,hashCount:null!==(k=Qe?.hashCount)&&void 0!==k?k:0,bitmapLength:null!==(le=null===(W=null===(B=Qe?.bits)||void 0===B?void 0:B.bitmap)||void 0===W?void 0:W.length)&&void 0!==le?le:0,padding:null!==($e=null===(pe=Qe?.bits)||void 0===pe?void 0:pe.padding)&&void 0!==$e?$e:0}),nt}(_,h,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:h=0}=r;let _,w;try{_=ga(o).toUint8Array()}catch(D){if(D instanceof pT)return Uo("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{w=new Z0(_,l,h)}catch(D){return Uo(D instanceof ip?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===w.It?1:i!==n-this.oe(e.targetId,w)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;n.vt(h)||(this.Yt(e,o,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((o,l)=>{const h=this.se(l);if(h){if(o.current&&Qf(h.target)){const _=new Xe(h.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,Xn.newNoDocument(_,e))}o.Mt&&(n.set(l,o.Ot()),o.Ft())}});let r=qt();this.zt.forEach((o,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.se(_);return!w||"TargetPurposeLimboResolution"===w.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.jt.forEach((o,l)=>l.setReadTime(e));const i=new sp(e,n,this.Wt,this.jt,r);return this.jt=ao(),this.zt=pl(),this.Wt=new Un(Ut),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new zT,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Qn(Ut),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new zT),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function pl(){return new Un(Xe.comparator)}function Q0(){return new Un(Xe.comparator)}const X0={asc:"ASCENDING",desc:"DESCENDING"},J0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gR={and:"AND",or:"OR"};class n1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gv(t,e){return t.useProto3Json||Hf(e)?e:{value:e}}function ap(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mR(t,e){return ap(t,e.toTimestamp())}function Pr(t){return Et(!!t),It.fromTimestamp(function(e){const n=Vo(e);return new Gn(n.seconds,n.nanos)}(t))}function mv(t,e){return(n=t,new hn(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function _R(t){const e=hn.fromString(t);return Et(XT(e)),e}function cp(t,e){return mv(t.databaseId,e.path)}function cc(t,e){const n=_R(e);if(n.get(1)!==t.databaseId.projectId)throw new Oe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Xe(eI(n))}function _v(t,e){return mv(t.databaseId,e)}function yR(t){const e=_R(t);return 4===e.length?hn.emptyPath():eI(e)}function Kd(t){return new hn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eI(t){return Et(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function tI(t,e,n){return{name:cp(t,e),fields:n.value.mapValue.fields}}function WT(t,e,n){const r=cc(t,e.name),i=Pr(e.updateTime),o=e.createTime?Pr(e.createTime):It.min(),l=new Ti({mapValue:{fields:e.fields}}),h=Xn.newFoundDocument(r,i,o,l);return n&&h.setHasCommittedMutations(),n?h.setHasCommittedMutations():h}function lc(t,e){let n;if(e instanceof rp)n={update:tI(t,e.key,e.value)};else if(e instanceof Bm)n={delete:cp(t,e.key)};else if(e instanceof ac)n={update:tI(t,e.key,e.data),updateMask:ER(e.fieldMask)};else{if(!(e instanceof G0))return lt();n={verify:cp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Fm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof mu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof tp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Lm)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw lt()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:mR(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),n;var i}function lp(t,e){const n=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Jn.updateTime(Pr(i.updateTime)):void 0!==i.exists?Jn.exists(i.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let h=null;"setToServerValue"in l?(Et("REQUEST_TIME"===l.setToServerValue),h=new Fm):"appendMissingElements"in l?h=new mu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new tp(l.removeAllFromArray.values||[]):"increment"in l?h=new Lm(o,l.increment):lt();const _=vr.fromServerFormat(l.fieldPath);return new uv(_,h)}(t,i)):[];var i;if(e.update){const i=cc(t,e.update.name),o=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ls((e.updateMask.fieldPaths||[]).map(w=>vr.fromServerFormat(w)));return new ac(i,o,l,n,r)}return new rp(i,o,n,r)}if(e.delete){const i=cc(t,e.delete);return new Bm(i,n)}if(e.verify){const i=cc(t,e.verify);return new G0(i,n)}return lt()}function nI(t,e){return{documents:[_v(t,e.path)]}}function rI(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=_v(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=_v(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return sI(An.create(_,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(_){if(0!==_.length)return _.map(w=>{return{field:Yd((D=w).field),direction:vR(D.dir)};var D})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=gv(t,e.limit);var h,_;return null!==l&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(n.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),n}function QT(t){let e=yR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(1===r);const D=n.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let o=[];n.where&&(o=function(D){const S=iI(D);return S instanceof An&&Rm(S)?S.getFilters():[S]}(n.where));let l=[];n.orderBy&&(l=n.orderBy.map(D=>{return new fu($m((S=D).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;n.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Hf(S)?null:S}(n.limit));let _=null;var D;n.startAt&&(_=new sc((D=n.startAt).values||[],!!D.before));let w=null;return n.endAt&&(w=function(D){return new sc(D.values||[],!D.before)}(n.endAt)),F0(e,i,l,o,h,"F",_,w)}function iI(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=$m(e.unaryFilter.field);return sn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=$m(e.unaryFilter.field);return sn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$m(e.unaryFilter.field);return sn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$m(e.unaryFilter.field);return sn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(t):void 0!==t.fieldFilter?sn.create($m((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return An.create(e.compositeFilter.filters.map(n=>iI(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(t):lt();var e}function vR(t){return X0[t]}function wR(t){return J0[t]}function s1(t){return gR[t]}function Yd(t){return{fieldPath:t.canonicalString()}}function $m(t){return vr.fromServerFormat(t.fieldPath)}function sI(t){return t instanceof sn?function(e){if("=="===e.op){if(gT(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NAN"}};if(xm(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gT(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NOT_NAN"}};if(xm(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yd(e.field),op:wR(e.op),value:e.value}}}(t):t instanceof An?function(e){const n=e.getFilters().map(r=>sI(r));return 1===n.length?n[0]:{compositeFilter:{op:s1(e.op),filters:n}}}(t):lt()}function ER(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XT(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class gl{constructor(e,n,r,i,o=It.min(),l=It.min(),h=fi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=_}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IR{constructor(e){this.fe=e}}function CR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cp(i=t.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:ap(i,o.version.toTimestamp()),createTime:ap(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:up(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:n.path.toArray(),version:up(e.version)}}var i,o;return r}function oI(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function up(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qd(t){const e=new Gn(t.seconds,t.nanoseconds);return It.fromTimestamp(e)}function uc(t,e){const n=(e.baseMutations||[]).map(o=>lp(t.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>lp(t.fe,o)),i=Gn.fromMillis(e.localWriteTimeMs);return new hv(e.batchId,i,n,r)}function Gm(t){const e=Qd(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Qd(t.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==t.query.documents?(Et(1===(i=t.query).documents.length),r=Si(Xf(yR(i.documents[0])))):r=Si(QT(t.query)),new gl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,fi.fromBase64String(t.resumeToken))}function JT(t,e){const n=up(e.snapshotVersion),r=up(e.lastLimboFreeSnapshotVersion);let i;i=Qf(e.target)?nI(t.fe,e.target):rI(t.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kf(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yv(t){const e=QT({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?U0(e,e.limit,"L"):e}function ml(t,e){return new BT(e.largestBatchId,lp(t.fe,e.overlayMutation))}function aI(t,e){const n=e.path.lastSegment();return[t,$i(e.path.popLast()),n]}function vv(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:up(r.readTime),documentKey:$i(r.documentKey.path),largestBatchId:r.largestBatchId}}class cI{getBundleMetadata(e,n){return eS(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Qd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return eS(e).put({bundleId:(r=n).id,createTime:up(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return wv(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:yv(i.bundledQuery),readTime:Qd(i.readTime)};var i})}saveNamedQuery(e,n){return wv(e).put({name:(r=n).name,readTime:up(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eS(t){return wr(t,"bundles")}function wv(t){return wr(t,"namedQueries")}class dp{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new dp(e,n.uid||"")}getOverlay(e,n){return _u(e).get(aI(this.userId,n)).next(r=>r?ml(this.serializer,r):null)}getOverlays(e,n){const r=ya();return ae.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,l)=>{const h=new BT(n,l);i.push(this.we(e,h))}),ae.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(l=>i.add($i(l.getCollectionPath())));const o=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(_u(e).J("collectionPathOverlayIndex",h))}),ae.waitFor(o)}getOverlaysForCollection(e,n,r){const i=ya(),o=$i(n),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return _u(e).j("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=ml(this.serializer,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=ya();let l;const h=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return _u(e).X({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=ml(this.serializer,w);o.size()<i||S.largestBatchId===l?(o.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>o)}we(e,n){return _u(e).put(function(r,i,o){const[l,h,_]=aI(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lc(r.fe,o.mutation)}}(this.serializer,this.userId,n))}}function _u(t){return wr(t,"documentOverlays")}class hp{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Er(e.integerValue));else if("doubleValue"in e){const r=Er(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),$f(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(ga(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?T0(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):lt()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),Xe.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function a1(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bR(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const o=a1(255&n[i]);if(r+=o,8!==o)break}return r}(t);return Math.ceil(e/8)}hp.Ve=new hp;class tS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.De(r.value),r=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ne(r.value),r=n.next();this.ke()}Me(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=n.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=n.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const n=this.Fe(e),r=bR(n);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Le(e){const n=this.Fe(e),r=bR(n);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class DR{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class TR{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class zm{constructor(){this.je=new tS,this.ze=new DR(this.je),this.We=new TR(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Xd{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xd(this.indexId,this.documentKey,this.arrayValue,r)}}function _l(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=lI(t.arrayValue,e.arrayValue),0!==n?n:(n=lI(t.directionalValue,e.directionalValue),0!==n?n:Xe.comparator(t.documentKey,e.documentKey)))}function lI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class nS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const r=n;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Et(e.collectionGroup===this.collectionId);const n=h0(e);if(void 0!==n&&!this.en(n))return!1;const r=zd(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[o];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[l++],h))return!1}++o}for(;o<r.length;++o)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[o]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function rS(t){var e,n;if(Et(t instanceof sn||t instanceof An),t instanceof sn){if(t instanceof ns){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>sn.create(t.field,"==",o)))||[];return An.create(i,"or")}return t}const r=t.filters.map(i=>rS(i));return An.create(r,t.op)}function SR(t){if(0===t.getFilters().length)return[];const e=Iv(rS(t));return Et(AR(e)),Ev(e)||qm(e)?[e]:e.getFilters()}function Ev(t){return t instanceof sn}function qm(t){return t instanceof An&&Rm(t)}function AR(t){return Ev(t)||qm(t)||function(e){if(e instanceof An&&sv(e)){for(const n of e.getFilters())if(!Ev(n)&&!qm(n))return!1;return!0}return!1}(t)}function Iv(t){if(Et(t instanceof sn||t instanceof An),t instanceof sn)return t;if(1===t.filters.length)return Iv(t.filters[0]);const e=t.filters.map(r=>Iv(r));let n=An.create(e,t.op);return n=Cv(n),AR(n)?n:(Et(n instanceof An),Et(Wf(n)),Et(n.filters.length>1),n.filters.reduce((r,i)=>Wm(r,i)))}function Wm(t,e){let n;return Et(t instanceof sn||t instanceof An),Et(e instanceof sn||e instanceof An),n=t instanceof sn?e instanceof sn?An.create([t,e],"and"):iS(t,e):e instanceof sn?iS(e,t):function(r,i){if(Et(r.filters.length>0&&i.filters.length>0),Wf(r)&&Wf(i))return k0(r,i.getFilters());const o=sv(r)?r:i,l=sv(r)?i:r,h=o.filters.map(_=>Wm(_,l));return An.create(h,"or")}(t,e),Cv(n)}function iS(t,e){if(Wf(e))return k0(e,t.getFilters());{const n=e.filters.map(r=>Wm(t,r));return An.create(n,"or")}}function Cv(t){if(Et(t instanceof sn||t instanceof An),t instanceof sn)return t;const e=t.getFilters();if(1===e.length)return Cv(e[0]);if(R0(t))return t;const n=e.map(i=>Cv(i)),r=[];return n.forEach(i=>{i instanceof sn?r.push(i):i instanceof An&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,t.op)}class c1{constructor(){this.rn=new sS}addToCollectionParentIndex(e,n){return this.rn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(io.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(io.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class sS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qn(hn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qn(hn.comparator)).toArray()}}const bv=new Uint8Array(0);class MR{constructor(e,n){this.user=e,this.databaseId=n,this.on=new sS,this.un=new gu(r=>Kf(r),(r,i)=>Yf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const o={collectionId:r,parent:$i(i)};return oS(e).put(o)}return ae.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[tT(n),""],!1,!0);return oS(e).j(i).next(o=>{for(const l of o){if(l.collectionId!==n)break;r.push(pa(l.parent))}return r})}addFieldIndex(e,n){const r=Km(e),i={indexId:(l=n).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const o=r.add(i);if(n.indexState){const l=fp(e);return o.next(h=>{l.put(vv(h,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Km(e),i=fp(e),o=Zm(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Zm(e);let i=!0;const o=new Map;return ae.forEach(this.cn(n),l=>this.an(e,l).next(h=>{i&&(i=!!h),o.set(l,h)})).next(()=>{if(i){let l=qt();const h=[];return ae.forEach(o,(_,w)=>{var D;Ue("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${Kf(n)}`);const S=function(Qe,at){const Rt=h0(at);if(void 0===Rt)return null;for(const Wt of pu(Qe,Rt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(w,_),k=function(Qe,at){const Rt=new Map;for(const Wt of zd(at))for(const Ur of pu(Qe,Wt.fieldPath))switch(Ur.op){case"==":case"in":Rt.set(Wt.fieldPath.canonicalString(),Ur.value);break;case"not-in":case"!=":return Rt.set(Wt.fieldPath.canonicalString(),Ur.value),Array.from(Rt.values())}return null}(w,_),B=function(Qe,at){const Rt=[];let Wt=!0;for(const Ur of zd(at)){const Ho=0===Ur.kind?DT(Qe,Ur.fieldPath,Qe.startAt):ov(Qe,Ur.fieldPath,Qe.startAt);Rt.push(Ho.value),Wt&&(Wt=Ho.inclusive)}return new sc(Rt,Wt)}(w,_),W=function(Qe,at){const Rt=[];let Wt=!0;for(const Ur of zd(at)){const Ho=0===Ur.kind?ov(Qe,Ur.fieldPath,Qe.endAt):DT(Qe,Ur.fieldPath,Qe.endAt);Rt.push(Ho.value),Wt&&(Wt=Ho.inclusive)}return new sc(Rt,Wt)}(w,_),le=this.hn(_,w,B),pe=this.hn(_,w,W),$e=this.ln(_,w,k),nt=this.fn(_.indexId,S,le,B.inclusive,pe,W.inclusive,$e);return ae.forEach(nt,Qe=>r.H(Qe,n.limit).next(at=>{at.forEach(Rt=>{const Wt=Xe.fromSegments(Rt.documentKey);l.has(Wt)||(l=l.add(Wt),h.push(Wt))})}))}).next(()=>h)}return ae.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:SR(An.create(e.filters,"and")).map(r=>bT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,r,i,o,l,h){const _=(null!=n?n.length:1)*Math.max(r.length,o.length),w=_/(null!=n?n.length:1),D=[];for(let S=0;S<_;++S){const k=n?this.dn(n[S/w]):bv,B=this.wn(e,k,r[S%w],i),W=this._n(e,k,o[S%w],l),le=h.map(pe=>this.wn(e,k,pe,!0));D.push(...this.createRange(B,W,le))}return D}wn(e,n,r,i){const o=new Xd(e,Xe.empty(),n,r);return i?o:o.Je()}_n(e,n,r,i){const o=new Xd(e,Xe.empty(),n,r);return i?o.Je():o}an(e,n){const r=new nS(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const h of o)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,n){let r=2;const i=this.cn(n);return ae.forEach(i,o=>this.an(e,o).next(l=>{l?0!==r&&l.fields.length<function(h){let _=new Qn(vr.comparator),w=!1;for(const D of h.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:_=_.add(S.field));for(const D of h.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}mn(e,n){const r=new zm;for(const i of zd(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const l=r.He(i.kind);hp.Ve._e(o,l)}return r.Qe()}dn(e){const n=new zm;return hp.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const r=new zm;return hp.Ve._e(Wd(this.databaseId,n),r.He(function(i){const o=zd(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,n,r){if(null===r)return[];let i=[];i.push(new zm);let o=0;for(const l of zd(e)){const h=r[o++];for(const _ of i)if(this.yn(n,l.fieldPath)&&zf(h))i=this.pn(i,l,h);else{const w=_.He(l.kind);hp.Ve._e(h,w)}}return this.In(i)}hn(e,n,r){return this.ln(e,n,r.position)}In(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Qe();return n}pn(e,n,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new zm;_.seed(h.Qe()),hp.Ve._e(l,_.He(n.kind)),o.push(_)}return o}yn(e,n){return!!e.filters.find(r=>r instanceof sn&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Km(e),i=fp(e);return(n?r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.j()).next(o=>{const l=[];return ae.forEach(o,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,D){const S=D?new Im(D.sequenceNumber,new io(Qd(D.readTime),new Xe(pa(D.documentKey)),D.largestBatchId)):Im.empty(),k=w.fields.map(([B,W])=>new Em(vr.fromServerFormat(B),W));return new Yy(w.indexId,w.collectionGroup,k,S)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Ut(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Km(e),o=fp(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(h=>ae.forEach(h,_=>o.put(vv(_.indexId,this.user,l,r)))))}updateIndexEntries(e,n){const r=new Map;return ae.forEach(n,(i,o)=>{const l=r.get(i.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ae.forEach(h,_=>this.En(e,i,_).next(w=>{const D=this.An(o,_);return w.isEqual(D)?ae.resolve():this.vn(e,o,_,w,D)}))))})}Rn(e,n,r,i){return Zm(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,r,i){return Zm(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}En(e,n,r){const i=Zm(e);let o=new Qn(_l);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(l,h)=>{o=o.add(new Xd(r.indexId,n,h.arrayValue,h.directionalValue))}).next(()=>o)}An(e,n){let r=new Qn(_l);const i=this.mn(n,e);if(null==i)return r;const o=h0(n);if(null!=o){const l=e.data.field(o.fieldPath);if(zf(l))for(const h of l.arrayValue.values||[])r=r.add(new Xd(n.indexId,e.key,this.dn(h),i))}else r=r.add(new Xd(n.indexId,e.key,bv,i));return r}vn(e,n,r,i,o){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const l=[];return function(h,_,w,D,S){const k=h.getIterator(),B=_.getIterator();let W=Tm(k),le=Tm(B);for(;W||le;){let pe=!1,$e=!1;if(W&&le){const nt=w(W,le);nt<0?$e=!0:nt>0&&(pe=!0)}else null!=W?$e=!0:pe=!0;pe?(D(le),le=Tm(B)):$e?(S(W),W=Tm(k)):(W=Tm(k),le=Tm(B))}}(i,o,_l,h=>{l.push(this.Rn(e,n,r,h))},h=>{l.push(this.Pn(e,n,r,h))}),ae.waitFor(l)}Tn(e){let n=1;return fp(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((l,h)=>_l(l,h)).filter((l,h,_)=>!h||0!==_l(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=_l(l,e),_=_l(l,n);if(0===h)i[0]=e.Je();else if(h>0&&_<0)i.push(l),i.push(l.Je());else if(_>0)break}i.push(n);const o=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,bv,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,bv,[]]))}return o}bn(e,n){return _l(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(xR)}getMinOffset(e,n){return ae.mapArray(this.cn(n),r=>this.an(e,r).next(i=>i||lt())).next(xR)}}function oS(t){return wr(t,"collectionParents")}function Zm(t){return wr(t,"indexEntries")}function Km(t){return wr(t,"indexConfiguration")}function fp(t){return wr(t,"indexState")}function xR(t){Et(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;p0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new io(e.readTime,e.documentKey,n)}const aS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ai{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ai(e,Ai.DEFAULT_COLLECTION_PERCENTILE,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uI(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],l=IDBKeyRange.only(n.batchId);let h=0;const _=r.X({range:l},(D,S,k)=>(h++,k.delete()));o.push(_.next(()=>{Et(1===h)}));const w=[];for(const D of n.mutations){const S=cT(e,D.key.path,n.batchId);o.push(i.delete(S)),w.push(D.key)}return ae.waitFor(o).next(()=>w)}function Ym(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lt();e=t.noDocument}return JSON.stringify(e).length}Ai.DEFAULT_COLLECTION_PERCENTILE=10,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ai.DEFAULT=new Ai(41943040,Ai.DEFAULT_COLLECTION_PERCENTILE,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ai.DISABLED=new Ai(-1,0,0);class Dv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,n,r,i){Et(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Dv(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).X({index:"userMutationsIndex",range:r},(i,o,l)=>{n=!1,l.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=pp(e),l=yu(e);return l.add({}).next(h=>{Et("number"==typeof h);const _=new hv(h,n,r,i),w=function(k,B,W){const le=W.baseMutations.map($e=>lc(k.fe,$e)),pe=W.mutations.map($e=>lc(k.fe,$e));return{userId:B,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:le,mutations:pe}}(this.serializer,this.userId,_),D=[];let S=new Qn((k,B)=>Ut(k.canonicalString(),B.canonicalString()));for(const k of i){const B=cT(this.userId,k.key.path,h);S=S.add(k.key.path.popLast()),D.push(l.put(w)),D.push(o.put(B,Hx))}return S.forEach(k=>{D.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Vn[h]=_.keys()}),ae.waitFor(D).next(()=>_)})}lookupMutationBatch(e,n){return yu(e).get(n).next(r=>r?(Et(r.userId===this.userId),uc(this.serializer,r)):null)}Sn(e,n){return this.Vn[n]?ae.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return yu(e).X({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(Et(h.batchId>=r),o=uc(this.serializer,h)),_.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yu(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).j("userMutationsIndex",n).next(r=>r.map(i=>uc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=bm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return pp(e).X({range:i},(l,h,_)=>{const[w,D,S]=l,k=pa(D);if(w===this.userId&&n.path.isEqual(k))return yu(e).get(S).next(B=>{if(!B)throw lt();Et(B.userId===this.userId),o.push(uc(this.serializer,B))});_.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qn(Ut);const i=[];return n.forEach(o=>{const l=bm(this.userId,o.path),h=IDBKeyRange.lowerBound(l),_=pp(e).X({range:h},(w,D,S)=>{const[k,B,W]=w,le=pa(B);k===this.userId&&o.path.isEqual(le)?r=r.add(W):S.done()});i.push(_)}),ae.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=bm(this.userId,r),l=IDBKeyRange.lowerBound(o);let h=new Qn(Ut);return pp(e).X({range:l},(_,w,D)=>{const[S,k,B]=_,W=pa(k);S===this.userId&&r.isPrefixOf(W)?W.length===i&&(h=h.add(B)):D.done()}).next(()=>this.Dn(e,h))}Dn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(yu(e).get(o).next(l=>{if(null===l)throw lt();Et(l.userId===this.userId),r.push(uc(this.serializer,l))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return uI(e.ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return pp(e).X({range:r},(o,l,h)=>{if(o[0]===this.userId){const _=pa(o[1]);i.push(_)}else h.done()}).next(()=>{Et(0===i.length)})})}containsKey(e,n){return Tv(e,this.userId,n)}xn(e){return dI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Tv(t,e,n){const r=bm(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return pp(t).X({range:o,Y:!0},(h,_,w)=>{const[D,S,k]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function yu(t){return wr(t,"mutations")}function pp(t){return wr(t,"documentMutations")}function dI(t){return wr(t,"mutationQueues")}class vu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vu(0)}static Mn(){return new vu(-1)}}class l1{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const r=new vu(n.highestTargetId);return n.highestTargetId=r.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>It.fromTimestamp(new Gn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.On(e,i)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(n,r),this.On(e,r))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>gp(e).delete(n.targetId)).next(()=>this.$n(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return gp(e).X((l,h)=>{const _=Gm(h);_.sequenceNumber<=n&&null===r.get(_.targetId)&&(i++,o.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(o)).next(()=>i)}forEachTarget(e,n){return gp(e).X((r,i)=>{const o=Gm(i);n(o)})}$n(e){return Qm(e).get("targetGlobalKey").next(n=>(Et(null!==n),n))}On(e,n){return Qm(e).put("targetGlobalKey",n)}Fn(e,n){return gp(e).put(JT(this.serializer,n))}Bn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Kf(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return gp(e).X({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=Gm(h);Yf(n,w.target)&&(o=w,_.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=Jd(e);return n.forEach(l=>{const h=$i(l.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(i)}removeMatchingKeys(e,n,r){const i=Jd(e);return ae.forEach(n,o=>{const l=$i(o.path);return ae.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=Jd(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Jd(e);let o=qt();return i.X({range:r,Y:!0},(l,h,_)=>{const w=pa(l[1]),D=new Xe(w);o=o.add(D)}).next(()=>o)}containsKey(e,n){const r=$i(n.path),i=IDBKeyRange.bound([r],[tT(r)],!1,!0);let o=0;return Jd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],_,w)=>{0!==l&&(o++,w.done())}).next(()=>o>0)}le(e,n){return gp(e).get(n).next(r=>r?Gm(r):null)}}function gp(t){return wr(t,"targets")}function Qm(t){return wr(t,"targetGlobal")}function Jd(t){return wr(t,"targetDocuments")}function cS([t,e],[n,r]){const i=Ut(t,n);return 0===i?Ut(e,r):i}class u1{constructor(e){this.Ln=e,this.buffer=new Qn(cS),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){dl(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ic(r)}yield n.Qn(3e5)}))}}class NR{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return ae.resolve(so.ct);const r=new u1(n);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(aS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aS):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let r,i,o,l,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,n))).next(S=>(o=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),c0()<=gs.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${o} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class d1{constructor(e,n){this.db=e,this.garbageCollector=function OR(t,e){return new NR(t,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Jn(e){let n=0;return this.Wn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(r,i)=>n(i))}addReference(e,n,r){return hI(e,r)}removeReference(e,n,r){return hI(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return hI(e,n)}Xn(e,n){return function(r,i){let o=!1;return dI(r).Z(l=>Tv(r,l,i).next(h=>(h&&(o=!0),ae.resolve(!h)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(l,h)=>{if(h<=n){const _=this.Xn(e,l).next(w=>{if(!w)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),Jd(e).delete([0,$i(l.path)])))});i.push(_)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return hI(e,n)}Yn(e,n){const r=Jd(e);let i,o=so.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(o!==so.ct&&n(new Xe(pa(i)),o),o=w,i=_):o=so.ct}).next(()=>{o!==so.ct&&n(new Xe(pa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hI(t,e){return Jd(t).put((r=t.currentSequenceNumber,{targetId:0,path:$i(e.path),sequenceNumber:r}));var r}class kR{constructor(){this.changes=new gu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class h1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mp(e).put(r)}removeEntry(e,n,r){return mp(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oI(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Zn(e,r)))}getEntry(e,n){let r=Xn.newInvalidDocument(n);return mp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sv(n))},(i,o)=>{r=this.ts(n,o)}).next(()=>r)}es(e,n){let r={size:0,document:Xn.newInvalidDocument(n)};return mp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sv(n))},(i,o)=>{r={document:this.ts(n,o),size:Ym(o)}}).next(()=>r)}getEntries(e,n){let r=ao();return this.ns(e,n,(i,o)=>{const l=this.ts(i,o);r=r.insert(i,l)}).next(()=>r)}ss(e,n){let r=ao(),i=new Un(Xe.comparator);return this.ns(e,n,(o,l)=>{const h=this.ts(o,l);r=r.insert(o,h),i=i.insert(o,Ym(l))}).next(()=>({documents:r,rs:i}))}ns(e,n,r){if(n.isEmpty())return ae.resolve();let i=new Qn(uS);n.forEach(_=>i=i.add(_));const o=IDBKeyRange.bound(Sv(i.first()),Sv(i.last())),l=i.getIterator();let h=l.getNext();return mp(e).X({index:"documentKeyIndex",range:o},(_,w,D)=>{const S=Xe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&uS(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.G(Sv(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),oI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mp(e).j(IDBKeyRange.bound(l,h,!0)).next(_=>{let w=ao();for(const D of _){const S=this.ts(Xe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(oc(n,S)||i.has(S.key))&&(w=w.insert(S.key,S))}return w})}getAllFromCollectionGroup(e,n,r,i){let o=ao();const l=FR(n,r),h=FR(n,io.max());return mp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,D)=>{const S=this.ts(Xe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);o=o.insert(S.key,S),o.size===i&&D.done()}).next(()=>o)}newChangeBuffer(e){return new f1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return PR(e).get("remoteDocumentGlobalKey").next(n=>(Et(!!n),n))}Zn(e,n){return PR(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const r=function o1(t,e){let n;if(e.document)n=WT(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Qd(e.noDocument.readTime);n=Xn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Xe.fromSegments(e.unknownDocument.path),i=Qd(e.unknownDocument.version);n=Xn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Gn(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Xn.newInvalidDocument(e)}}function lS(t){return new h1(t)}class f1 extends kR{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new gu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Qn((o,l)=>Ut(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const h=this.us.get(o);if(n.push(this.os.removeEntry(e,o,h.readTime)),l.isValidDocument()){const _=CR(this.os.serializer,l);i=i.add(o.path.popLast());const w=Ym(_);r+=w-h.size,n.push(this.os.addEntry(e,o,_))}else if(r-=h.size,this.trackRemovals){const _=CR(this.os.serializer,l.convertToNoDocument(It.min()));n.push(this.os.addEntry(e,o,_))}}),i.forEach(o=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.os.updateMetadata(e,r)),ae.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(r=>(this.us.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:r,rs:i})=>(i.forEach((o,l)=>{this.us.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function PR(t){return wr(t,"remoteDocumentGlobal")}function mp(t){return wr(t,"remoteDocumentsV14")}function Sv(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function FR(t,e){const n=e.documentKey.path.toArray();return[t,oI(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uS(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ut(n[o],r[o]),i)return i;return i=Ut(n.length,r.length),i||(i=Ut(n[n.length-2],r[r.length-2]),i||Ut(n[n.length-1],r[r.length-1]))}class p1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class s{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Vm(r.mutation,i,Ls.empty(),Gn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=qt()){const i=ya();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let l=Om();return o.forEach((h,_)=>{l=l.insert(h,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=ya();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,qt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,i){let o=ao();const l=km(),h=km();return n.forEach((_,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof ac)?o=o.insert(w.key,w):void 0!==D?(l.set(w.key,D.mutation.getFieldMask()),Vm(D.mutation,w,D.mutation.getFieldMask(),Gn.now())):l.set(w.key,Ls.empty())}),this.recalculateAndSaveOverlays(e,o).next(_=>(_.forEach((w,D)=>l.set(w,D)),n.forEach((w,D)=>{var S;return h.set(w,new p1(D,null!==(S=l.get(w))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,n){const r=km();let i=new Un((l,h)=>l-h),o=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(_=>{const w=n.get(_);if(null===w)return;let D=r.get(_)||Ls.empty();D=h.applyToLocalView(w,D),r.set(_,D);const S=(i.get(h.batchId)||qt()).add(_);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,D=_.value,S=j0();D.forEach(k=>{if(!o.has(k)){const B=FT(n.get(k),r.get(k));null!==B&&S.set(k,B),o=o.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return Xe.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):av(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ae.resolve(ya());let h=-1,_=o;return l.next(w=>ae.forEach(w,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),o.get(D)?ae.resolve():this.remoteDocumentCache.getEntry(e,D).next(k=>{_=_.insert(D,k)}))).next(()=>this.populateOverlays(e,w,o)).next(()=>this.computeViews(e,_,w,qt())).next(D=>({batchId:h,changes:xT(D)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Xe(n)).next(r=>{let i=Om();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let o=Om();return this.indexManager.getCollectionParents(e,i).next(l=>ae.forEach(l,h=>{const _=(w=n,D=h.child(i),new fl(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((D,S)=>{o=o.insert(D,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(o=>{i.forEach((h,_)=>{const w=_.getKey();null===o.get(w)&&(o=o.insert(w,Xn.newInvalidDocument(w)))});let l=Om();return o.forEach((h,_)=>{const w=i.get(h);void 0!==w&&Vm(w.mutation,_,Ls.empty(),Gn.now()),oc(n,_)&&(l=l.insert(h,_))}),l})}}class a{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return ae.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Pr(r.createTime)}),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:yv(r.bundledQuery),readTime:Pr(r.readTime)}),ae.resolve();var r}}class c{constructor(){this.overlays=new Un(Xe.comparator),this.ls=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ya();return ae.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.we(e,n,o)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const i=ya(),o=n.length+1,l=new Xe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===o&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Un((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>r){let D=o.get(w.largestBatchId);null===D&&(D=ya(),o=o.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=ya(),_=o.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return ae.resolve(h)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new BT(n,r));let o=this.ls.get(n);void 0===o&&(o=qt(),this.ls.set(n,o)),this.ls.set(n,o.add(r.key))}}class u{constructor(){this.fs=new Qn(d.ds),this.ws=new Qn(d._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new d(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new d(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new Xe(new hn([])),r=new d(n,e),i=new d(n,e+1),o=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),o.push(l.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new Xe(new hn([])),r=new d(n,e),i=new d(n,e+1);let o=qt();return this.ws.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new d(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class d{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return Xe.comparator(e.key,n.key)||Ut(e.As,n.As)}static _s(e,n){return Ut(e.As,n.As)||Xe.comparator(e.key,n.key)}}class g{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Qn(d.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.vs;this.vs++;const l=new hv(o,n,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new d(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,n){return ae.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),o=i<0?0:i;return ae.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new d(n,0),i=new d(n,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);o.push(h)}),ae.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qn(Ut);return n.forEach(i=>{const o=new d(i,0),l=new d(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],h=>{r=r.add(h.As)})}),ae.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Xe.isDocumentKey(o)||(o=o.child(""));const l=new d(new Xe(o),0);let h=new Qn(Ut);return this.Rs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.As)),!0)},l),ae.resolve(this.Vs(h))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Et(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ae.forEach(n.mutations,i=>{const o=new d(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new d(n,0),i=this.Rs.firstAfterOrEqual(r);return ae.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class y{constructor(e){this.Ds=e,this.docs=new Un(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let r=ao();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xn.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ao();const l=n.path,h=new Xe(l.child("")),_=this.docs.getIteratorFrom(h);for(;_.hasNext();){const{key:w,value:{document:D}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||p0(f0(D),r)<=0||(i.has(D.key)||oc(n,D))&&(o=o.insert(D.key,D.mutableCopy()))}return ae.resolve(o)}getAllFromCollectionGroup(e,n,r,i){lt()}Cs(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I(this)}getSize(e){return ae.resolve(this.size)}}class I extends kR{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class b{constructor(e){this.persistence=e,this.xs=new gu(n=>Kf(n),Yf),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ns=0,this.ks=new u,this.targetCount=0,this.Ms=vu.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),ae.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new vu(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Fn(n),ae.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=n&&null===r.get(h.targetId)&&(this.xs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ae.waitFor(o).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.ks.containsKey(n))}}class x{constructor(e,n){this.$s={},this.overlays={},this.Os=new so(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new b(this),this.indexManager=new c1,this.remoteDocumentCache=new y(r=>this.referenceDelegate.Ls(r)),this.serializer=new IR(n),this.qs=new a(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new c,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new g(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new O(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,n){return ae.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class O extends Qy{constructor(e){super(),this.currentSequenceNumber=e}}class V{constructor(e){this.persistence=e,this.Qs=new u,this.js=null}static zs(e){return new V(e)}get Ws(){if(this.js)return this.js;throw lt()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,r=>{const i=Xe.fromPath(r);return this.Hs(e,i).next(o=>{o||n.removeEntry(i,It.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return ae.or([()=>ae.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class X{constructor(e){this.serializer=e}O(e,n,r,i){const o=new Jy("createOrUpgrade",n);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w0,{unique:!0}),h.createObjectStore("documentMutations"),be(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),be(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").j().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w0,{unique:!0});const D=_.store("mutations"),S=w.map(k=>D.put(k));return ae.waitFor(S)})}(e,o))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(o))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(o))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(o))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:Yx});_.createIndex("collectionPathOverlayIndex",Qx,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Xx,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:$x});_.createIndex("documentKeyIndex",Gx),_.createIndex("collectionGroupIndex",lT)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,o))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:XP}).createIndex("sequenceNumberIndex",Wx,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Zx}).createIndex("documentKeyIndex",Kx,{unique:!1})}(e))),l}Xs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Ym(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next(i=>ae.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>ae.forEach(h,_=>{Et(_.userId===o.userId);const w=uc(this.serializer,_);return uI(e,o.userId,w).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((l,h)=>{const _=new hn(l),w=[0,$i(_)];o.push(n.get(w).next(D=>D?ae.resolve():n.put({targetId:0,path:$i(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:qx});const r=n.store("collectionParents"),i=new sS,o=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:$i(_)})}};return n.store("remoteDocuments").X({Y:!0},(l,h)=>{const _=new hn(l);return o(_.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([l,h,_],w)=>{const D=pa(h);return o(D.popLast())}))}ei(e){const n=e.store("targets");return n.X((r,i)=>{const o=Gm(i),l=JT(this.serializer,o);return n.put(l)})}ni(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((o,l)=>{const h=n.store("remoteDocumentsV14"),_=(w=l,w.document?new Xe(hn.fromString(w.document.name).popFirst(5)):w.noDocument?Xe.fromSegments(w.noDocument.path):w.unknownDocument?Xe.fromSegments(w.unknownDocument.path):lt()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ae.waitFor(i))}si(e,n){const r=n.store("mutations"),i=lS(this.serializer),o=new x(V.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(_=>{var w;let D=null!==(w=h.get(_.userId))&&void 0!==w?w:qt();uc(this.serializer,_).keys().forEach(S=>D=D.add(S)),h.set(_.userId,D)}),ae.forEach(h,(_,w)=>{const D=new hi(w),S=dp.de(this.serializer,D),k=o.getIndexManager(D),B=Dv.de(D,this.serializer,k,o.referenceDelegate);return new s(i,B,S,k).recalculateAndSaveOverlaysForDocumentKeys(new E0(n,so.ct),_).next()})})}}function be(t){t.createObjectStore("targetDocuments",{keyPath:uT}).createIndex("documentTargetsIndex",zx,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QP,{unique:!0}),t.createObjectStore("targetGlobal")}const Be="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Je{constructor(e,n,r,i,o,l,h,_,w,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=o,this.window=l,this.document=h,this.ri=w,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=k=>Promise.resolve(),!Je.D())throw new Oe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d1(this,i),this.di=n+"main",this.serializer=new IR(_),this.wi=new fa(this.di,this.ui,new X(this.serializer)),this.Bs=new l1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lS(this.serializer),this.qs=new cI,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(he.FAILED_PRECONDITION,Be);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new so(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var n=this;return this.fi=function(){var r=(0,we.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var n=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,we.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Me(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(dl(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ht(e).get("owner").next(n=>ae.resolve(this.Ri(n)))}Pi(e){return Me(e).delete(this.clientId)}bi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=wr(r,"clientMetadata");return i.j().next(o=>{const l=e.Si(o,18e5),h=o.filter(_=>-1===l.indexOf(_));return ae.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of n)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ae.resolve(!0):ht(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new Oe(he.FAILED_PRECONDITION,Be);return!1}}return!(!this.networkEnabled||!this.inForeground)||Me(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ue("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new E0(n,so.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(r=>this.Vi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Me(e).j().next(n=>this.Si(n,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return Dv.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MR(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return dp.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(l=this.ui)?eR:14===l?fT:13===l?hT:12===l?Jx:11===l?dT:void lt();var l;let h;return this.wi.runTransaction(e,i,o,_=>(h=new E0(_,this.Os?this.Os.next():so.ct),"readwrite-primary"===n?this.Ti(h).next(w=>!!w||this.Ei(h)).next(w=>{if(!w)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Oe(he.FAILED_PRECONDITION,iT);return r(h)}).next(w=>this.vi(h).next(()=>w)):this.Oi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Oi(e){return ht(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Oe(he.FAILED_PRECONDITION,Be)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ht(e).put("owner",n)}static D(){return fa.D()}Ai(e){const n=ht(e);return n.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ae.resolve())}Vi(e,n){const r=Date.now();return!(e<r-n||e>r&&(kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,P.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const r=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ht(t){return wr(t,"owner")}function Me(t){return wr(t,"clientMetadata")}function kt(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Jt{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=qt(),i=qt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Jt(e,n.fromCache,r,i)}}class on{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(o=>o||this.Gi(e,n,i,r)).next(o=>o||this.Qi(e,n))}Ki(e,n){if(TT(n))return ae.resolve(null);let r=Si(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=U0(n,null,"F"),r=Si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=qt(...o);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.ji(n,h);return this.zi(n,w,l,_.readTime)?this.Ki(e,U0(n,null,"F")):this.Wi(e,w,n,_)}))})))}Gi(e,n,r,i){return TT(n)||i.isEqual(It.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(o=>{const l=this.ji(n,o);return this.zi(n,l,r,i)?this.Qi(e,n):(c0()<=gs.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cv(n)),this.Wi(e,l,n,rT(i,-1)))})}ji(e,n){let r=new Qn(V0(e));return n.forEach((i,o)=>{oc(e,o)&&(r=r.add(o))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,n){return c0()<=gs.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",cv(n)),this.Ui.getDocumentsMatchingQuery(e,n,io.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}class is{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Un(Ut),this.Yi=new gu(o=>Kf(o),Yf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Xm(t,e,n,r){return new is(t,e,n,r)}function dS(t,e){return fI.apply(this,arguments)}function fI(){return fI=(0,we.Z)(function*(t,e){const n=tt(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let _=qt();for(const w of i){l.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of o){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return n.localDocuments.getDocuments(r,_).next(w=>({er:w,removedBatchIds:l,addedBatchIds:h}))})})}),fI.apply(this,arguments)}function g1(t){const e=tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function m1(t,e,n){let r=qt(),i=qt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=ao();return n.forEach((h,_)=>{const w=o.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(It.min())?(e.removeEntry(h,_.readTime),l=l.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(h,_)):Ue("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{nr:l,sr:i}})}function hB(t,e){const n=tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Av(t,e){const n=tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(o=>o?(i=o,ae.resolve(i)):n.Bs.allocateTargetId(r).next(l=>(i=new gl(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}function Mv(t,e,n){return LR.apply(this,arguments)}function LR(){return LR=(0,we.Z)(function*(t,e,n){const r=tt(t),i=r.Ji.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!dl(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),LR.apply(this,arguments)}function hS(t,e,n){const r=tt(t);let i=It.min(),o=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const D=tt(h),S=D.Yi.get(w);return void 0!==S?ae.resolve(D.Ji.get(S)):D.Bs.getTargetData(_,w)}(r,l,Si(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{o=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,n?i:It.min(),n?o:qt())).next(h=>(v1(r,AT(e),h),{documents:h,ir:o})))}function _1(t,e){const n=tt(t),r=tt(n.Bs),i=n.Ji.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(l=>l?l.target:null))}function y1(t,e){const n=tt(t),r=n.Xi.get(e)||It.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Zi.getAllFromCollectionGroup(i,e,rT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(v1(n,e,i),i))}function v1(t,e,n){let r=t.Xi.get(e)||It.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Xi.set(e,r)}function UR(){return UR=(0,we.Z)(function*(t,e,n,r){const i=tt(t);let o=qt(),l=ao();for(const w of n){const D=e.rr(w.metadata.name);w.document&&(o=o.add(D));const S=e.ur(w);S.setReadTime(e.cr(w.metadata.readTime)),l=l.insert(D,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Av(i,(w=r,Si(Xf(hn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>m1(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Bs.addMatchingKeys(w,o,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.nr,D.sr)).next(()=>D.nr)))}),UR.apply(this,arguments)}function pB(t,e){return VR.apply(this,arguments)}function VR(){return VR=(0,we.Z)(function*(t,e,n=qt()){const r=yield Av(t,Si(yv(e.bundledQuery))),i=tt(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=Pr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(o,e);const h=r.withResumeToken(fi.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(o,h).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,n,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),VR.apply(this,arguments)}function w1(t,e){return`firestore_clients_${t}_${e}`}function E1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function BR(t,e){return`firestore_targets_${t}_${e}`}class fS{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static ar(e,n,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new Oe(i.error.code,i.error.message))),l?new fS(e,n,i.state,o):(kr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pI{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static ar(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Oe(r.error.code,r.error.message))),o?new pI(e,r.state,i):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pS{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=lv();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=aT(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new pS(e,o):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class jR{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new jR(n.clientId,n.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HR{constructor(){this.activeTargetIds=lv()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $R{constructor(e,n,r,i,o){this.window=e,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Un(Ut),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=w1(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new HR),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const n=yield e.syncEngine.$i();for(const i of n){if(i===e.wr)continue;const o=e.getItem(w1(e.persistenceKey,i));if(o){const l=pS.ar(i,o);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,r){this.Dr(e,n,r),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(BR(this.persistenceKey,e));if(r){const i=pI.ar(e,r);i&&(n=i.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(BR(this.persistenceKey,e))}updateQueryState(e,n,r){this.kr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ue("SharedClientState","READ",e,n),n}setItem(e,n){Ue("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,we.Z)(function*(){if(n.started){if(null!==r.key)if(n.Tr.test(r.key)){if(null==r.newValue){const i=n.Or(r.key);return n.Fr(i,null)}{const i=n.Br(r.key,r.newValue);if(i)return n.Fr(i.clientId,i)}}else if(n.Er.test(r.key)){if(null!==r.newValue){const i=n.Lr(r.key,r.newValue);if(i)return n.qr(i)}}else if(n.Ar.test(r.key)){if(null!==r.newValue){const i=n.Ur(r.key,r.newValue);if(i)return n.Kr(i)}}else if(r.key===n.vr){if(null!==r.newValue){const i=n.br(r.newValue);if(i)return n.Vr(i)}}else if(r.key===n.Ir){const i=function(o){let l=so.ct;if(null!=o)try{const h=JSON.parse(o);Et("number"==typeof h),l=h}catch(h){kr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==so.ct&&n.sequenceNumberHandler(i)}else if(r.key===n.Rr){const i=n.Gr(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Qr(o)))}}else n.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,r){const i=new fS(this.currentUser,e,n,r),o=E1(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const n=E1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,r){const i=BR(this.persistenceKey,e),o=new pI(e,n,r);this.setItem(i,o.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const r=this.Or(e);return pS.ar(r,n)}Lr(e,n){const r=this.Er.exec(e),i=Number(r[1]);return fS.ar(new hi(void 0!==r[2]?r[2]:null),i,n)}Ur(e,n){const r=this.Ar.exec(e),i=Number(r[1]);return pI.ar(i,n)}br(e){return jR.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,we.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const r=n?this.gr.insert(e,n):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),l=[],h=[];return o.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{o.has(_)||h.push(_)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=lv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class I1{constructor(){this.Hr=new HR,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new HR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gB{Yr(e){}shutdown(){}}class C1{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gS=null;function GR(){return null===gS?gS=268435456+Math.round(2147483648*Math.random()):gS++,"0x"+gS.toString(16)}const mB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _B{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Us="WebChannelConnection";class yB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,o){const l=GR(),h=this.To(e,n);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const _={};return this.Eo(_,i,o),this.Ao(e,h,_,r).then(w=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,w),w),w=>{throw Uo("RestConnection",`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w})}vo(e,n,r,i,o,l){return this.Io(e,n,r,i,o)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,n){return`${this.mo}/v1/${n}:${mB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const o=GR();return new Promise((l,h)=>{const _=new ZP;_.setWithCredentials(!0),_.listenOnce(WD.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Zy.NO_ERROR:const D=_.getResponseJson();Ue(Us,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(D)),l(D);break;case Zy.TIMEOUT:Ue(Us,`RPC '${e}' ${o} timed out`),h(new Oe(he.DEADLINE_EXCEEDED,"Request time out"));break;case Zy.HTTP_ERROR:const S=_.getStatus();if(Ue(Us,`RPC '${e}' ${o} failed with status:`,S,"response text:",_.getResponseText()),S>0){let k=_.getResponseJson();Array.isArray(k)&&(k=k[0]);const B=k?.error;if(B&&B.status&&B.message){const W=function(le){const pe=le.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(pe)>=0?pe:he.UNKNOWN}(B.status);h(new Oe(W,B.message))}else h(new Oe(he.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Oe(he.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Ue(Us,`RPC '${e}' ${o} completed.`)}});const w=JSON.stringify(i);Ue(Us,`RPC '${e}' ${o} sending request:`,i),_.send(n,"POST",w,r,15)})}Ro(e,n,r){const i=GR(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Ox(),h=qD(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(_.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(_.xmlHttpFactory=new Px({})),this.Eo(_.initMessageHeaders,n,r),_.encodeInitMessageHeaders=!0;const D=o.join("");Ue(Us,`Creating RPC '${e}' stream ${i}: ${D}`,_);const S=l.createWebChannel(D,_);let k=!1,B=!1;const W=new _B({ro:pe=>{B?Ue(Us,`Not sending because RPC '${e}' stream ${i} is closed:`,pe):(k||(Ue(Us,`Opening RPC '${e}' stream ${i} transport.`),S.open(),k=!0),Ue(Us,`RPC '${e}' stream ${i} sending:`,pe),S.send(pe))},oo:()=>S.close()}),le=(pe,$e,nt)=>{pe.listen($e,Qe=>{try{nt(Qe)}catch(at){setTimeout(()=>{throw at},0)}})};return le(S,Ky.EventType.OPEN,()=>{B||Ue(Us,`RPC '${e}' stream ${i} transport opened.`)}),le(S,Ky.EventType.CLOSE,()=>{B||(B=!0,Ue(Us,`RPC '${e}' stream ${i} transport closed`),W.wo())}),le(S,Ky.EventType.ERROR,pe=>{B||(B=!0,Uo(Us,`RPC '${e}' stream ${i} transport errored:`,pe),W.wo(new Oe(he.UNAVAILABLE,"The operation could not be completed")))}),le(S,Ky.EventType.MESSAGE,pe=>{var $e;if(!B){const nt=pe.data[0];Et(!!nt);const at=nt.error||(null===($e=nt[0])||void 0===$e?void 0:$e.error);if(at){Ue(Us,`RPC '${e}' stream ${i} received error:`,at);const Rt=at.status;let Wt=function(Ho){const I_=ei[Ho];if(void 0!==I_)return HT(I_)}(Rt),Ur=at.message;void 0===Wt&&(Wt=he.INTERNAL,Ur="Unknown error status: "+Rt+" with message "+at.message),B=!0,W.wo(new Oe(Wt,Ur)),S.close()}else Ue(Us,`RPC '${e}' stream ${i} received:`,nt),W._o(nt)}}),le(h,kx.STAT_EVENT,pe=>{pe.stat===a0.PROXY?Ue(Us,`RPC '${e}' stream ${i} detected buffering proxy`):pe.stat===a0.NOPROXY&&Ue(Us,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function b1(){return typeof window<"u"?window:null}function mS(){return typeof document<"u"?document:null}function gI(t){return new n1(t,!0)}class zR{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class D1{constructor(e,n,r,i,o,l,h,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zR(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,we.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,we.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return(0,we.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new Oe(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,we.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vB extends D1{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function KT(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:lt(),i=e.targetChange.targetIds||[],o=function(_,w){return _.useProto3Json?(Et(void 0===w||"string"==typeof w),fi.fromBase64String(w||"")):(Et(void 0===w||w instanceof Uint8Array),fi.fromUint8Array(w||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?he.UNKNOWN:HT(_.code);return new Oe(w,_.message||"")}(l);n=new K0(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=cc(t,r.document.name),o=Pr(r.document.updateTime),l=r.document.createTime?Pr(r.document.createTime):It.min(),h=new Ti({mapValue:{fields:r.document.fields}}),_=Xn.newFoundDocument(i,o,l,h);n=new Hm(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=cc(t,r.document),o=r.readTime?Pr(r.readTime):It.min(),l=Xn.newNoDocument(i,o);n=new Hm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=cc(t,r.document);n=new Hm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,{count:i=0,unchangedNames:o}=r,l=new jT(i,o);n=new GT(r.targetId,l)}}var _;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?It.min():o.readTime?Pr(o.readTime):It.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Kd(this.serializer),n.addTarget=function(i,o){let l;const h=o.target;if(l=Qf(h)?{documents:nI(i,h)}:{query:rI(i,h)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=qT(i,o.resumeToken);const _=gv(i,o.expectedCount);null!==_&&(l.expectedCount=_)}else if(o.snapshotVersion.compareTo(It.min())>0){l.readTime=ap(i,o.snapshotVersion.toTimestamp());const _=gv(i,o.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function r1(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Kd(this.serializer),n.removeTarget=e,this.Wo(n)}}class wB extends D1{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function YT(t,e){return t&&t.length>0?(Et(void 0!==e),t.map(n=>function(r,i){let o=Pr(r.updateTime?r.updateTime:i);return o.isEqual(It.min())&&(o=Pr(i)),new e1(o,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.cu(r,n)}return Et(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Kd(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lc(this.serializer,r))};this.Wo(n)}}class EB extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Oe(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(he.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,n,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(he.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class CB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(kr(n),this.mu=!1):Ue("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class bB{constructor(e,n,r,i,o){var l=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(h=>{r.enqueueAndForget((0,we.Z)(function*(){var _;_p(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,we.Z)(function*(w){const D=tt(w);D.vu.add(4),yield xv(D),D.bu.set("Unknown"),D.vu.delete(4),yield mI(D)}),function(w){return _.apply(this,arguments)})(l))}))}),this.bu=new CB(r,i)}}function mI(t){return WR.apply(this,arguments)}function WR(){return WR=(0,we.Z)(function*(t){if(_p(t))for(const e of t.Ru)yield e(!0)}),WR.apply(this,arguments)}function xv(t){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,we.Z)(function*(t){for(const e of t.Ru)yield e(!1)}),ZR.apply(this,arguments)}function _S(t,e){const n=tt(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),QR(n)?YR(n):Nv(n).Ko()&&KR(n,e))}function _I(t,e){const n=tt(t),r=Nv(n);n.Au.delete(e),r.Ko()&&T1(n,e),0===n.Au.size&&(r.Ko()?r.jo():_p(n)&&n.bu.set("Unknown"))}function KR(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nv(t).su(e)}function T1(t,e){t.Vu.qt(e),Nv(t).iu(e)}function YR(t){t.Vu=new Y0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Nv(t).start(),t.bu.gu()}function QR(t){return _p(t)&&!Nv(t).Uo()&&t.Au.size>0}function _p(t){return 0===tt(t).vu.size}function S1(t){t.Vu=void 0}function DB(t){return XR.apply(this,arguments)}function XR(){return XR=(0,we.Z)(function*(t){t.Au.forEach((e,n)=>{KR(t,e)})}),XR.apply(this,arguments)}function TB(t,e){return JR.apply(this,arguments)}function JR(){return JR=(0,we.Z)(function*(t,e){S1(t),QR(t)?(t.bu.Iu(e),YR(t)):t.bu.set("Unknown")}),JR.apply(this,arguments)}function SB(t,e,n){return eN.apply(this,arguments)}function eN(){return eN=(0,we.Z)(function*(t,e,n){if(t.bu.set("Online"),e instanceof K0&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,o){const l=o.cause;for(const h of o.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(t,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yS(t,r)}else if(e instanceof Hm?t.Vu.Ht(e):e instanceof GT?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(It.min()))try{const r=yield g1(t.localStore);n.compareTo(r)>=0&&(yield function(i,o){const l=i.Vu.ce(o);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.Au.get(_);w&&i.Au.set(_,w.withResumeToken(h.resumeToken,o))}}),l.targetMismatches.forEach((h,_)=>{const w=i.Au.get(h);if(!w)return;i.Au.set(h,w.withResumeToken(fi.EMPTY_BYTE_STRING,w.snapshotVersion)),T1(i,h);const D=new gl(w.target,h,_,w.sequenceNumber);KR(i,D)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield yS(t,r)}var r}),eN.apply(this,arguments)}function yS(t,e,n){return tN.apply(this,arguments)}function tN(){return tN=(0,we.Z)(function*(t,e,n){if(!dl(e))throw e;t.vu.add(1),yield xv(t),t.bu.set("Offline"),n||(n=()=>g1(t.localStore)),t.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield mI(t)}))}),tN.apply(this,arguments)}function A1(t,e){return e().catch(n=>yS(t,n,e))}function Rv(t){return nN.apply(this,arguments)}function nN(){return nN=(0,we.Z)(function*(t){const e=tt(t),n=yp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;AB(e);)try{const i=yield hB(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,MB(e,i)}catch(i){yield yS(e,i)}M1(e)&&x1(e)}),nN.apply(this,arguments)}function AB(t){return _p(t)&&t.Eu.length<10}function MB(t,e){t.Eu.push(e);const n=yp(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function M1(t){return _p(t)&&!yp(t).Uo()&&t.Eu.length>0}function x1(t){yp(t).start()}function xB(t){return rN.apply(this,arguments)}function rN(){return rN=(0,we.Z)(function*(t){yp(t).hu()}),rN.apply(this,arguments)}function RB(t){return iN.apply(this,arguments)}function iN(){return iN=(0,we.Z)(function*(t){const e=yp(t);for(const n of t.Eu)e.uu(n.mutations)}),iN.apply(this,arguments)}function NB(t,e,n){return sN.apply(this,arguments)}function sN(){return sN=(0,we.Z)(function*(t,e,n){const r=t.Eu.shift(),i=fv.from(r,e,n);yield A1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Rv(t)}),sN.apply(this,arguments)}function OB(t,e){return oN.apply(this,arguments)}function oN(){return oN=(0,we.Z)(function*(t,e){var n;e&&yp(t).ou&&(yield(n=(0,we.Z)(function*(r,i){if(rs(o=i.code)&&o!==he.ABORTED){const l=r.Eu.shift();yp(r).Qo(),yield A1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Rv(r)}var o}),function(r,i){return n.apply(this,arguments)})(t,e)),M1(t)&&x1(t)}),oN.apply(this,arguments)}function R1(t,e){return aN.apply(this,arguments)}function aN(){return aN=(0,we.Z)(function*(t,e){const n=tt(t);n.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=_p(n);n.vu.add(3),yield xv(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield mI(n)}),aN.apply(this,arguments)}function cN(t,e){return lN.apply(this,arguments)}function lN(){return lN=(0,we.Z)(function*(t,e){const n=tt(t);e?(n.vu.delete(2),yield mI(n)):e||(n.vu.add(2),yield xv(n),n.bu.set("Unknown"))}),lN.apply(this,arguments)}function Nv(t){return t.Su||(t.Su=function(e,n,r){const i=tt(e);return i.fu(),new vB(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:DB.bind(null,t),ao:TB.bind(null,t),nu:SB.bind(null,t)}),t.Ru.push(function(){var e=(0,we.Z)(function*(n){n?(t.Su.Qo(),QR(t)?YR(t):t.bu.set("Unknown")):(yield t.Su.stop(),S1(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function yp(t){return t.Du||(t.Du=function(e,n,r){const i=tt(e);return i.fu(),new wB(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:xB.bind(null,t),ao:OB.bind(null,t),au:RB.bind(null,t),cu:NB.bind(null,t)}),t.Ru.push(function(){var e=(0,we.Z)(function*(n){n?(t.Du.Qo(),yield Rv(t)):(yield t.Du.stop(),t.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class uN{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,h=new uN(e,n,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ov(t,e){if(kr("AsyncQueue",`${e}: ${t}`),dl(t))return new Oe(he.UNAVAILABLE,`${e}: ${t}`);throw t}class kv{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Xe.comparator(n.key,r.key):(n,r)=>Xe.comparator(n.key,r.key),this.keyedMap=Om(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new kv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kv)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new kv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class N1{constructor(){this.Cu=new Un(Xe.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):lt():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pv{constructor(e,n,r,i,o,l,h,_,w){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Pv(e,n,kv.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class kB{constructor(){this.Nu=void 0,this.listeners=[]}}class PB{constructor(){this.queries=new gu(e=>ST(e),ep),this.onlineState="Unknown",this.ku=new Set}}function dN(t,e){return hN.apply(this,arguments)}function hN(){return hN=(0,we.Z)(function*(t,e){const n=tt(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new kB),i)try{o.Nu=yield n.onListen(r)}catch(l){const h=Ov(l,`Initialization of query '${cv(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,o),o.listeners.push(e),e.Mu(n.onlineState),o.Nu&&e.$u(o.Nu)&&gN(n)}),hN.apply(this,arguments)}function fN(t,e){return pN.apply(this,arguments)}function pN(){return pN=(0,we.Z)(function*(t,e){const n=tt(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),pN.apply(this,arguments)}function FB(t,e){const n=tt(t);let r=!1;for(const i of e){const l=n.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&gN(n)}function LB(t,e,n){const r=tt(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function gN(t){t.ku.forEach(e=>{e.next()})}class mN{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Pv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Pv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class UB{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class O1{constructor(e){this.serializer=e}rr(e){return cc(this.serializer,e)}ur(e){return e.metadata.exists?WT(this.serializer,e.document,!1):Xn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Pr(e)}}class VB{constructor(e,n,r){this.ju=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=k1(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const r=hn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,r=new O1(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(n.get(l)||qt()).add(o);n.set(l,h)}}return n}complete(){var e=this;return(0,we.Z)(function*(){const n=yield function fB(t,e,n,r){return UR.apply(this,arguments)}(e.localStore,new O1(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield pB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function k1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class P1{constructor(e){this.key=e}}class F1{constructor(e){this.key=e}}class L1{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=V0(e),this.ec=new kv(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new N1,i=n?n.ec:this.ec;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const k=i.get(D),B=oc(this.query,S)?S:null,W=!!k&&this.mutatedKeys.has(k.key),le=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let pe=!1;k&&B?k.data.isEqual(B.data)?W!==le&&(r.track({type:3,doc:B}),pe=!0):this.rc(k,B)||(r.track({type:2,doc:B}),pe=!0,(_&&this.tc(B,_)>0||w&&this.tc(B,w)<0)&&(h=!0)):!k&&B?(r.track({type:0,doc:B}),pe=!0):k&&!B&&(r.track({type:1,doc:k}),pe=!0,(_||w)&&(h=!0)),pe&&(B?(l=l.add(B),o=le?o.add(D):o.delete(D)):(l=l.delete(D),o=o.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),o=o.delete(D.key),r.track({type:1,doc:D})}return{ec:l,ic:r,zi:h,mutatedKeys:o}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((w,D)=>function(S,k){const B=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return B(S)-B(k)}(w.type,D.type)||this.tc(w.doc,D.doc)),this.oc(r);const l=n?this.uc():[],h=0===this.Zu.size&&this.current?1:0,_=h!==this.Xu;return this.Xu=h,0!==o.length||_?{snapshot:new Pv(this.query,e.ec,i,o,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new N1,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new F1(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new P1(r))}),n}hc(e){this.Yu=e.ir,this.Zu=qt();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Pv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class BB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jB{constructor(e){this.key=e,this.fc=!1}}class HB{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new gu(h=>ST(h),ep),this._c=new Map,this.mc=new Set,this.gc=new Un(Xe.comparator),this.yc=new Map,this.Ic=new u,this.Tc={},this.Ec=new Map,this.Ac=vu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function $B(t,e){return _N.apply(this,arguments)}function _N(){return _N=(0,we.Z)(function*(t,e){const n=BN(t);let r,i;const o=n.wc.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const l=yield Av(n.localStore,Si(e)),h=n.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield yN(n,e,r,"current"===h,l.resumeToken),n.isPrimaryClient&&_S(n.remoteStore,l)}return i}),_N.apply(this,arguments)}function yN(t,e,n,r,i){return vN.apply(this,arguments)}function vN(){return vN=(0,we.Z)(function*(t,e,n,r,i){t.Rc=(S,k,B)=>{return(W=(0,we.Z)(function*(le,pe,$e,nt){let Qe=pe.view.sc($e);Qe.zi&&(Qe=yield hS(le.localStore,pe.query,!1).then(({documents:Wt})=>pe.view.sc(Wt,Qe)));const at=nt&&nt.targetChanges.get(pe.targetId),Rt=pe.view.applyChanges(Qe,le.isPrimaryClient,at);return MN(le,pe.targetId,Rt.cc),Rt.snapshot}),function(le,pe,$e,nt){return W.apply(this,arguments)})(t,S,k,B);var W};const o=yield hS(t.localStore,e,!0),l=new L1(e,o.ir),h=l.sc(o.documents),_=op.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),w=l.applyChanges(h,t.isPrimaryClient,_);MN(t,n,w.cc);const D=new BB(e,n,l);return t.wc.set(e,D),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),w.snapshot}),vN.apply(this,arguments)}function GB(t,e){return wN.apply(this,arguments)}function wN(){return wN=(0,we.Z)(function*(t,e){const n=tt(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(o=>!ep(o,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mv(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_I(n.remoteStore,r.targetId),Fv(n,r.targetId)}).catch(ic))):(Fv(n,r.targetId),yield Mv(n.localStore,r.targetId,!0))}),wN.apply(this,arguments)}function EN(){return EN=(0,we.Z)(function*(t,e,n){const r=jN(t);try{const i=yield function(o,l){const h=tt(o),_=Gn.now(),w=l.reduce((k,B)=>k.add(B.key),qt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let B=ao(),W=qt();return h.Zi.getEntries(k,w).next(le=>{B=le,B.forEach((pe,$e)=>{$e.isValidDocument()||(W=W.add(pe))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,B)).next(le=>{D=le;const pe=[];for(const $e of l){const nt=t1($e,D.get($e.key).overlayedDocument);null!=nt&&pe.push(new ac($e.key,nt,yT(nt.value.mapValue),Jn.exists(!0)))}return h.mutationQueue.addMutationBatch(k,_,pe,l)}).next(le=>{S=le;const pe=le.applyToLocalDocumentSet(D,W);return h.documentOverlayCache.saveOverlays(k,le.batchId,pe)})}).then(()=>({batchId:S.batchId,changes:xT(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,h){let _=o.Tc[o.currentUser.toKey()];_||(_=new Un(Ut)),_=_.insert(l,h),o.Tc[o.currentUser.toKey()]=_}(r,i.batchId,n),yield eh(r,i.changes),yield Rv(r.remoteStore)}catch(i){const o=Ov(i,"Failed to persist write");n.reject(o)}}),EN.apply(this,arguments)}function U1(t,e){return IN.apply(this,arguments)}function IN(){return IN=(0,we.Z)(function*(t,e){const n=tt(t);try{const r=yield function dB(t,e){const n=tt(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const h=[];e.targetChanges.forEach((D,S)=>{const k=i.get(S);if(!k)return;h.push(n.Bs.removeMatchingKeys(o,D.removedDocuments,S).next(()=>n.Bs.addMatchingKeys(o,D.addedDocuments,S)));let B=k.withSequenceNumber(o.currentSequenceNumber);var W,le,pe;null!==e.targetMismatches.get(S)?B=B.withResumeToken(fi.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):D.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(D.resumeToken,r)),i=i.insert(S,B),le=B,pe=D,(0===(W=k).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0)&&h.push(n.Bs.updateTargetData(o,B))});let _=ao(),w=qt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,D))}),h.push(m1(o,l,e.documentUpdates).next(D=>{_=D.nr,w=D.sr})),!r.isEqual(It.min())){const D=n.Bs.getLastRemoteSnapshotVersion(o).next(S=>n.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(D)}return ae.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,_,w)).next(()=>_)}).then(o=>(n.Ji=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.yc.get(o);l&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?Et(l.fc):i.removedDocuments.size>0&&(Et(l.fc),l.fc=!1))}),yield eh(n,r,e)}catch(r){yield ic(r)}}),IN.apply(this,arguments)}function V1(t,e,n){const r=tt(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((o,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(o,l){const h=tt(o);h.onlineState=l;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.Mu(l)&&(_=!0)}),_&&gN(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qB(t,e,n){return CN.apply(this,arguments)}function CN(){return CN=(0,we.Z)(function*(t,e,n){const r=tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),o=i&&i.key;if(o){let l=new Un(Xe.comparator);l=l.insert(o,Xn.newNoDocument(o,It.min()));const h=qt().add(o),_=new sp(It.min(),new Map,new Un(Ut),l,h);yield U1(r,_),r.gc=r.gc.remove(o),r.yc.delete(e),xN(r)}else yield Mv(r.localStore,e,!1).then(()=>Fv(r,e,n)).catch(ic)}),CN.apply(this,arguments)}function WB(t,e){return bN.apply(this,arguments)}function bN(){return bN=(0,we.Z)(function*(t,e){const n=tt(t),r=e.batch.batchId;try{const i=yield function uB(t,e){const n=tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const D=_.batch,S=D.keys();let k=ae.resolve();return S.forEach(B=>{k=k.next(()=>w.getEntry(h,B)).next(W=>{const le=_.docVersions.get(B);Et(null!==le),W.version.compareTo(le)<0&&(D.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),w.addEntry(W)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=qt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(h=h.add(l.batch.mutations[_].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);AN(n,r,null),SN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield eh(n,i)}catch(i){yield ic(i)}}),bN.apply(this,arguments)}function ZB(t,e,n){return DN.apply(this,arguments)}function DN(){return DN=(0,we.Z)(function*(t,e,n){const r=tt(t);try{const i=yield function(o,l){const h=tt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,l).next(D=>(Et(null!==D),w=D.keys(),h.mutationQueue.removeMutationBatch(_,D))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);AN(r,e,n),SN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield eh(r,i)}catch(i){yield ic(i)}}),DN.apply(this,arguments)}function TN(){return TN=(0,we.Z)(function*(t,e){const n=tt(t);_p(n.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=tt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ec.get(r)||[];i.push(e),n.Ec.set(r,i)}catch(r){const i=Ov(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),TN.apply(this,arguments)}function SN(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function AN(t,e,n){const r=tt(t);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Fv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||B1(t,r)})}function B1(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(_I(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),xN(t))}function MN(t,e,n){for(const r of n)r instanceof P1?(t.Ic.addReference(r.key,e),YB(t,r)):r instanceof F1?(Ue("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||B1(t,r.key)):lt()}function YB(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+n),t.mc.add(r),xN(t))}function xN(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Xe(hn.fromString(e)),r=t.Ac.next();t.yc.set(r,new jB(n)),t.gc=t.gc.insert(n,r),_S(t.remoteStore,new gl(Si(Xf(n.path)),r,"TargetPurposeLimboResolution",so.ct))}}function eh(t,e,n){return RN.apply(this,arguments)}function RN(){return RN=(0,we.Z)(function*(t,e,n){const r=tt(t),i=[],o=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,_)=>{l.push(r.Rc(_,e,n).then(w=>{if((w||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=Jt.Li(_.targetId,w);o.push(D)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,we.Z)(function*(_,w){const D=tt(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ae.forEach(w,k=>ae.forEach(k.Fi,B=>D.persistence.referenceDelegate.addReference(S,k.targetId,B)).next(()=>ae.forEach(k.Bi,B=>D.persistence.referenceDelegate.removeReference(S,k.targetId,B)))))}catch(S){if(!dl(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const k=S.targetId;if(!S.fromCache){const B=D.Ji.get(k),le=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.Ji=D.Ji.insert(k,le)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,o))}),RN.apply(this,arguments)}function QB(t,e){return NN.apply(this,arguments)}function NN(){return NN=(0,we.Z)(function*(t,e){const n=tt(t);if(!n.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield dS(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(l=>{l.forEach(h=>{h.reject(new Oe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield eh(n,r.er)}var i}),NN.apply(this,arguments)}function XB(t,e){const n=tt(t),r=n.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let i=qt();const o=n._c.get(e);if(!o)return i;for(const l of o){const h=n.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function JB(t,e){return ON.apply(this,arguments)}function ON(){return ON=(0,we.Z)(function*(t,e){const n=tt(t),r=yield hS(n.localStore,e.query,!0),i=e.view.hc(r);return n.isPrimaryClient&&MN(n,e.targetId,i.cc),i}),ON.apply(this,arguments)}function ej(t,e){return kN.apply(this,arguments)}function kN(){return kN=(0,we.Z)(function*(t,e){const n=tt(t);return y1(n.localStore,e).then(r=>eh(n,r))}),kN.apply(this,arguments)}function tj(t,e,n,r){return PN.apply(this,arguments)}function PN(){return PN=(0,we.Z)(function*(t,e,n,r){const i=tt(t),o=yield function(l,h){const _=tt(l),w=tt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Sn(D,h).next(S=>S?_.localDocuments.getDocuments(D,S):ae.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===n?yield Rv(i.remoteStore):"acknowledged"===n||"rejected"===n?(AN(i,e,r||null),SN(i,e),h=e,tt(tt(i.localStore).mutationQueue).Cn(h)):lt(),yield eh(i,o)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),PN.apply(this,arguments)}function FN(){return FN=(0,we.Z)(function*(t,e){const n=tt(t);if(BN(n),jN(n),!0===e&&!0!==n.vc){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield j1(n,r.toArray());n.vc=!0,yield cN(n.remoteStore,!0);for(const o of i)_S(n.remoteStore,o)}else if(!1===e&&!1!==n.vc){const r=[];let i=Promise.resolve();n._c.forEach((o,l)=>{n.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Fv(n,l),Mv(n.localStore,l,!0))),_I(n.remoteStore,l)}),yield i,yield j1(n,r),function(o){const l=tt(o);l.yc.forEach((h,_)=>{_I(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Un(Xe.comparator)}(n),n.vc=!1,yield cN(n.remoteStore,!1)}}),FN.apply(this,arguments)}function j1(t,e,n){return LN.apply(this,arguments)}function LN(){return LN=(0,we.Z)(function*(t,e,n){const r=tt(t),i=[],o=[];for(const l of e){let h;const _=r._c.get(l);if(_&&0!==_.length){h=yield Av(r.localStore,Si(_[0]));for(const w of _){const D=r.wc.get(w),S=yield JB(r,D);S.snapshot&&o.push(S.snapshot)}}else{const w=yield _1(r.localStore,l);h=yield Av(r.localStore,w),yield yN(r,H1(w),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(o),i}),LN.apply(this,arguments)}function H1(t){return F0(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rj(t){const e=tt(t);return tt(tt(e.localStore).persistence).$i()}function ij(t,e,n,r){return UN.apply(this,arguments)}function UN(){return UN=(0,we.Z)(function*(t,e,n,r){const i=tt(t);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const l=yield y1(i.localStore,AT(o[0])),h=sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,fi.EMPTY_BYTE_STRING);yield eh(i,l,h);break}case"rejected":yield Mv(i.localStore,e,!0),Fv(i,e,r);break;default:lt()}}),UN.apply(this,arguments)}function sj(t,e,n){return VN.apply(this,arguments)}function VN(){return VN=(0,we.Z)(function*(t,e,n){const r=BN(t);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const o=yield _1(r.localStore,i),l=yield Av(r.localStore,o);yield yN(r,H1(o),l.targetId,!1,l.resumeToken),_S(r.remoteStore,l)}for(const i of n)r._c.has(i)&&(yield Mv(r.localStore,i,!1).then(()=>{_I(r.remoteStore,i),Fv(r,i)}).catch(ic))}}),VN.apply(this,arguments)}function BN(t){const e=tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=U1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qB.bind(null,e),e.dc.nu=FB.bind(null,e.eventManager),e.dc.Pc=LB.bind(null,e.eventManager),e}function jN(t){const e=tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZB.bind(null,e),e}class yI{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,we.Z)(function*(){n.serializer=gI(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Xm(this.persistence,new on,e.initialUser,this.serializer)}createPersistence(e){return new x(V.zs,this.serializer)}createSharedClientState(e){return new I1}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class HN extends yI{constructor(e,n,r){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield n().call(r,e),yield r.Vc.initialize(r,e),yield jN(r.Vc.syncEngine),yield Rv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Xm(this.persistence,new on,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new RR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new _0(n,this.persistence);return new m0(e.asyncQueue,r)}createPersistence(e){const n=kt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ai.withCacheSize(this.cacheSizeBytes):Ai.DEFAULT;return new Je(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,b1(),mS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new I1}}class $1 extends HN{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield n().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof $R&&(r.sharedClientState.syncEngine={jr:tj.bind(null,i),zr:ij.bind(null,i),Wr:sj.bind(null,i),$i:rj.bind(null,i),Qr:ej.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,we.Z)(function*(l){yield function nj(t,e){return FN.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=b1();if(!$R.D(n))throw new Oe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $R(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lv{initialize(e,n){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>V1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QB.bind(null,r.syncEngine),yield cN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new PB}createDatastore(e){const n=gI(e.databaseInfo.databaseId),r=new yB(e.databaseInfo);return new EB(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>V1(this.syncEngine,h,0),l=C1.D()?new C1:new gB,new bB(n,r,i,o,l);var n,r,i,o,l}createSyncEngine(e,n){return function(r,i,o,l,h,_,w){const D=new HB(r,i,o,l,h,_);return w&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,we.Z)(function*(n){const r=tt(n);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield xv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function G1(t,e=10240){let n=0;return{read:()=>(0,we.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class cj{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new hr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,we.Z)(function*(){const n=yield e.kc();if(null===n)return null;const r=e.xc.decode(n),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new UB(JSON.parse(o),n.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,we.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}$c(e){var n=this;return(0,we.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const r=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,we.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class lj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,we.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Oe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(o,l){const h=tt(o),_=Kd(h.serializer)+"/documents",w={documents:l.map(B=>cp(h.serializer,B))},D=yield h.vo("BatchGetDocuments",_,w,l.length),S=new Map;D.forEach(B=>{const W=function ZT(t,e){return"found"in e?function(n,r){Et(!!r.found);const i=cc(n,r.found.name),o=Pr(r.found.updateTime),l=r.found.createTime?Pr(r.found.createTime):It.min(),h=new Ti({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(i,o,l,h)}(t,e):"missing"in e?function(n,r){Et(!!r.missing),Et(!!r.readTime);const i=cc(n,r.missing),o=Pr(r.readTime);return Xn.newNoDocument(i,o)}(t,e):lt()}(h.serializer,B);S.set(W.key.toString(),W)});const k=[];return l.forEach(B=>{const W=S.get(B.toString());Et(!!W),k.push(W)}),k}),function(o,l){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=Xe.fromPath(i);e.mutations.push(new G0(o,e.precondition(o)))}),yield(r=(0,we.Z)(function*(i,o){const l=tt(i),h=Kd(l.serializer)+"/documents",_={writes:o.map(w=>lc(l.serializer,w))};yield l.Io("Commit",h,_)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw lt();n=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Oe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(It.min())?Jn.exists(!1):Jn.updateTime(n):Jn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(It.min()))throw new Oe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(n)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uj{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new zR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,we.Z)(function*(){const n=new lj(e.datastore),r=e.qc(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const n=this.updateFunction(e);return!Hf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!rs(n)}return!1}}class dj{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=d0.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(h){Ue("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ov(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function wS(t,e){return $N.apply(this,arguments)}function $N(){return $N=(0,we.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(o){r.isEqual(o)||(yield dS(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),$N.apply(this,arguments)}function GN(t,e){return zN.apply(this,arguments)}function zN(){return zN=(0,we.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield qN(t);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>R1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>R1(e.remoteStore,o)),t._onlineComponents=e}),zN.apply(this,arguments)}function z1(t){return"FirebaseError"===t.name?t.code===he.FAILED_PRECONDITION||t.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function qN(t){return WN.apply(this,arguments)}function WN(){return WN=(0,we.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!z1(n))throw n;Uo("Error using user provided cache. Falling back to memory cache: "+n),yield wS(t,new yI)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield wS(t,new yI);return t._offlineComponents}),WN.apply(this,arguments)}function ES(t){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,we.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield GN(t,t._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield GN(t,new Lv))),t._onlineComponents}),ZN.apply(this,arguments)}function q1(t){return qN(t).then(e=>e.persistence)}function IS(t){return qN(t).then(e=>e.localStore)}function W1(t){return ES(t).then(e=>e.remoteStore)}function KN(t){return ES(t).then(e=>e.syncEngine)}function Uv(t){return YN.apply(this,arguments)}function YN(){return YN=(0,we.Z)(function*(t){const e=yield ES(t),n=e.eventManager;return n.onListen=$B.bind(null,e.syncEngine),n.onUnlisten=GB.bind(null,e.syncEngine),n}),YN.apply(this,arguments)}function K1(t,e,n={}){const r=new hr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,l,h,_){const w=new vS({next:S=>{o.enqueueAndForget(()=>fN(i,D));const k=S.docs.has(l);!k&&S.fromCache?_.reject(new Oe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&h&&"server"===h.source?_.reject(new Oe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new mN(Xf(l.path),w,{includeMetadataChanges:!0,Ku:!0});return dN(i,D)}(yield Uv(t),t.asyncQueue,e,n,r)})),r.promise}function Y1(t,e,n={}){const r=new hr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,l,h,_){const w=new vS({next:S=>{o.enqueueAndForget(()=>fN(i,D)),S.fromCache&&"server"===h.source?_.reject(new Oe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new mN(l,w,{includeMetadataChanges:!0,Ku:!0});return dN(i,D)}(yield Uv(t),t.asyncQueue,e,n,r)})),r.promise}function Q1(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const X1=new Map;function QN(t,e,n){if(!n)throw new Oe(he.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J1(t,e,n,r){if(!0===e&&!0===r)throw new Oe(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eF(t){if(!Xe.isDocumentKey(t))throw new Oe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tF(t){if(Xe.isDocumentKey(t))throw new Oe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CS(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":lt()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=CS(t);throw new Oe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nF(t,e){if(e<=0)throw new Oe(he.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class rF{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Q1(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Oe(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Oe(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Oe(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vI{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rF(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new YD;switch(n.type){case"firstParty":return new XD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Oe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=X1.get(e);n&&(Ue("ComponentProvider","Removing Datastore"),X1.delete(e),n.terminate())}(this),Promise.resolve()}}class fr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}}class ms{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class wu extends ms{constructor(e,n,r){super(e,n,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new Xe(e))}withConverter(e){return new wu(this.firestore,e,this._path)}}function sF(t,e,...n){if(t=(0,P.m9)(t),QN("collection","path",e),t instanceof vI){const r=hn.fromString(e,...n);return tF(r),new wu(t,null,r)}{if(!(t instanceof fr||t instanceof wu))throw new Oe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hn.fromString(e,...n));return tF(r),new wu(t.firestore,null,r)}}function bS(t,e,...n){if(t=(0,P.m9)(t),1===arguments.length&&(e=d0.A()),QN("doc","path",e),t instanceof vI){const r=hn.fromString(e,...n);return eF(r),new fr(t,null,new Xe(r))}{if(!(t instanceof fr||t instanceof wu))throw new Oe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hn.fromString(e,...n));return eF(r),new fr(t.firestore,t instanceof wu?t.converter:null,new Xe(r))}}function oF(t,e){return t=(0,P.m9)(t),e=(0,P.m9)(e),(t instanceof fr||t instanceof wu)&&(e instanceof fr||e instanceof wu)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function XN(t,e){return t=(0,P.m9)(t),e=(0,P.m9)(e),t instanceof ms&&e instanceof ms&&t.firestore===e.firestore&&ep(t._query,e._query)&&t.converter===e.converter}class Ej{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zR(this,"async_queue_retry"),this.Xc=()=>{const n=mS();n&&Ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=mS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=mS();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new hr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,we.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!dl(n))throw n;Ue("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,kr("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=uN.createAndSchedule(this,e,n,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&lt()}verifyOperationInProgress(){}sa(){var e=this;return(0,we.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function JN(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class Ij{constructor(){this._progressObserver={},this._taskCompletionResolver=new hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends vI{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ej,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aF(this),this._firestoreClient.terminate()}}function pi(t){return t._firestoreClient||aF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aF(t){var e,n,r;const i=t._freezeSettings(),o=(h=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Sm(t._databaseId,h,t._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Q1(w.experimentalLongPollingOptions),w.useFetchStreams));var h,w;t._firestoreClient=new dj(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function cF(t,e,n){const r=new hr;return t.asyncQueue.enqueue((0,we.Z)(function*(){try{yield wS(t,n),yield GN(t,e),r.resolve()}catch(i){const o=i;if(!z1(o))throw o;Uo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function lF(t){if(t._initialized||t._terminated)throw new Oe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eu(fi.fromBase64String(e))}catch(n){throw new Oe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Eu(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class th{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Oe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jm{constructor(e){this._methodName=e}}class DS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const Oj=/^__.*__$/;class kj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new ac(e,this.data,this.fieldMask,n,this.fieldTransforms):new rp(e,this.data,n,this.fieldTransforms)}}class uF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ac(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class TS{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new TS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return MS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dF(this.ca)&&Oj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Pj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gI(e)}ya(e,n,r,i=!1){return new TS({ca:e,methodName:n,ga:r,path:vr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e_(t){const e=t._freezeSettings(),n=gI(t._databaseId);return new Pj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SS(t,e,n,r,i,o={}){const l=t.ya(o.merge||o.mergeFields?2:0,e,n,i);rO("Data must be an object, but it was:",l,r);const h=pF(r,l);let _,w;if(o.merge)_=new Ls(l.fieldMask),w=l.fieldTransforms;else if(o.mergeFields){const D=[];for(const S of o.mergeFields){const k=II(e,S,n);if(!l.contains(k))throw new Oe(he.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);mF(D,k)||D.push(k)}_=new Ls(D),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new kj(new Ti(h),_,w)}class EI extends Jm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof EI}}function hF(t,e,n){return new TS({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eO extends Jm{_toFieldTransform(e){return new uv(e.path,new Fm)}isEqual(e){return e instanceof eO}}class Fj extends Jm{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=hF(this,e,!0),r=this.pa.map(o=>t_(o,n)),i=new mu(r);return new uv(e.path,i)}isEqual(e){return this===e}}class Lj extends Jm{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=hF(this,e,!0),r=this.pa.map(o=>t_(o,n)),i=new tp(r);return new uv(e.path,i)}isEqual(e){return this===e}}class Uj extends Jm{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Lm(e.serializer,$0(e.serializer,this.Ia));return new uv(e.path,n)}isEqual(e){return this===e}}function tO(t,e,n,r){const i=t.ya(1,e,n);rO("Data must be an object, but it was:",i,r);const o=[],l=Ti.empty();hl(r,(_,w)=>{const D=AS(e,_,n);w=(0,P.m9)(w);const S=i.da(D);if(w instanceof EI)o.push(D);else{const k=t_(w,S);null!=k&&(o.push(D),l.set(D,k))}});const h=new Ls(o);return new uF(l,h,i.fieldTransforms)}function nO(t,e,n,r,i,o){const l=t.ya(1,e,n),h=[II(e,r,n)],_=[i];if(o.length%2!=0)throw new Oe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<o.length;k+=2)h.push(II(e,o[k])),_.push(o[k+1]);const w=[],D=Ti.empty();for(let k=h.length-1;k>=0;--k)if(!mF(w,h[k])){const B=h[k];let W=_[k];W=(0,P.m9)(W);const le=l.da(B);if(W instanceof EI)w.push(B);else{const pe=t_(W,le);null!=pe&&(w.push(B),D.set(B,pe))}}const S=new Ls(w);return new uF(D,S,l.fieldTransforms)}function fF(t,e,n,r=!1){return t_(n,t.ya(r?4:3,e))}function t_(t,e){if(gF(t=(0,P.m9)(t)))return rO("Unsupported field value:",e,t),pF(t,e);if(t instanceof Jm)return function(n,r){if(!dF(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let o=0;for(const l of n){let h=t_(l,r.wa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=(0,P.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return $0(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Gn.fromDate(n);return{timestampValue:ap(r.serializer,i)}}if(n instanceof Gn){const i=new Gn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ap(r.serializer,i)}}if(n instanceof DS)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Eu)return{bytesValue:qT(r.serializer,n._byteString)};if(n instanceof fr){const i=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mv(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${CS(n)}`)}(t,e)}function pF(t,e){const n={};return C0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hl(t,(r,i)=>{const o=t_(i,e.ha(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function gF(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gn||t instanceof DS||t instanceof Eu||t instanceof fr||t instanceof Jm)}function rO(t,e,n){if(!gF(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CS(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function II(t,e,n){if((e=(0,P.m9)(e))instanceof th)return e._internalPath;if("string"==typeof e)return AS(t,e);throw MS("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vj=new RegExp("[~\\*/\\[\\]]");function AS(t,e,n){if(e.search(Vj)>=0)throw MS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new th(...e.split("."))._internalPath}catch{throw MS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function MS(t,e,n,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(o||l)&&(_+=" (found",o&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Oe(he.INVALID_ARGUMENT,h+t+_)}function mF(t,e){return t.some(n=>n.isEqual(e))}class CI{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Bj extends CI{data(){return super.data()}}function xS(t,e){return"string"==typeof e?AS(t,e):e instanceof th?e._internalPath:e._delegate._internalPath}function _F(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Oe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iO{}class bI extends iO{}function vp(t,e,...n){let r=[];e instanceof iO&&r.push(e),r=r.concat(n),function(i){const o=i.filter(h=>h instanceof Vv).length,l=i.filter(h=>h instanceof DI).length;if(o>1||o>0&&l>0)throw new Oe(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class DI extends bI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new DI(e,n,r)}_apply(e){const n=this._parse(e);return EF(e._query,n),new ms(e.firestore,e.converter,Nm(e._query,n))}_parse(e){const n=e_(e.firestore);return function(i,o,l,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){wF(D,w);const k=[];for(const B of D)k.push(vF(h,i,B));S={arrayValue:{values:k}}}else S=vF(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||wF(D,w),S=fF(l,"where",D,"in"===w||"not-in"===w);return sn.create(_,w,S)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vv extends iO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:An.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const h of l)EF(o,h),o=Nm(o,h)}(e._query,n),new ms(e.firestore,e.converter,Nm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sO extends bI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sO(e,n)}_apply(e){const n=function(r,i,o){if(null!==r.startAt)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new fu(i,o);return function(h,_){if(null===L0(h)){const w=Jf(h);null!==w&&IF(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ms(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new fl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}class RS extends bI{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new RS(e,n,r)}_apply(e){return new ms(e.firestore,e.converter,U0(e._query,this._limit,this._limitType))}}class NS extends bI{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new NS(e,n,r)}_apply(e){const n=yF(e,this.type,this._docOrFields,this._inclusive);return new ms(e.firestore,e.converter,(i=n,new fl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class OS extends bI{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new OS(e,n,r)}_apply(e){const n=yF(e,this.type,this._docOrFields,this._inclusive);return new ms(e.firestore,e.converter,(i=n,new fl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function yF(t,e,n,r){if(n[0]=(0,P.m9)(n[0]),n[0]instanceof CI)return function(i,o,l,h,_){if(!h)throw new Oe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of Zd(i))if(D.field.isKeyField())w.push(Wd(o,h.key));else{const S=h.data.field(D.field);if(oo(S))throw new Oe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=D.field.canonicalString();throw new Oe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}w.push(S)}return new sc(w,_)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=e_(t.firestore);return function(o,l,h,_,w,D){const S=o.explicitOrderBy;if(w.length>S.length)throw new Oe(he.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let B=0;B<w.length;B++){const W=w[B];if(S[B].field.isKeyField()){if("string"!=typeof W)throw new Oe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof W}`);if(!av(o)&&-1!==W.indexOf("/"))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${W}' contains a slash.`);const le=o.path.child(hn.fromString(W));if(!Xe.isDocumentKey(le))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const pe=new Xe(le);k.push(Wd(l,pe))}else{const le=fF(h,_,W);k.push(le)}}return new sc(k,D)}(t._query,t.firestore._databaseId,i,e,n,r)}}function vF(t,e,n){if("string"==typeof(n=(0,P.m9)(n))){if(""===n)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!av(e)&&-1!==n.indexOf("/"))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(hn.fromString(n));if(!Xe.isDocumentKey(r))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wd(t,new Xe(r))}if(n instanceof fr)return Wd(t,n._key);throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CS(n)}.`)}function wF(t,e){if(!Array.isArray(t)||0===t.length)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EF(t,e){if(e.isInequality()){const r=Jf(t),i=e.field;if(null!==r&&!r.isEqual(i))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=L0(t);null!==o&&IF(0,i,o)}const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Oe(he.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function IF(t,e,n){if(!n.isEqual(e))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class oO{convertValue(e,n="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw lt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hl(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new DS(Er(e.latitude),Er(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ev(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qd(e));default:return null}}convertTimestamp(e){const n=Vo(e);return new Gn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=hn.fromString(e);Et(XT(r));const i=new uu(r.get(1),r.get(3)),o=new Xe(r.popFirst(5));return i.isEqual(n)||kr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function kS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Kj extends oO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}class n_{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nh extends CI{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new TI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class TI extends nh{data(e={}){return super.data(e)}}class wp{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new n_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new TI(this._firestore,this._userDataWriter,r.key,r,new n_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new TI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new n_(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new TI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new n_(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),w=o.indexOf(l.doc.key)),{type:Qj(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Qj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function bF(t,e){return t instanceof nh&&e instanceof nh?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof wp&&e instanceof wp&&t._firestore===e._firestore&&XN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Ep extends oO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function DF(t,e,n){t=fn(t,fr);const r=fn(t.firestore,pr),i=kS(t.converter,e,n);return Bv(r,[SS(e_(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Jn.none())])}function TF(t,e,n,...r){t=fn(t,fr);const i=fn(t.firestore,pr),o=e_(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof th?nO(o,"updateDoc",t._key,e,n,r):tO(o,"updateDoc",t._key,e),Bv(i,[l.toMutation(t._key,Jn.exists(!0))])}function SF(t,...e){var n,r,i;t=(0,P.m9)(t);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||JN(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges};if(JN(e[l])){const S=e[l];e[l]=null===(n=S.next)||void 0===n?void 0:n.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(t instanceof fr)w=fn(t.firestore,pr),D=Xf(t._key.path),_={next:S=>{e[l]&&e[l](aO(w,t,S))},error:e[l+1],complete:e[l+2]};else{const S=fn(t,ms);w=fn(S.firestore,pr),D=S._query;const k=new Ep(w);_={next:B=>{e[l]&&e[l](new wp(w,k,S,B))},error:e[l+1],complete:e[l+2]},_F(t._query)}return function(S,k,B,W){const le=new vS(W),pe=new mN(k,le,B);return S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return dN(yield Uv(S),pe)})),()=>{le.Dc(),S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return fN(yield Uv(S),pe)}))}}(pi(w),D,h,_)}function Bv(t,e){return function(n,r){const i=new hr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function zB(t,e,n){return EN.apply(this,arguments)}(yield KN(n),r,i)})),i.promise}(pi(t),e)}function aO(t,e,n){const r=n.docs.get(e._key),i=new Ep(t);return new nh(t,i,e._key,r,new n_(n.hasPendingWrites,n.fromCache),e.converter)}const gH={maxAttempts:5};class AF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=e_(e)}set(e,n,r){this._verifyNotCommitted();const i=Ip(e,this._firestore),o=kS(i.converter,n,r),l=SS(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Jn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Ip(e,this._firestore);let l;return l="string"==typeof(n=(0,P.m9)(n))||n instanceof th?nO(this._dataReader,"WriteBatch.update",o._key,n,r,i):tO(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ip(e,this._firestore);return this._mutations=this._mutations.concat(new Bm(n._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ip(t,e){if((t=(0,P.m9)(t)).firestore!==e)throw new Oe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class mH extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=e_(e)}get(e){const n=Ip(e,this._firestore),r=new Kj(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||1!==i.length)return lt();const o=i[0];if(o.isFoundDocument())return new CI(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new CI(this._firestore,r,n._key,null,n.converter);throw lt()})}set(e,n,r){const i=Ip(e,this._firestore),o=kS(i.converter,n,r),l=SS(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,n,r,...i){const o=Ip(e,this._firestore);let l;return l="string"==typeof(n=(0,P.m9)(n))||n instanceof th?nO(this._dataReader,"Transaction.update",o._key,n,r,i):tO(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(e){const n=Ip(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ip(e,this._firestore),r=new Ep(this._firestore);return super.get(e).then(i=>new nh(this._firestore,r,n._key,i._document,new n_(!1,!1),n.converter))}}function cO(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function xF(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function RF(){if(!function nR(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){ul=ps.SDK_VERSION,(0,ps._registerComponent)(new Qr.wA("firestore",(n,{instanceIdentifier:r,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new pr(new QD(n.getProvider("auth-internal")),new u0(n.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Oe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(h.options.projectId,_)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(Fx,"3.13.0",t),(0,ps.registerVersion)(Fx,"3.13.0","esm2017")}();class SI{constructor(e){this._delegate=e}static fromBase64String(e){return RF(),new SI(Eu.fromBase64String(e))}static fromUint8Array(e){return xF(),new SI(Eu.fromUint8Array(e))}toBase64(){return RF(),this._delegate.toBase64()}toUint8Array(){return xF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lO(t){return function DH(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class TH{enableIndexedDbPersistence(e,n){return function bj(t,e){lF(t=fn(t,pr));const n=pi(t);if(n._uninitializedComponentsProvider)throw new Oe(he.FAILED_PRECONDITION,"SDK cache is already specified.");Uo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Lv;return cF(n,i,new HN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Dj(t){lF(t=fn(t,pr));const e=pi(t);if(e._uninitializedComponentsProvider)throw new Oe(he.FAILED_PRECONDITION,"SDK cache is already specified.");Uo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Lv;return cF(e,r,new $1(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tj(t){if(t._initialized&&!t._terminated)throw new Oe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hr;return t._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(n=(0,we.Z)(function*(r){if(!fa.D())return Promise.resolve();const i=r+"main";yield fa.delete(i)}),function(r){return n.apply(this,arguments)})(kt(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class NF{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Uo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function iF(t,e,n,r={}){var i;const o=(t=fn(t,vI))._getSettings(),l=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==l&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let h,_;if("string"==typeof r.mockUserToken)h=r.mockUserToken,_=hi.MOCK_USER;else{h=(0,P.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Oe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new hi(w)}t._authCredentials=new Ux(new KD(h,_))}}(this._delegate,e,n,r)}enableNetwork(){return function Aj(t){return function hj(t){return t.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield q1(t),n=yield W1(t);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.vu.delete(0),mI(i)}(n)}))}(pi(t=fn(t,pr)))}(this._delegate)}disableNetwork(){return function Mj(t){return function fj(t){return t.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield q1(t),n=yield W1(t);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const o=tt(i);o.vu.add(0),yield xv(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(n);var r}))}(pi(t=fn(t,pr)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,J1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sj(t){return function(e){const n=new hr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function KB(t,e){return TN.apply(this,arguments)}(yield KN(e),n)})),n.promise}(pi(t=fn(t,pr)))}(this._delegate)}onSnapshotsInSync(e){return function oH(t,e){return function mj(t,e){const n=new vS(e);return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Uv(t),i=n,tt(r).ku.add(i),void i.next();var r,i})),()=>{n.Dc(),t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Uv(t),i=n,void tt(r).ku.delete(i);var r,i}))}}(pi(t=fn(t,pr)),JN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jv(this,sF(this._delegate,e))}catch(n){throw co(n,"collection()","Firestore.collection()")}}doc(e){try{return new dc(this,bS(this._delegate,e))}catch(n){throw co(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new lo(this,function wj(t,e){if(t=fn(t,vI),QN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(t,null,(n=e,new fl(hn.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw co(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _H(t,e,n){t=fn(t,pr);const r=Object.assign(Object.assign({},gH),n);return function(i){if(i.maxAttempts<1)throw new Oe(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const h=new hr;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const _=yield function Z1(t){return ES(t).then(e=>e.datastore)}(i);new uj(i.asyncQueue,_,l,o,h).run()})),h.promise}(pi(t),i=>e(new mH(t,i)),r)}(this._delegate,n=>e(new OF(this,n)))}batch(){return pi(this._delegate),new kF(new AF(this._delegate,e=>Bv(this._delegate,e)))}loadBundle(e){return function xj(t,e){const n=pi(t=fn(t,pr)),r=new Ij;return function _j(t,e,n,r){const i=function(o,l){let h;return h="string"==typeof o?$T().encode(o):o,_=function(_,w){if(_ instanceof Uint8Array)return G1(_,w);if(_ instanceof ArrayBuffer)return G1(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new cj(_,l);var _}(n,gI(e));t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function oj(t,e,n){const r=tt(t);var i;(i=(0,we.Z)(function*(o,l,h){try{const _=yield l.getMetadata();if(yield function(k,B){const W=tt(k),le=Pr(B.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",pe=>W.qs.getBundleMetadata(pe,B.id)).then(pe=>!!pe&&pe.createTime.compareTo(le)>=0)}(o.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=_).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(k1(_));const w=new VB(_,o.localStore,l.serializer);let D=yield l.bc();for(;D;){const k=yield w.zu(D);k&&h._updateProgress(k),D=yield l.bc()}const S=yield w.complete();return yield eh(o,S.Ju,void 0),yield function(k,B){const W=tt(k);return W.persistence.runTransaction("Save bundle","readwrite",le=>W.qs.saveBundleMetadata(le,B))}(o.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return Uo("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var k}),function(o,l,h){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield KN(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Rj(t,e){return function yj(t,e){return t.asyncQueue.enqueue((0,we.Z)(function*(){return function(n,r){const i=tt(n);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield IS(t),e)}))}(pi(t=fn(t,pr)),e).then(n=>n?new ms(t,null,n.query):null)}(this._delegate,e).then(n=>n?new lo(this,n):null)}}class PS extends oO{constructor(e){super(),this.firestore=e}convertBytes(e){return new SI(new Eu(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return dc.forKey(n,this.firestore,null)}}class OF{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new PS(e)}get(e){const n=i_(e);return this._delegate.get(n).then(r=>new AI(this._firestore,new nh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=i_(e);return r?(cO("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=i_(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=i_(e);return this._delegate.delete(n),this}}class kF{constructor(e){this._delegate=e}set(e,n,r){const i=i_(e);return r?(cO("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=i_(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=i_(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class r_{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new TI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new MI(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=r_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new r_(e,new PS(e),n),i.set(n,o)),o}}r_.INSTANCES=new WeakMap;class dc{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new PS(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new dc(n,new fr(n._delegate,r,new Xe(e)))}static forKey(e,n,r){return new dc(n,new fr(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jv(this.firestore,sF(this._delegate,e))}catch(n){throw co(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof fr&&oF(this._delegate,e)}set(e,n){n=cO("DocumentReference.set",n);try{return n?DF(this._delegate,e,n):DF(this._delegate,e)}catch(r){throw co(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?TF(this._delegate,e):TF(this._delegate,e,n,...r)}catch(i){throw co(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iH(t){return Bv(fn(t.firestore,pr),[new Bm(t._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const n=PF(e),r=FF(e,i=>new AI(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return SF(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function Jj(t){t=fn(t,fr);const e=fn(t.firestore,pr),n=pi(e),r=new Ep(e);return function pj(t,e){const n=new hr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,l){try{const h=yield function(_,w){const D=tt(_);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,w))}(i,o);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Oe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=Ov(h,`Failed to get document '${o} from cache`);l.reject(_)}}),function(i,o,l){return r.apply(this,arguments)})(yield IS(t),e,n);var r})),n.promise}(n,t._key).then(i=>new nh(e,r,t._key,i,new n_(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function eH(t){t=fn(t,fr);const e=fn(t.firestore,pr);return K1(pi(e),t._key,{source:"server"}).then(n=>aO(e,t,n))}(this._delegate):function Xj(t){t=fn(t,fr);const e=fn(t.firestore,pr);return K1(pi(e),t._key).then(n=>aO(e,t,n))}(this._delegate),n.then(r=>new AI(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new dc(this.firestore,this._delegate.withConverter(e?r_.getInstance(this.firestore,e):null))}}function co(t,e,n){return t.message=t.message.replace(e,n),t}function PF(t){for(const e of t)if("object"==typeof e&&!lO(e))return e;return{}}function FF(t,e){var n,r;let i;return i=lO(t[0])?t[0]:lO(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class AI{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new dc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return bF(this._delegate,e._delegate)}}class MI extends AI{data(e){const n=this._delegate.data(e);return function Lx(t,e){t||lt()}(void 0!==n),n}}class lo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new PS(e)}where(e,n,r){try{return new lo(this.firestore,vp(this._delegate,function jj(t,e,n){const r=e,i=xS("where",t);return DI._create(i,r,n)}(e,n,r)))}catch(i){throw co(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new lo(this.firestore,vp(this._delegate,function Hj(t,e="asc"){const n=e,r=xS("orderBy",t);return sO._create(r,n)}(e,n)))}catch(r){throw co(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new lo(this.firestore,vp(this._delegate,function $j(t){return nF("limit",t),RS._create("limit",t,"F")}(e)))}catch(n){throw co(n,"limit()","Query.limit()")}}limitToLast(e){try{return new lo(this.firestore,vp(this._delegate,function Gj(t){return nF("limitToLast",t),RS._create("limitToLast",t,"L")}(e)))}catch(n){throw co(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new lo(this.firestore,vp(this._delegate,function zj(...t){return NS._create("startAt",t,!0)}(...e)))}catch(n){throw co(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new lo(this.firestore,vp(this._delegate,function qj(...t){return NS._create("startAfter",t,!1)}(...e)))}catch(n){throw co(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new lo(this.firestore,vp(this._delegate,function Wj(...t){return OS._create("endBefore",t,!1)}(...e)))}catch(n){throw co(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new lo(this.firestore,vp(this._delegate,function Zj(...t){return OS._create("endAt",t,!0)}(...e)))}catch(n){throw co(n,"endAt()","Query.endAt()")}}isEqual(e){return XN(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function nH(t){t=fn(t,ms);const e=fn(t.firestore,pr),n=pi(e),r=new Ep(e);return function gj(t,e){const n=new hr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,l){try{const h=yield hS(i,o,!0),_=new L1(o,h.ir),w=_.sc(h.documents),D=_.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const _=Ov(h,`Failed to execute query '${o} against cache`);l.reject(_)}}),function(i,o,l){return r.apply(this,arguments)})(yield IS(t),e,n);var r})),n.promise}(n,t._query).then(i=>new wp(e,r,t,i))}(this._delegate):"server"===e?.source?function rH(t){t=fn(t,ms);const e=fn(t.firestore,pr),n=pi(e),r=new Ep(e);return Y1(n,t._query,{source:"server"}).then(i=>new wp(e,r,t,i))}(this._delegate):function tH(t){t=fn(t,ms);const e=fn(t.firestore,pr),n=pi(e),r=new Ep(e);return _F(t._query),Y1(n,t._query).then(i=>new wp(e,r,t,i))}(this._delegate),n.then(r=>new uO(this.firestore,new wp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=PF(e),r=FF(e,i=>new uO(this.firestore,new wp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return SF(this._delegate,n,r)}withConverter(e){return new lo(this.firestore,this._delegate.withConverter(e?r_.getInstance(this.firestore,e):null))}}class AH{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new MI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uO{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new lo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new MI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new AH(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new MI(this._firestore,r))})}isEqual(e){return bF(this._delegate,e._delegate)}}class jv extends lo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new dc(this.firestore,e):null}doc(e){try{return new dc(this.firestore,void 0===e?bS(this._delegate):bS(this._delegate,e))}catch(n){throw co(n,"doc()","CollectionReference.doc()")}}add(e){return function sH(t,e){const n=fn(t.firestore,pr),r=bS(t),i=kS(t.converter,e);return Bv(n,[SS(e_(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new dc(this.firestore,n))}isEqual(e){return oF(this._delegate,e._delegate)}withConverter(e){return new jv(this.firestore,this._delegate.withConverter(e?r_.getInstance(this.firestore,e):null))}}function i_(t){return fn(t,fr)}class dO{constructor(...e){this._delegate=new th(...e)}static documentId(){return new dO(vr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof th&&this._delegate._internalPath.isEqual(e._internalPath)}}class s_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vH(){return new eO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new s_(e)}static delete(){const e=function yH(){return new EI("deleteField")}();return e._methodName="FieldValue.delete",new s_(e)}static arrayUnion(...e){const n=function wH(...t){return new Fj("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new s_(n)}static arrayRemove(...e){const n=function EH(...t){return new Lj("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new s_(n)}static increment(e){const n=function IH(t){return new Uj("increment",t)}(e);return n._methodName="FieldValue.increment",new s_(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MH={Firestore:NF,GeoPoint:DS,Timestamp:Gn,Blob:SI,Transaction:OF,WriteBatch:kF,DocumentReference:dc,DocumentSnapshot:AI,Query:lo,QueryDocumentSnapshot:MI,QuerySnapshot:uO,CollectionReference:jv,FieldPath:dO,FieldValue:s_,setLogLevel:function SH(t){!function ZD(t){cu.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function RH(t){(function xH(t,e){t.INTERNAL.registerComponent(new Qr.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},MH)))})(t,(e,n)=>new NF(e,n,new TH)),t.registerVersion("@firebase/firestore-compat","0.3.12")}(EE.Z);var hO=F(3019),FS=F(3093),NH=F(4552);class OH extends Xs.x{constructor(e=1/0,n=1/0,r=NH.l){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;n||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=n.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var fO=F(3020);function LF(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,(0,fO.B)({connector:()=>new OH(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function UF(t,e){return(0,Ii.m)(e)?(0,En.w)(()=>t,e):(0,En.w)(()=>t)}var pO=F(5137);const mO=new Map,VF={activated:!1,tokenObservers:[]},UH={initialized:!1,enabled:!1};function ti(t){return mO.get(t)||Object.assign({},VF)}function US(){return UH}const _O="https://content-firebaseappcheck.googleapis.com/v1",HH="exchangeDebugToken",BF={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class GH{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,we.Z)(function*(){n.stop();try{n.pending=new P.BH,yield function zH(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new P.BH,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const _s=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yO(t){if(!ti(t).activated)throw _s.create("use-before-activation",{appName:t.name})}function jS(t,e){return wO.apply(this,arguments)}function wO(){return wO=(0,we.Z)(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(t,o)}catch(S){throw _s.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw _s.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw _s.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw _s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}}),wO.apply(this,arguments)}function jF(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${_O}/projects/${n}/apps/${r}:${HH}?key=${i}`,body:{debug_token:e}}}const KH="firebase-app-check-database",YH=1,xI="firebase-app-check-store";let HS=null;function EO(){return EO=(0,we.Z)(function*(t,e){const r=(yield function $F(){return HS||(HS=new Promise((t,e)=>{try{const n=indexedDB.open(KH,YH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(_s.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(xI,{keyPath:"compositeKey"})}}catch(n){e(_s.create("storage-open",{originalErrorMessage:n?.message}))}}),HS)}()).transaction(xI,"readwrite"),o=r.objectStore(xI).put({compositeKey:t,value:e});return new Promise((l,h)=>{o.onsuccess=_=>{l()},r.onerror=_=>{var w;h(_s.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),EO.apply(this,arguments)}const RI=new gs.Yd("@firebase/app-check");function bO(t,e){return(0,P.hl)()?function XH(t,e){return function GF(t,e){return EO.apply(this,arguments)}(function qF(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{RI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function TO(){return US().enabled}function SO(){return AO.apply(this,arguments)}function AO(){return AO=(0,we.Z)(function*(){const t=US();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),AO.apply(this,arguments)}const i$={error:"UNKNOWN_ERROR"};function s$(t){return P.US.encodeString(JSON.stringify(t),!1)}function $S(t){return MO.apply(this,arguments)}function MO(){return MO=(0,we.Z)(function*(t,e=!1){const n=t.app;yO(n);const r=ti(n);let o,i=r.token;if(i&&!Hv(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Hv(_)?i=_:yield bO(n,void 0))}if(!e&&i&&Hv(i))return{token:i.token};let h,l=!1;if(TO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jS(jF(n,yield SO()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield bO(n,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ti(n).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?RI.warn(_.message):RI.error(_),o=_}return i?o?h=Hv(i)?{token:i.token,internalError:o}:YF(o):(h={token:i.token},r.token=i,yield bO(n,i)):h=YF(o),l&&function KF(t,e){const n=ti(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,h),h}),MO.apply(this,arguments)}function xO(){return xO=(0,we.Z)(function*(t){const e=t.app;yO(e);const{provider:n}=ti(e);if(TO()){const r=yield SO(),{token:i}=yield jS(jF(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}}),xO.apply(this,arguments)}function NO(t,e){const n=ti(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function ZF(t){const{app:e}=t,n=ti(e);let r=n.tokenRefresher;r||(r=function o$(t){const{app:e}=t;return new GH((0,we.Z)(function*(){let r;if(r=ti(e).token?yield $S(t,!0):yield $S(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=ti(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},BF.RETRIAL_MIN_WAIT,BF.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Hv(t){return t.expireTimeMillis-Date.now()>0}function YF(t){return{token:s$(i$),error:t}}class a${constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=ti(this.app);for(const n of e)NO(this.app,n.next);return Promise.resolve()}}const iL="app-check-internal";!function E$(){(0,ps._registerComponent)(new Qr.wA("app-check",t=>function c$(t,e){return new a$(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(iL).initialize()})),(0,ps._registerComponent)(new Qr.wA(iL,t=>function l$(t){return{getToken:e=>$S(t,e),getLimitedUseToken:()=>function WF(t){return xO.apply(this,arguments)}(t),addTokenListener:e=>function RO(t,e,n,r){const{app:i}=t,o=ti(i);if(o.tokenObservers=[...o.tokenObservers,{next:n,error:r,type:e}],o.token&&Hv(o.token)){const h=o.token;Promise.resolve().then(()=>{n({token:h.token}),ZF(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZF(t))}(t,"INTERNAL",e),removeTokenListener:e=>NO(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ps.registerVersion)("@firebase/app-check","0.8.0")}();class NI{constructor(){return(0,_n.vb)("app-check")}}typeof window<"u"&&window;var zS=F(7142);const LO=new f.OlP("angularfire2.auth.use-emulator"),UO=new f.OlP("angularfire2.auth.settings"),VO=new f.OlP("angularfire2.auth.tenant-id"),BO=new f.OlP("angularfire2.auth.langugage-code"),jO=new f.OlP("angularfire2.auth.use-device-language"),HO=new f.OlP("angularfire.auth.persistence"),$O=(t,e,n,r,i,o,l,h)=>(0,li.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const _=e.runOutsideAngular(()=>t.auth());if(n&&_.useEmulator(...n),r&&(_.tenantId=r),_.languageCode=i,o&&_.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))_.settings[w]=D;return h&&_.setPersistence(h),_},[n,r,i,o,l,h]);let OI=(()=>{class t{constructor(n,r,i,o,l,h,_,w,D,S,k,B){const W=new Xs.x,le=(0,dt.of)(void 0).pipe((0,FS.Q)(l.outsideAngular),(0,En.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5967)))),(0,mt.U)(()=>(0,li.on)(n,o,r)),(0,mt.U)(pe=>$O(pe,o,h,w,D,S,_,k)),LF({bufferSize:1,refCount:!1}));if(Wo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,dt.of)(null);else{le.pipe(Zr()).subscribe();const $e=le.pipe((0,En.w)(at=>at.getRedirectResult().then(Rt=>Rt,()=>null)),_n.iC,LF({bufferSize:1,refCount:!1})),nt=le.pipe((0,En.w)(at=>new Qi.y(Rt=>({unsubscribe:o.runOutsideAngular(()=>at.onAuthStateChanged(Wt=>Rt.next(Wt),Wt=>Rt.error(Wt),()=>Rt.complete()))})))),Qe=le.pipe((0,En.w)(at=>new Qi.y(Rt=>({unsubscribe:o.runOutsideAngular(()=>at.onIdTokenChanged(Wt=>Rt.next(Wt),Wt=>Rt.error(Wt),()=>Rt.complete()))}))));this.authState=$e.pipe(UF(nt),(0,pO.R)(l.outsideAngular),(0,FS.Q)(l.insideAngular)),this.user=$e.pipe(UF(Qe),(0,pO.R)(l.outsideAngular),(0,FS.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,En.w)(at=>at?(0,dn.D)(at.getIdToken()):(0,dt.of)(null))),this.idTokenResult=this.user.pipe((0,En.w)(at=>at?(0,dn.D)(at.getIdTokenResult()):(0,dt.of)(null))),this.credential=(0,hO.T)($e,W,this.authState.pipe(Rr(at=>!at))).pipe((0,mt.U)(at=>at?.user?at:null),(0,pO.R)(l.outsideAngular),(0,FS.Q)(l.insideAngular))}return(0,li.pX)(this,le,o,{spy:{apply:(pe,$e,nt)=>{(pe.startsWith("signIn")||pe.startsWith("createUser"))&&nt.then(Qe=>W.next(Qe))}}})}}return t.\u0275fac=function(n){return new(n||t)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_n.HU),f.LFG(LO,8),f.LFG(UO,8),f.LFG(VO,8),f.LFG(BO,8),f.LFG(jO,8),f.LFG(HO,8),f.LFG(NI,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),S$=(()=>{class t{constructor(){zS.Z.registerVersion("angularfire",_n.q4.full,"auth-compat")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[OI]}),t})();function oL(t,e){return function A$(t,e=yy.z){return new Qi.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function GO(t,e){return oL(t,e).pipe((0,mt.U)(n=>({payload:n,type:"query"})))}function qS(t,e){return GO(t,e).pipe(Ga(void 0),zb(),(0,mt.U)(([n,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),w=n?.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),o}))}function aL(t,e,n){return qS(t,n).pipe(oa((r,i)=>function x$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function R$(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return zO(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return zO(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zO(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),(0,Lg.x)(),(0,mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function zO(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function cL(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class lL{constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=qS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ga(void 0),zb(),Rr(([r,i])=>i.length>0||!r),(0,mt.U)(([r,i])=>i),_n.iC)}auditTrail(e){return this.stateChanges(e).pipe(oa((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=cL(e);return aL(this.query,n,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return GO(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(n=>n.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),_n.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(_n.iC)}add(e){return this.ref.add(e)}doc(e){return new uL(this.ref.doc(e),this.afs)}}class uL{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=fL(r,n);return new lL(i,o,this.afs)}snapshotChanges(){return function M$(t,e){return oL(t,e).pipe(Ga(void 0),zb(),(0,mt.U)(([n,r])=>r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(_n.iC)}}class N${constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?qS(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(n=>n.filter(r=>e.indexOf(r.type)>-1)),Rr(n=>n.length>0),_n.iC):qS(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(e){return this.stateChanges(e).pipe(oa((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=cL(e);return aL(this.query,n,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return GO(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),_n.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(_n.iC)}}const dL=new f.OlP("angularfire2.enableFirestorePersistence"),hL=new f.OlP("angularfire2.firestore.persistenceSettings"),O$=new f.OlP("angularfire2.firestore.settings"),k$=new f.OlP("angularfire2.firestore.use-emulator");function fL(t,e=(n=>n)){return{query:e(t),ref:t}}let pL=(()=>{class t{constructor(n,r,i,o,l,h,_,w,D,S,k,B,W,le,pe,$e,nt){this.schedulers=_;const Qe=(0,li.on)(n,h,r),at=D;S&&$O(Qe,h,k,W,le,pe,B,$e),[this.firestore,this.persistenceEnabled$]=(0,li.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Rt=h.runOutsideAngular(()=>Qe.firestore());if(o&&Rt.settings(o),at&&Rt.useEmulator(...at),i&&!Wo(l)){const Wt=()=>{try{return(0,dn.D)(Rt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ur){return typeof console<"u"&&console.warn(Ur),(0,dt.of)(!1)}};return[Rt,h.runOutsideAngular(Wt)]}return[Rt,(0,dt.of)(!1)]},[o,at,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:l}=fL(i,r),h=this.schedulers.ngZone.run(()=>o);return new lL(h,l,this)}collectionGroup(n,r){const i=r||(l=>l),o=this.firestore.collectionGroup(n);return new N$(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new uL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(n){return new(n||t)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(dL,8),f.LFG(O$,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_n.HU),f.LFG(hL,8),f.LFG(k$,8),f.LFG(OI,8),f.LFG(LO,8),f.LFG(UO,8),f.LFG(VO,8),f.LFG(BO,8),f.LFG(jO,8),f.LFG(HO,8),f.LFG(NI,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),P$=(()=>{class t{constructor(){zS.Z.registerVersion("angularfire",_n.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:dL,useValue:!0},{provide:hL,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[pL]}),t})(),$v=(()=>{var t;class e{constructor(r,i,o){this.router=r,this.afs=i,this.afAuth=o,this.savedUsers=[],this.isLoggedIn=!1,this.user=[]}login(r){console.log(r.email),this.afAuth.signInWithEmailAndPassword(r.email,r.password).then(i=>{console.log(i.user),this.isLoggedIn=!0,this.router.navigate(["home"])}).catch(i=>{alert("Error registering user: "+i.message)})}saveUser(r,i){this.afAuth.createUserWithEmailAndPassword(r.email,i).then(o=>{console.log("User registered:",o.user)}).catch(o=>{alert("Error registering user: "+o.message)})}registerUser(r,i){this.saveUser({email:r,password:i},i)}getSavedUsers(){const r=localStorage.getItem("users");return r?JSON.parse(r):[]}getCurrentUser(){return new Promise((r,i)=>{this.afAuth.onAuthStateChanged(o=>{r(o?{email:o.email||"",password:""}:null)})})}logout(){this.isLoggedIn=!1}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(es),f.LFG(pL),f.LFG(OI))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function F$(t,e){if(1&t&&(f.TgZ(0,"li",7),f._uU(1),f.qZA()),2&t){const n=f.oxw(2);f.xp6(1),f.hij(" ",n.user.email,"")}}function L$(t,e){if(1&t){const n=f.EpF();f.TgZ(0,"ul",3),f.YNc(1,F$,2,1,"li",4),f.TgZ(2,"li")(3,"a",5),f.NdJ("click",function(){f.CHM(n);const i=f.oxw();return f.KtG(i.logout())}),f._uU(4,"Sign Out"),f.qZA()(),f.TgZ(5,"li")(6,"a",6),f.NdJ("click",function(){f.CHM(n);const i=f.oxw();return f.KtG(i.closeButton())}),f._uU(7,"Close"),f.qZA()()()}if(2&t){const n=f.oxw();f.xp6(1),f.Q6J("ngIf",n.user)}}let U$=(()=>{var t;class e{constructor(r,i){this.authService=r,this.router=i,this.isSignOutVisible=!1,this.user=null}ngOnInit(){this.authService.getCurrentUser().then(r=>{this.user=r})}showSignOutButton(){this.isSignOutVisible=!0}logout(){this.authService.logout(),this.router.navigate(["/login"])}closeButton(){this.isSignOutVisible=!1}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36($v),f.Y36(es))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-my-account"]],decls:4,vars:1,consts:[[1,"my-account-wrapper"],["type","button","aria-expanded","false",1,"my-account-dropdown-item",3,"click"],["class","my-account-dropdown-menu",4,"ngIf"],[1,"my-account-dropdown-menu"],["class","my-account-user",4,"ngIf"],[1,"my-account-dropdown-list",3,"click"],[1,"my-account-close-button",3,"click"],[1,"my-account-user"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0)(1,"button",1),f.NdJ("click",function(){return i.showSignOutButton()}),f._uU(2,"My Account"),f.qZA(),f.YNc(3,L$,8,1,"ul",2),f.qZA()),2&r&&(f.xp6(3),f.Q6J("ngIf",i.isSignOutVisible))},dependencies:[Gs],styles:[".my-account-wrapper[_ngcontent-%COMP%]{position:relative}.my-account-dropdown-item[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;font-size:medium;color:#fff}.my-account-dropdown-menu[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:48px;transform:translateY(100%);color:#000;list-style-type:none}.my-account-dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px;color:#fff;text-decoration:none}.my-account-user[_ngcontent-%COMP%]{margin-bottom:20px}.my-account-dropdown-list[_ngcontent-%COMP%]{padding:8px 24px;border-radius:8px;color:#000;cursor:pointer;background-color:#c3acd0}.my-account-dropdown-list[_ngcontent-%COMP%]:hover{background-color:#674188;color:#fff}.my-account-close-button[_ngcontent-%COMP%]{display:block;text-align:right;margin-top:20px;padding:6px;border-radius:6px;font-size:medium;cursor:pointer}.my-account-close-button[_ngcontent-%COMP%]:hover{background-color:#674188;color:#fff}"]}),e})();function V$(t,e){1&t&&(f.TgZ(0,"ul",3)(1,"li",4)(2,"a",5),f._uU(3,"Contact"),f.qZA()(),f.TgZ(4,"li",4)(5,"a",6),f._uU(6,"About"),f.qZA()(),f.TgZ(7,"li",4)(8,"a",7),f._uU(9,"Shared Posts"),f.qZA()(),f.TgZ(10,"li",4),f._UZ(11,"app-my-account",8),f.qZA()())}let qO=(()=>{var t;class e{constructor(r){this.authService=r,this.isSignOutVisible=!1}isLoggedIn(){return this.authService.isLoggedIn}hideSignOutButton(){this.isSignOutVisible=!1}logout(){this.authService.logout()}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36($v))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-navigation"]],decls:3,vars:1,consts:[[1,"navigation-wrapper"],["src","assets/logo.png","alt","","routerLink","/home",1,"logo-nav"],["class","navigation-list",4,"ngIf"],[1,"navigation-list"],[1,"navigation-list-item"],["routerLink","/contact",1,"navigation-list-item-link"],["routerLink","/about",1,"navigation-list-item-link"],["routerLink","/shared-post",1,"navigation-list-item-link"],[1,"navigation-list-item-link"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.YNc(2,V$,12,0,"ul",2),f.qZA()),2&r&&(f.xp6(2),f.Q6J("ngIf",i.isLoggedIn()))},dependencies:[Gs,df,U$],styles:[".navigation-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;padding:14px 0;background-color:#674188}.logo-nav[_ngcontent-%COMP%]{width:200px;height:50px;margin-left:25px;filter:alpha(opacity=40);transition:none}.navigation-list[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.navigation-list-item[_ngcontent-%COMP%]{margin:0 20px;font-size:large;text-decoration:none;list-style-type:none}.navigation-list-item-link[_ngcontent-%COMP%]{text-decoration:none;color:#fff;transition:.4s ease-in-out}.navigation-list-item-link[_ngcontent-%COMP%]:hover{color:#000}"]}),e})(),B$=(()=>{var t;class e{constructor(r){this.authService=r,this.email="",this.password=""}login(){console.log(this.email),this.authService.login(new WP(this.email,this.password))}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36($v))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"default-auth-wrapper"],[1,"default-auth-background"],["type","text","placeholder","Email or Phone","id","username","name","email",1,"default-auth-input",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","id","password","name","password",1,"default-auth-input",3,"ngModel","ngModelChange"],["routerLink","/login",1,"login-button",3,"click"],["href","#",1,"login-forgot-password"],["routerLink","/register"]],template:function(r,i){1&r&&(f._UZ(0,"app-navigation"),f.TgZ(1,"div",0)(2,"div",1)(3,"form")(4,"input",2),f.NdJ("ngModelChange",function(l){return i.email=l}),f.qZA(),f.TgZ(5,"input",3),f.NdJ("ngModelChange",function(l){return i.password=l}),f.qZA(),f.TgZ(6,"button",4),f.NdJ("click",function(){return i.login()}),f._uU(7,"Login"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"Forgot password?"),f.qZA(),f.TgZ(10,"p"),f._uU(11," You dont't have an account?"),f.TgZ(12,"a",6),f._uU(13,"Register"),f.qZA()()()()()),2&r&&(f.xp6(4),f.Q6J("ngModel",i.email),f.xp6(1),f.Q6J("ngModel",i.password))},dependencies:[df,vf,nl,Ig,Cg,fy,Og,qO],styles:[".login-forgot-password[_ngcontent-%COMP%]{display:block;text-align:right;font-size:12px;text-decoration:none;color:#fffbf5}"]}),e})(),j$=(()=>{var t;class e{constructor(r,i,o){this.fb=r,this.authService=i,this.router=o}ngOnInit(){this.registerForm=this.fb.group({email:this.fb.control("",[Ad.required,Ad.email]),password:this.fb.control("",[Ad.required,Ad.minLength(6)])})}createUser(){this.registerForm.valid&&(this.authService.registerUser(this.registerForm.value.email,this.registerForm.value.password),this.registerForm.reset(),this.router.navigate(["/home"]))}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36(JM),f.Y36($v),f.Y36(es))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-register"]],decls:13,vars:1,consts:[[1,"default-auth-wrapper"],[1,"default-auth-background"],[3,"formGroup","ngSubmit"],["formControlName","email","type","text","placeholder","Enter your E-Mail","id","username",1,"default-auth-input"],["formControlName","password","type","password","placeholder","Password","id","password",1,"default-auth-input"],["formControlName","password","type","password","placeholder","Repeat Password","id","repeat-password",1,"default-auth-input"],["routerLink","/register","type","submit",1,"register-button"],["routerLink","/login"]],template:function(r,i){1&r&&(f._UZ(0,"app-navigation"),f.TgZ(1,"div",0)(2,"div",1)(3,"form",2),f.NdJ("ngSubmit",function(){return i.createUser()}),f._UZ(4,"input",3)(5,"input",4)(6,"input",5),f.TgZ(7,"button",6),f._uU(8,"Register"),f.qZA(),f.TgZ(9,"p"),f._uU(10,"You have an account?"),f.TgZ(11,"a",7),f._uU(12,"Login"),f.qZA()()()()()),2&r&&(f.xp6(3),f.Q6J("formGroup",i.registerForm))},dependencies:[df,vf,nl,Ig,Cg,no,wf,qO]}),e})(),gL=(()=>{var t;class e{constructor(r,i){this.authService=r,this.router=i}canActivate(r,i){return!!this.authService.isLoggedIn||(this.router.navigate(["/login"]),!1)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG($v),f.LFG(es))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),e})();const H$=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:B$},{path:"register",component:j$},{path:"home",component:ax,canActivate:[gL]},{path:"contact",component:CM},{path:"about",component:lx},{path:"shared-post",component:Gb},{path:"**",component:$b}];let $$=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[gL],imports:[YC.forRoot(H$),YC]}),e})(),G$=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-footer"]],decls:69,vars:0,consts:[[1,"content"],[1,"footer-container"],[1,"footer-content-list"],[1,"footer-icons-wrapper"],[1,"footer-list-item"],["href","",1,"nav-link"],[1,"icon-instagram"],[1,"icon-facebook"],[1,"icon-twitter"],[1,"icon-whatsapp"],[1,"footer-list-unstyled"],["href","#"],["href",""],[1,"footer-contact-container"],["type","email","id","input-email","placeholder","Enter email",1,"footer-form-control"],["id","footer-message","placeholder","Message",1,"footer-form-control"],["type","button",1,"footer-button-send"],["id","footer-qr-name"],[1,"icon-qrcode"]],template:function(r,i){1&r&&(f.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"ul",3)(5,"li",4)(6,"a",5),f._UZ(7,"i",6),f.qZA()(),f.TgZ(8,"li",4)(9,"a",5),f._UZ(10,"i",7),f.qZA()(),f.TgZ(11,"li",4)(12,"a",5),f._UZ(13,"i",8),f.qZA()(),f.TgZ(14,"li",4)(15,"a",5),f._UZ(16,"i",9),f.qZA()()(),f.TgZ(17,"ul",10)(18,"li",4)(19,"a",11),f._uU(20,"Product"),f.qZA()(),f.TgZ(21,"li",4)(22,"a",11),f._uU(23,"Benefits"),f.qZA()(),f.TgZ(24,"li",4)(25,"a",11),f._uU(26,"Partners"),f.qZA()(),f.TgZ(27,"li",4)(28,"a",11),f._uU(29,"Team"),f.qZA()()(),f.TgZ(30,"ul",10)(31,"li",4)(32,"a",11),f._uU(33,"Downloads"),f.qZA()(),f.TgZ(34,"li",4)(35,"a",11),f._uU(36,"Research"),f.qZA()(),f.TgZ(37,"li",4)(38,"a",11),f._uU(39,"Faq"),f.qZA()(),f.TgZ(40,"li",4)(41,"a",11),f._uU(42,"Careers"),f.qZA()()(),f.TgZ(43,"ul",10)(44,"li",4)(45,"a",12),f._uU(46,"Documentation"),f.qZA()(),f.TgZ(47,"li",4)(48,"a",12),f._uU(49,"Support"),f.qZA()(),f.TgZ(50,"li",4)(51,"a",12),f._uU(52,"Legal Terms"),f.qZA()(),f.TgZ(53,"li",4)(54,"a",12),f._uU(55,"About"),f.qZA()()()(),f.TgZ(56,"form",13)(57,"h4"),f._uU(58,"Contact Us"),f.qZA(),f.TgZ(59,"div"),f._UZ(60,"input",14),f.qZA(),f.TgZ(61,"div"),f._UZ(62,"textarea",15),f.qZA(),f.TgZ(63,"div")(64,"button",16),f._uU(65,"Send"),f.qZA()()()()()(),f.TgZ(66,"h5",17),f._UZ(67,"i",18),f._uU(68," Social Media INC. 2023 "),f.qZA())},dependencies:[vf,Cg,Og],styles:[".footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-top:15px}.footer-content-list[_ngcontent-%COMP%]{display:flex}.footer-icons-wrapper[_ngcontent-%COMP%], .footer-list-unstyled[_ngcontent-%COMP%]{list-style-type:none}.footer-list-item[_ngcontent-%COMP%]{margin:10px 18px}a[_ngcontent-%COMP%]{color:#eae3d2;text-decoration:none;font-family:Cantarell,serif}.footer-contact-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.footer-form-control[_ngcontent-%COMP%]{width:300px;margin:10px 0;padding:6px 0;border-radius:6px;font-size:small;outline:none;color:#000;border:none;resize:none;background-color:#c3acd0;transition:.5s ease-in-out}.footer-form-control[_ngcontent-%COMP%]:hover{background-color:#f9f5eb}.footer-button-send[_ngcontent-%COMP%]{display:flex;margin:15px 0;padding:8px 20px;font-size:medium;z-index:2;border-radius:8px;border:none}.footer-button-send[_ngcontent-%COMP%]:hover{background-color:#eae3d2}#footer-qr-name[_ngcontent-%COMP%]{display:flex;justify-content:center;color:#eae3d2;font-size:small}"]}),e})();function z$(t,e){1&t&&f._UZ(0,"div")}function q$(t,e){1&t&&f._UZ(0,"router-outlet")}function W$(t,e){1&t&&(f.TgZ(0,"nav"),f._UZ(1,"app-navigation"),f.qZA(),f.TgZ(2,"main",3)(3,"div",4)(4,"div",5),f._UZ(5,"router-outlet"),f.qZA()()(),f.TgZ(6,"footer")(7,"div",5),f._UZ(8,"app-footer"),f.qZA()())}let WO,Z$=(()=>{var t;class e{constructor(r){this.authService=r,this.title="social-media",this.isLoggedIn=!0,this.isLoggedIn=r.isLoggedIn}}return(t=e).\u0275fac=function(r){return new(r||t)(f.Y36($v))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-root"]],decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["loginPage",""],["mainContent",""],[1,"site-container"],[1,"default-container"],[1,"content"]],template:function(r,i){if(1&r&&(f.YNc(0,z$,1,0,"div",0),f.YNc(1,q$,1,0,"ng-template",null,1,f.W1O),f.YNc(3,W$,9,0,"ng-template",null,2,f.W1O)),2&r){const o=f.MAs(2),l=f.MAs(4);f.Q6J("ngIf",!i.authService.isLoggedIn)("ngIfThen",o)("ngIfElse",l)}},dependencies:[Gs,Os,qO,G$],styles:["footer[_ngcontent-%COMP%]{background-color:#674188;color:#eae3d2}"]}),e})();try{WO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{WO=!1}let kI,mL=(()=>{var t;class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?function Dl(t){return t===Ma}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!WO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(f.Lbi))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function WS(t){return function K$(){if(null==kI&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kI=!0}))}finally{kI=kI||!1}return kI}()?t:!!t.capture}function yL(t){return Array.isArray(t)?t:[t]}function vL(t){return t instanceof f.SBq?t.nativeElement:t}function wL(t,e=yy.z){return(0,Hn.e)((n,r)=>{let i=null,o=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=o;o=null,r.next(w)}};function _(){const w=l+t,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}n.subscribe((0,sr.x)(r,w=>{o=w,l=e.now(),i||(i=e.schedule(_,t),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}var EL=F(2420);function a3(t){return(0,Hn.e)((e,n)=>{(0,bo.Xf)(t).subscribe((0,sr.x)(n,()=>n.complete(),EL.Z)),!n.closed&&e.subscribe(n)})}const IL=new Set;let a_,c3=(()=>{var t;class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):u3}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&function l3(t,e){if(!IL.has(t))try{a_||(a_=document.createElement("style"),e&&(a_.nonce=e),a_.setAttribute("type","text/css"),document.head.appendChild(a_)),a_.sheet&&(a_.sheet.insertRule(`@media ${t} {body{ }}`,0),IL.add(t))}catch(n){console.error(n)}}(r,this._nonce),this._matchMedia(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(mL),f.LFG(f.Ojb,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function u3(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let d3=(()=>{var t;class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new Xs.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return CL(yL(r)).some(o=>this._registerQuery(o).mql.matches)}observe(r){let l=Ui(CL(yL(r)).map(h=>this._registerQuery(h).observable));return l=ad(l.pipe(sa(1)),l.pipe(function o3(t){return Rr((e,n)=>t<=n)}(1),wL(0))),l.pipe((0,mt.U)(h=>{const _={matches:!1,breakpoints:{}};return h.forEach(({matches:w,query:D})=>{_.matches=_.matches||w,_.breakpoints[D]=w}),_}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);const i=this._mediaMatcher.matchMedia(r),l={observable:new Qi.y(h=>{const _=w=>this._zone.run(()=>h.next(w));return i.addListener(_),()=>{i.removeListener(_)}}).pipe(Ga(i),(0,mt.U)(({matches:h})=>({query:r,matches:h})),a3(this._destroySubject)),mql:i};return this._queries.set(r,l),l}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(c3),f.LFG(f.R0b))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function CL(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}const SL="cdk-high-contrast-black-on-white",AL="cdk-high-contrast-white-on-black",KO="cdk-high-contrast-active";let I3=(()=>{var t;class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=(0,f.f3M)(d3).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(r):null,l=(o&&o.backgroundColor||"").replace(/ /g,"");switch(r.remove(),l){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const r=this._document.body.classList;r.remove(KO,SL,AL),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?r.add(KO,SL):2===i&&r.add(KO,AL)}}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(mL),f.LFG(fe))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),ML=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({}),e})();const T3=new f.OlP("mat-sanity-checks",{providedIn:"root",factory:function D3(){return!0}});let OL=(()=>{var t;class e{constructor(r,i,o){this._sanityChecks=i,this._document=o,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return!function X$(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[r])}}return(t=e).\u0275fac=function(r){return new(r||t)(f.LFG(I3),f.LFG(T3,8),f.LFG(fe))},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[ML,ML]}),e})();class A3{constructor(e,n,r,i=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const kL=WS({passive:!0,capture:!0});class M3{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=function Q$(t){return t.composedPath?t.composedPath()[0]:t.target}(e);n&&this._events.get(e.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,r,i){const o=this._events.get(n);if(o){const l=o.get(r);l?l.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,kL)})}removeHandler(e,n,r){const i=this._events.get(e);if(!i)return;const o=i.get(n);o&&(o.delete(r),0===o.size&&i.delete(n),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,kL)))}}const PL={enterDuration:225,exitDuration:150},FL=WS({passive:!0,capture:!0}),LL=["mousedown","touchstart"],UL=["mouseup","mouseleave","touchend","touchcancel"];class KS{constructor(e,n,r,i){this._target=e,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=vL(r))}fadeInRipple(e,n,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...PL,...r.animation};r.centered&&(e=i.left+i.width/2,n=i.top+i.height/2);const l=r.radius||function R3(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(e,n,i),h=e-i.left,_=n-i.top,w=o.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=h-l+"px",D.style.top=_-l+"px",D.style.height=2*l+"px",D.style.width=2*l+"px",null!=r.color&&(D.style.backgroundColor=r.color),D.style.transitionDuration=`${w}ms`,this._containerElement.appendChild(D);const S=window.getComputedStyle(D),B=S.transitionDuration,W="none"===S.transitionProperty||"0s"===B||"0s, 0s"===B||0===i.width&&0===i.height,le=new A3(this,D,r,W);D.style.transform="scale3d(1, 1, 1)",le.state=0,r.persistent||(this._mostRecentTransientRipple=le);let pe=null;return!W&&(w||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const $e=()=>this._finishRippleTransition(le),nt=()=>this._destroyRipple(le);D.addEventListener("transitionend",$e),D.addEventListener("transitioncancel",nt),pe={onTransitionEnd:$e,onTransitionCancel:nt}}),this._activeRipples.set(le,pe),(W||!w)&&this._finishRippleTransition(le),le}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,r={...PL,...e.config.animation};n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=vL(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,LL.forEach(r=>{KS._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UL.forEach(n=>{this._triggerElement.addEventListener(n,this,FL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=function v3(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function w3(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(LL.forEach(n=>KS._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&UL.forEach(n=>e.removeEventListener(n,this,FL)))}}KS._eventManager=new M3;let u4=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[OL,OL]}),e})(),d4=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[yi]}),e})();const n2="firebasestorage.googleapis.com",r2="storageBucket";class Fr extends P.ZR{constructor(e,n,r=0){super(rk(e),`Firebase Storage: ${n} (${rk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ir=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Ir||{});function rk(t){return"storage/"+t}function ik(){return new Fr(Ir.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function i2(){return new Fr(Ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s2(){return new Fr(Ir.CANCELED,"User canceled the upload/download.")}function o2(){return new Fr(Ir.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zv(t){return new Fr(Ir.INVALID_ARGUMENT,t)}function a2(){return new Fr(Ir.APP_DELETED,"The Firebase app was deleted.")}function c2(t){return new Fr(Ir.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function VI(t,e){return new Fr(Ir.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function BI(t){throw new Fr(Ir.INTERNAL_ERROR,"Internal error: "+t)}class Vs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vs.makeFromUrl(e,n)}catch{return new Vs(e,"")}if(""===r.path)return r;throw function E4(t){return new Fr(Ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(at){at.path_=decodeURIComponent(at.path)}const S=n.replace(/[.]/g,"\\."),Qe=[{regex:h,indices:{bucket:1,path:3},postModify:function o(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${n===n2?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let at=0;at<Qe.length;at++){const Rt=Qe[at],Wt=Rt.regex.exec(e);if(Wt){let Ho=Wt[Rt.indices.path];Ho||(Ho=""),r=new Vs(Wt[Rt.indices.bucket],Ho),Rt.postModify(r);break}}if(null==r)throw function w4(t){return new Fr(Ir.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class T4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tA(t){return"string"==typeof t||t instanceof String}function l2(t){return sk()&&t instanceof Blob}function sk(){return typeof Blob<"u"&&!(0,P.UG)()}function ok(t,e,n,r){if(r<e)throw zv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw zv(`Invalid value for '${t}'. Expected ${n} or less.`)}function ih(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function u2(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var qv=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(qv||{});function d2(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==e.indexOf(t);return n||i||o}class N4{constructor(e,n,r,i,o,l,h,_,w,D,S,k=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,W)=>{this.resolve_=B,this.reject_=W,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function M4(t){return void 0!==t}(_)?o():o(_)}catch(_){l(_)}else if(null!==h){const _=ik();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?a2():s2():i2())};this.canceled_?n(0,new nA(!1,null,!0)):this.backoffId_=function S4(t,e,n){let r=1,i=null,o=null,l=!1,h=0;function _(){return 2===h}let w=!1;function D(...pe){w||(w=!0,e.apply(null,pe))}function S(pe){i=setTimeout(()=>{i=null,t(B,_())},pe)}function k(){o&&clearTimeout(o)}function B(pe,...$e){if(w)return void k();if(pe)return k(),void D.call(null,pe,...$e);if(_()||l)return k(),void D.call(null,pe,...$e);let Qe;r<64&&(r*=2),1===h?(h=2,Qe=0):Qe=1e3*(r+Math.random()),S(Qe)}let W=!1;function le(pe){W||(W=!0,k(),!w&&(null!==i?(pe||(h=2),clearTimeout(i),S(0)):pe||(h=1)))}return S(0),o=setTimeout(()=>{l=!0,le(!0)},n),le}((r,i)=>{if(i)return void r(!1,new nA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===qv.NO_ERROR,_=o.getStatus();if(!h||d2(_,this.additionalRetryCodes_)&&this.retry){const D=o.getErrorCode()===qv.ABORT;return void r(!1,new nA(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new nA(w,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function A4(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nA{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function V4(...t){const e=function U4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(sk())return new Blob(t);throw new Fr(Ir.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ak{constructor(e,n){this.data=e,this.contentType=n||null}}function ck(t,e){switch(t){case wa.RAW:return new ak(h2(e));case wa.BASE64:case wa.BASE64URL:return new ak(f2(t,e));case wa.DATA_URL:return new ak(function $4(t){const e=new p2(t);return e.base64?f2(wa.BASE64,e.rest):function H4(t){let e;try{e=decodeURIComponent(t)}catch{throw VI(wa.DATA_URL,"Malformed data URL.")}return h2(e)}(e.rest)}(e),function G4(t){return new p2(t).contentType}(e))}throw ik()}function h2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function f2(t,e){switch(t){case wa.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw VI(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wa.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw VI(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function j4(t){if(typeof atob>"u")throw function D4(t){return new Fr(Ir.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:VI(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class p2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw VI(wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function z4(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Iu{constructor(e,n){let r=0,i="";l2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(l2(this.data_)){const i=function B4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new Iu(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Iu(r,!0)}}static getBlob(...e){if(sk()){const n=e.map(r=>r instanceof Iu?r.data_:r);return new Iu(V4.apply(null,n))}{const n=e.map(l=>tA(l)?ck(wa.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let h=0;h<l.length;h++)i[o++]=l[h]}),new Iu(i,!0)}}uploadData(){return this.data_}}function lk(t){let e;try{e=JSON.parse(t)}catch{return null}return function R4(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function g2(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Z4(t,e){return e}class uo{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Z4}}let rA=null;function jI(){if(rA)return rA;const t=[];t.push(new uo("bucket")),t.push(new uo("generation")),t.push(new uo("metageneration")),t.push(new uo("name","fullPath",!0));const n=new uo("name");n.xform=function e(o,l){return function K4(t){return!tA(t)||t.length<2?t:g2(t)}(l)},t.push(n);const i=new uo("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},t.push(i),t.push(new uo("timeCreated")),t.push(new uo("updated")),t.push(new uo("md5Hash",null,!0)),t.push(new uo("cacheControl",null,!0)),t.push(new uo("contentDisposition",null,!0)),t.push(new uo("contentEncoding",null,!0)),t.push(new uo("contentLanguage",null,!0)),t.push(new uo("contentType",null,!0)),t.push(new uo("metadata","customMetadata",!0)),rA=t,rA}function m2(t,e,n){const r=lk(e);return null===r?null:function Q4(t,e,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return function Y4(t,e){Object.defineProperty(t,"ref",{get:function n(){const o=new Vs(t.bucket,t.fullPath);return e._makeStorageReference(o)}})}(r,t),r}(t,r,n)}function uk(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}const _2="prefixes",y2="items";class Cu{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function bu(t){if(!t)throw ik()}function iA(t,e){return function n(r,i){const o=m2(t,i,e);return bu(null!==o),o}}function Wv(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function y4(){return new Fr(Ir.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function _4(){return new Fr(Ir.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function m4(t){return new Fr(Ir.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function v4(t){return new Fr(Ir.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function HI(t){const e=Wv(t);return function n(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function g4(t){return new Fr(Ir.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),o.serverResponse=i.serverResponse,o}}function v2(t,e,n){const i=ih(e.fullServerUrl(),t.host,t._protocol),l=t.maxOperationRetryTime,h=new Cu(i,"GET",iA(t,n),l);return h.errorHandler=HI(e),h}function rG(t,e,n,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=ih(e.bucketOnlyServerUrl(),t.host,t._protocol),w=t.maxOperationRetryTime,D=new Cu(h,"GET",function tG(t,e){return function n(r,i){const o=function eG(t,e,n){const r=lk(n);return null===r?null:function J4(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[_2])for(const i of n[_2]){const o=i.replace(/\/$/,""),l=t._makeStorageReference(new Vs(e,o));r.prefixes.push(l)}if(n[y2])for(const i of n[y2]){const o=t._makeStorageReference(new Vs(e,i.name));r.items.push(o)}return r}(t,e,r)}(t,e,i);return bu(null!==o),o}}(t,e.bucket),w);return D.urlParams=o,D.errorHandler=Wv(e),D}function E2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function aG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class sA{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function dk(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{bu(!1)}return bu(!!n&&-1!==(e||["active"]).indexOf(n)),n}const dG={STATE_CHANGED:"state_changed"},ho={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hk(t){switch(t){case"running":case"pausing":case"canceling":return ho.RUNNING;case"paused":return ho.PAUSED;case"success":return ho.SUCCESS;case"canceled":return ho.CANCELED;default:return ho.ERROR}}class hG{constructor(e,n,r){if(function x4(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Zv(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let b2=null;class fG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw BI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw BI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw BI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw BI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw BI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class pG extends fG{initXhr(){this.xhr_.responseType="text"}}function yl(){return b2?b2():new pG}class D2{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=jI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ir.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(d2(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=i2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ir.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function cG(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),l=E2(e,r,i),h={name:l.fullPath},_=ih(o,t.host,t._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=uk(l,n),W=new Cu(_,"POST",function B(le){let pe;dk(le);try{pe=le.getResponseHeader("X-Goog-Upload-URL")}catch{bu(!1)}return bu(tA(pe)),pe},t.maxUploadRetryTime);return W.urlParams=h,W.headers=D,W.body=S,W.errorHandler=Wv(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,yl,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function lG(t,e,n,r){const _=new Cu(n,"POST",function o(w){const D=dk(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{bu(!1)}S||bu(!1);const k=Number(S);return bu(!isNaN(k)),new sA(k,r.size(),"final"===D)},t.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Wv(e),_}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,yl,n,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new sA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function uG(t,e,n,r,i,o,l,h){const _=new sA(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function C4(){return new Fr(Ir.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const S=_.current;let B="";B=0===D?"finalize":w===D?"upload, finalize":"upload";const W={"X-Goog-Upload-Command":B,"X-Goog-Upload-Offset":`${_.current}`},le=r.slice(S,S+D);if(null===le)throw o2();const Qe=new Cu(n,"POST",function pe(at,Rt){const Wt=dk(at,["active","final"]),Ur=_.current+D,Ho=r.size();let I_;return I_="final"===Wt?iA(e,o)(at,Rt):null,new sA(Ur,Ho,"final"===Wt,I_)},e.maxUploadRetryTime);return Qe.headers=W,Qe.body=le.uploadData(),Qe.progressCallback=h||null,Qe.errorHandler=Wv(t),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,yl,i,o,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=v2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,yl,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function I2(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let Qe="";for(let at=0;at<2;at++)Qe+=Math.random().toString().slice(2);return Qe}();l["Content-Type"]="multipart/related; boundary="+_;const w=E2(e,r,i),D=uk(w,n),B=Iu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===B)throw o2();const W={name:w.fullPath},le=ih(o,t.host,t._protocol),$e=t.maxUploadRetryTime,nt=new Cu(le,"POST",iA(t,n),$e);return nt.urlParams=W,nt.headers=l,nt.body=B.uploadData(),nt.errorHandler=Wv(e),nt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,yl,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=s2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new hG(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hk(this._state)){case ho.SUCCESS:Zv(this._resolve.bind(null,this.snapshot))();break;case ho.CANCELED:case ho.ERROR:Zv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hk(this._state)){case ho.RUNNING:case ho.PAUSED:e.next&&Zv(e.next.bind(e,this.snapshot))();break;case ho.SUCCESS:e.complete&&Zv(e.complete.bind(e))();break;default:e.error&&Zv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class u_{constructor(e,n){this._service=e,this._location=n instanceof Vs?n:Vs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new u_(e,n)}get root(){const e=new Vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return g2(this._location.path)}get storage(){return this._service}get parent(){const e=function q4(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Vs(this._location.bucket,e);return new u_(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw c2(e)}}function S2(t,e,n){return fk.apply(this,arguments)}function fk(){return fk=(0,we.Z)(function*(t,e,n){const i=yield A2(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield S2(t,e,i.nextPageToken))}),fk.apply(this,arguments)}function A2(t,e){null!=e&&"number"==typeof e.maxResults&&ok("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=rG(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,yl)}function TG(t){t._throwIfRoot("getDownloadURL");const e=function iG(t,e,n){const i=ih(e.fullServerUrl(),t.host,t._protocol),l=t.maxOperationRetryTime,h=new Cu(i,"GET",function nG(t,e){return function n(r,i){const o=m2(t,i,e);return bu(null!==o),function X4(t,e,n,r){const i=lk(e);if(null===i||!tA(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(w=>{const S=t.fullPath;return ih("/b/"+l(t.bucket)+"/o/"+l(S),n,r)+u2({alt:"media",token:w})})[0]}(o,i,t.host,t._protocol)}}(t,n),l);return h.errorHandler=HI(e),h}(t.storage,t._location,jI());return t.storage.makeRequestWithTokens(e,yl).then(n=>{if(null===n)throw function b4(){return new Fr(Ir.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function M2(t,e){const n=function W4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Vs(t._location.bucket,n);return new u_(t.storage,r)}function x2(t,e){if(t instanceof pk){const n=t;if(null==n._bucket)throw function I4(){return new Fr(Ir.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+r2+"' property when initializing the app?")}();const r=new u_(n,n._bucket);return null!=e?x2(r,e):r}return void 0!==e?M2(t,e):t}function xG(t,e){if(e&&function AG(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof pk)return function MG(t,e){return new u_(t,e)}(t,e);throw zv("To use ref(service, url), the first argument must be a Storage instance.")}return x2(t,e)}function R2(t,e){const n=e?.[r2];return null==n?null:Vs.makeFromBucketSpec(n,t)}class pk{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=n2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Vs.makeFromBucketSpec(i,this._host):R2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Vs.makeFromBucketSpec(this._url,e):R2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ok("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ok("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new u_(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new T4(a2());{const l=function L4(t,e,n,r,i,o,l=!0){const h=u2(t.urlParams),_=t.url+h,w=Object.assign({},t.headers);return function P4(t,e){e&&(t["X-Firebase-GMPID"]=e)}(w,e),function O4(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(w,n),function k4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,o),function F4(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(w,r),new N4(_,t.method,w,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l)}(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,n){var r=this;return(0,we.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,o).getPromise()})()}}const N2="@firebase/storage";function P2(t,e){return xG(t=(0,P.m9)(t),e)}function BG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new pk(n,r,i,e,ps.SDK_VERSION)}!function jG(){(0,ps._registerComponent)(new Qr.wA("storage",BG,"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(N2,"0.11.2",""),(0,ps.registerVersion)(N2,"0.11.2","esm2017")}();class oA{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class L2{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oA(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new oA(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(o="function"==typeof n?l=>n(new oA(l,this,this._ref)):{next:n.next?l=>n.next(new oA(l,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class U2{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new sh(e,this._service))}get items(){return this._delegate.items.map(e=>new sh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sh{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function VG(t,e){return M2(t,e)}(this._delegate,e);return new sh(n,this.storage)}get root(){return new sh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sh(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new L2(function NG(t,e,n){return function EG(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new D2(t,new Iu(e),n)}(t=(0,P.m9)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=wa.RAW,r){this._throwIfRoot("putString");const i=ck(n,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new L2(new D2(this._delegate,new Iu(i.data,!0),o),this)}listAll(){return function FG(t){return function CG(t){const e={prefixes:[],items:[]};return S2(t,e).then(()=>e)}(t=(0,P.m9)(t))}(this._delegate).then(e=>new U2(e,this.storage))}list(e){return function PG(t,e){return A2(t=(0,P.m9)(t),e)}(this._delegate,e||void 0).then(n=>new U2(n,this.storage))}getMetadata(){return function OG(t){return function bG(t){t._throwIfRoot("getMetadata");const e=v2(t.storage,t._location,jI());return t.storage.makeRequestWithTokens(e,yl)}(t=(0,P.m9)(t))}(this._delegate)}updateMetadata(e){return function kG(t,e){return function DG(t,e){t._throwIfRoot("updateMetadata");const n=function sG(t,e,n,r){const o=ih(e.fullServerUrl(),t.host,t._protocol),h=uk(n,r),w=t.maxOperationRetryTime,D=new Cu(o,"PATCH",iA(t,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=HI(e),D}(t.storage,t._location,e,jI());return t.storage.makeRequestWithTokens(n,yl)}(t=(0,P.m9)(t),e)}(this._delegate,e)}getDownloadURL(){return function LG(t){return TG(t=(0,P.m9)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function UG(t){return function SG(t){t._throwIfRoot("deleteObject");const e=function oG(t,e){const r=ih(e.fullServerUrl(),t.host,t._protocol),h=new Cu(r,"DELETE",function l(_,w){},t.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=HI(e),h}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,yl)}(t=(0,P.m9)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw c2(e)}}class V2{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(B2(e))throw zv("ref() expected a child path but got a URL, use refFromURL instead.");return new sh(P2(this._delegate,e),this)}refFromURL(e){if(!B2(e))throw zv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vs.makeFromUrl(e,this._delegate.host)}catch{throw zv("refFromUrl() expected a valid full URL but got an invalid one.")}return new sh(P2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function F2(t,e,n,r={}){!function RG(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function B2(t){return/^[A-Za-z]+:\/\//.test(t)}function zG(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new V2(n,r)}function j2(t){const e=function WG(t){return new Qi.y(e=>{const n=l=>e.next(l);n(t.snapshot);const o=t.on("state_changed",n);return t.then(l=>{n(l),e.complete()},l=>{n(t.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(wL(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,mt.U)(n=>n.bytesTransferred/n.totalBytes*100))}}function aA(t){return{getDownloadURL:()=>(0,dt.of)(void 0).pipe(_n.fc,(0,En.w)(()=>t.getDownloadURL()),_n.iC),getMetadata:()=>(0,dt.of)(void 0).pipe(_n.fc,(0,En.w)(()=>t.getMetadata()),_n.iC),delete:()=>(0,dn.D)(t.delete()),child:e=>aA(t.child(e)),updateMetadata:e=>(0,dn.D)(t.updateMetadata(e)),put:(e,n)=>j2(t.put(e,n)),putString:(e,n,r)=>j2(t.putString(e,n,r)),list:e=>(0,dn.D)(t.list(e)),listAll:()=>(0,dn.D)(t.listAll())}}!function qG(t){const e={TaskState:ho,TaskEvent:dG,StringFormat:wa,Storage:V2,Reference:sh};t.INTERNAL.registerComponent(new Qr.wA("storage-compat",zG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.2")}(EE.Z);const ZG=new f.OlP("angularfire2.storageBucket"),KG=new f.OlP("angularfire2.storage.maxUploadRetryTime"),YG=new f.OlP("angularfire2.storage.maxOperationRetryTime"),QG=new f.OlP("angularfire2.storage.use-emulator");let XG=(()=>{class t{constructor(n,r,i,o,l,h,_,w,D,S){const k=(0,li.on)(n,l,r);this.storage=(0,li.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const B=l.runOutsideAngular(()=>k.storage(i||void 0)),W=D;return W&&B.useEmulator(...W),_&&B.setMaxUploadRetryTime(_),w&&B.setMaxOperationRetryTime(w),B},[_,w])}ref(n){return aA(this.storage.ref(n))}refFromURL(n){return aA(this.storage.refFromURL(n))}upload(n,r,i){return aA(this.storage.ref(n)).put(r,i)}}return t.\u0275fac=function(n){return new(n||t)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(ZG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_n.HU),f.LFG(KG,8),f.LFG(YG,8),f.LFG(QG,8),f.LFG(NI,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),JG=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({}),t})(),e6=(()=>{class t{constructor(){zS.Z.registerVersion("angularfire",_n.q4.full,"gcs-compat")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[XG],imports:[JG]}),t})();const H2="@firebase/database";let gk="";function G2(t){gk=t}class r6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:(0,P.cI)(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class i6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const z2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r6(e)}}catch{}return new i6},d_=z2("localStorage"),mk=z2("sessionStorage"),Kv=new gs.Yd("@firebase/database"),q2=function(){let t=1;return function(){return t++}}(),W2=function(t){const e=(0,P.dS)(t),n=new P.gQ;n.update(e);const r=n.digest();return P.US.encodeByteArray(r)},$I=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=$I.apply(null,r):e+="object"==typeof r?(0,P.Wl)(r):r,e+=" "}return e};let h_=null,Z2=!0;const K2=function(t,e){(0,P.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Kv.logLevel=gs.in.VERBOSE,h_=Kv.log.bind(Kv),e&&mk.set("logging_enabled",!0)):"function"==typeof t?h_=t:(h_=null,mk.remove("logging_enabled"))},ss=function(...t){if(!0===Z2&&(Z2=!1,null===h_&&!0===mk.get("logging_enabled")&&K2(!0)),h_){const e=$I.apply(null,t);h_(e)}},GI=function(t){return function(...e){ss(t,...e)}},_k=function(...t){const e="FIREBASE INTERNAL ERROR: "+$I(...t);Kv.error(e)},Du=function(...t){const e=`FIREBASE FATAL ERROR: ${$I(...t)}`;throw Kv.error(e),new Error(e)},Bs=function(...t){const e="FIREBASE WARNING: "+$I(...t);Kv.warn(e)},cA=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Dp="[MIN_NAME]",oh="[MAX_NAME]",f_=function(t,e){if(t===e)return 0;if(t===Dp||e===oh)return-1;if(e===Dp||t===oh)return 1;{const n=X2(t),r=X2(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},a6=function(t,e){return t===e?0:t<e?-1:1},zI=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,P.Wl)(e))},yk=function(t){if("object"!=typeof t||null===t)return(0,P.Wl)(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=(0,P.Wl)(e[r]),n+=":",n+=yk(t[e[r]]);return n+="}",n},Y2=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function os(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Q2=function(t){(0,P.hu)(!cA(t),"Invalid JSON number");const r=1023;let i,o,l,h,_;0===t?(o=0,l=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=h+r,l=Math.round(t*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,l=Math.round(t/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(o%2?1:0),o=Math.floor(o/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let k=parseInt(D.substr(_,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},d6=new RegExp("^-?(0*)\\d{1,10}$"),X2=function(t){if(d6.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Yv=function(t){try{t()}catch(e){setTimeout(()=>{throw Bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},qI=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class g6{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class m6{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(ss("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bs(e)}}let WI=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const rU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oU="websocket",aU="long_polling";class wk{constructor(e,n,r,i,o=!1,l="",h=!1,_=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&d_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function cU(t,e,n){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof n,"typeof params must == object"),e===oU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==aU)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function _6(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return os(n,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class y6{constructor(){this.counters_={}}incrementCounter(e,n=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return(0,P.p$)(this.counters_)}}const Ek={},Ik={};function Ck(t){const e=t.toString();return Ek[e]||(Ek[e]=new y6),Ek[e]}class w6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tp{constructor(e,n,r,i,o,l,h){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=GI(e),this.stats_=Ck(n),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),cU(n,aU,_))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new w6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,P.Yr)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bk((...o)=>{const[l,h,_,w,D]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&rU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tp.forceAllow_=!0}static forceDisallow(){Tp.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Tp.forceAllow_&&(Tp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=(0,P.Wl)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=(0,P.h$)(n),i=Y2(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=(0,P.Wl)(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class bk{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=q2(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=bk.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){ss("frame writing exception"),h.stack&&ss(h.stack),ss(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ss("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){(0,P.Yr)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ss("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let uA=null;typeof MozWebSocket<"u"?uA=MozWebSocket:typeof WebSocket<"u"&&(uA=WebSocket);let Qv=(()=>{class t{constructor(n,r,i,o,l,h,_){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=GI(this.connId),this.stats_=Ck(r),this.connURL=t.connectionURL_(r,h,_,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,l){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&rU.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),l&&(h.p=l),cU(n,oU,h)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d_.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${gk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new uA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==uA&&!t.forceDisallow_}static previouslyFailed(){return d_.isInMemoryStorage||!0===d_.get("previous_websocket_failure")}markConnectionHealthy(){d_.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=(0,P.Wl)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Y2(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),gU=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Tp,Qv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=Qv&&Qv.isAvailable();let i=r&&!Qv.previouslyFailed();if(n.webSocketOnly&&(r||Bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Qv];else{const o=this.transports_=[];for(const l of t.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class IU{constructor(e,n,r,i,o,l,h,_,w,D){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=GI("c:"+this.id+":"),this.transportManager_=new gU(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=zI("t",e),r=zI("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=zI("t",e),r=zI("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=zI("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?_k("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_k("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&Bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class CU{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class bU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class dA extends bU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dA}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Dn(){return new kn("")}function nn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Sp(t){return t.pieces_.length-t.pieceNum_}function er(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new kn(t.pieces_,e)}function Tk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ZI(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function SU(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new kn(e,0)}function Cr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new kn(n,0)}function rn(t){return t.pieceNum_>=t.pieces_.length}function fo(t,e){const n=nn(t),r=nn(e);if(null===n)return e;if(n===r)return fo(er(t),er(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function H6(t,e){const n=ZI(t,0),r=ZI(e,0);for(let i=0;i<n.length&&i<r.length;i++){const o=f_(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Sk(t,e){if(Sp(t)!==Sp(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function hc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Sp(t)>Sp(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class $6{constructor(e,n){this.errorPrefix_=n,this.parts_=ZI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);AU(this)}}function AU(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+p_(t))}function p_(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Ak extends bU{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ak}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KI=1e3;let fA,g_=(()=>{class t extends CU{constructor(n,r,i,o,l,h,_,w){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=t.nextPersistentConnectionId_++,this.log_=GI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ak.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&dA.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,l={r:o,a:n,b:r};this.log_((0,P.Wl)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new P.BH,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const l=n._queryIdentifier,h=n._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};n.tag&&(l.q=r._queryObject,l.t=n.tag),l.h=n.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,D=_.s;t.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,o),n.onComplete&&n.onComplete(D,w))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&(0,P.r3)(n,"w")){const i=(0,P.DV)(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,P.GJ)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=(0,P.w9)(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,h=o.d||"error";this.authToken_===n&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,P.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const l={p:n};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+n,l),this.sendRequest(n,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:n,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,P.Wl)(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):_k("Unrecognized action received from server: "+(0,P.Wl)(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,we.Z)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),l=n.id+":"+t.nextConnectionId_++,h=n.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,o())};n.realtime_={close:D,sendRequest:function(B){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const k=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[B,W]=yield Promise.all([n.authTokenProvider_.getToken(k),n.appCheckTokenProvider_.getToken(k)]);_?ss("getToken() completed but was canceled"):(ss("getToken() completed. Creating connection."),n.authToken_=B&&B.accessToken,n.appCheckToken_=W&&W.token,w=new IU(l,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,le=>{Bs(le+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},h))}catch(B){n.log_("Failed to get token: "+B),_||(n.repoInfo_.nodeAdmin&&Bs(B),D())}}})()}interrupt(n){ss("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ss("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(l=>yk(l)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new kn(n).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){ss("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ss("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+r+"."+gk.replace(/\./g,"-")]=1,(0,P.uI)()?n["framework.cordova"]=1:(0,P.b$)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=dA.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class an{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new an(e,n)}}class hA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new an(Dp,e),i=new an(Dp,n);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class RU extends hA{static get __EMPTY_NODE(){return fA}static set __EMPTY_NODE(e){fA=e}compare(e,n){return f_(e.name,n.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return an.MIN}maxPost(){return new an(oh,fA)}makePost(e,n){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,fA)}toString(){return".key"}}const Tu=new RU;class pA{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let xk,vl=(()=>{class t{constructor(n,r,i,o,l){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Bo.EMPTY_NODE,this.right=l??Bo.EMPTY_NODE}copy(n,r,i,o,l){return new t(n??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const l=i(n,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bo.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Bo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Bo{constructor(e,n=Bo.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bo(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,vl.BLACK,null,null))}remove(e){return new Bo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vl.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new pA(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new pA(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new pA(this.root_,null,this.comparator_,!0,e)}}function Q6(t,e){return f_(t.name,e.name)}function Mk(t,e){return f_(t,e)}Bo.EMPTY_NODE=new class Y6{copy(e,n,r,i,o){return this}insert(e,n,r){return new vl(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const NU=function(t){return"number"==typeof t?"number:"+Q2(t):"string:"+t},OU=function(t){if(t.isLeafNode()){const e=t.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(t===xk||t.isEmpty(),"priority of unexpected type.");(0,P.hu)(t===xk||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let kU,PU,FU,Xv=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),OU(this.priorityNode_)}static set __childrenNodeConstructor(n){kU=n}static get __childrenNodeConstructor(){return kU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return rn(n)?this:".priority"===nn(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=nn(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Sp(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(er(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+NU(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?Q2(this.value_):this.value_,this.lazyHash_=W2(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:((0,P.hu)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),l=t.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(o>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const ar=new class tz extends hA{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?f_(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return an.MIN}maxPost(){return new an(oh,new Xv("[PRIORITY-POST]",FU))}makePost(e,n){const r=PU(e);return new an(n,new Xv("[PRIORITY-POST]",r))}toString(){return".priority"}},nz=Math.log(2);class rz{constructor(e){this.count=parseInt(Math.log(e+1)/nz,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gA=function(t,e,n,r){t.sort(e);const i=function(_,w){const D=w-_;let S,k;if(0===D)return null;if(1===D)return S=t[_],k=n?n(S):S,new vl(k,S.node,vl.BLACK,null,null);{const B=parseInt(D/2,10)+_,W=i(_,B),le=i(B+1,w);return S=t[B],k=n?n(S):S,new vl(k,S.node,vl.BLACK,W,le)}},h=function(_){let w=null,D=null,S=t.length;const k=function(W,le){const pe=S-W,$e=S;S-=W;const nt=i(pe+1,$e),Qe=t[pe],at=n?n(Qe):Qe;B(new vl(at,Qe.node,le,null,nt))},B=function(W){w?(w.left=W,w=W):(D=W,w=W)};for(let W=0;W<_.count;++W){const le=_.nextBitIsOne(),pe=Math.pow(2,_.count-(W+1));le?k(pe,vl.BLACK):(k(pe,vl.BLACK),k(pe,vl.RED))}return D}(new rz(t.length));return new Bo(r||e,h)};let Rk;const Jv={};class ah{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return(0,P.hu)(Jv&&ar,"ChildrenNode.ts has not been loaded"),Rk=Rk||new ah({".priority":Jv},{".priority":ar}),Rk}get(e){const n=(0,P.DV)(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bo?n:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,n){(0,P.hu)(e!==Tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(an.Wrap);let h,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();h=i?gA(r,e.getCompare()):Jv;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new ah(D,w)}addToIndexes(e,n){const r=(0,P.UI)(this.indexes_,(i,o)=>{const l=(0,P.DV)(this.indexSet_,o);if((0,P.hu)(l,"Missing index implementation for "+o),i===Jv){if(l.isDefinedOn(e.node)){const h=[],_=n.getIterator(an.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),gA(h,l.getCompare())}return Jv}{const h=n.get(e.name);let _=i;return h&&(_=_.remove(new an(e.name,h))),_.insert(e,e.node)}});return new ah(r,this.indexSet_)}removeFromIndexes(e,n){const r=(0,P.UI)(this.indexes_,i=>{if(i===Jv)return i;{const o=n.get(e.name);return o?i.remove(new an(e.name,o)):i}});return new ah(r,this.indexSet_)}}let YI,Yt=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&OU(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return YI||(YI=new t(new Bo(Mk),null,ah.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||YI}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?YI:r}}getChild(n){const r=nn(n);return null===r?this:this.getImmediateChild(r).getChild(er(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new an(n,r);let o,l;r.isEmpty()?(o=this.children_.remove(n),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?YI:this.priorityNode_;return new t(o,h,l)}}updateChild(n,r){const i=nn(n);if(null===i)return r;{(0,P.hu)(".priority"!==nn(n)||1===Sp(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(er(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(ar,(h,_)=>{r[h]=_.val(n),i++,l&&t.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!n&&l&&o<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+NU(this.getPriority().val())+":"),this.forEachChild(ar,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":W2(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new an(n,r));return l?l.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new an(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new an(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,an.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,n)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,an.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,n)>0;)o.getNext(),l=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===QI?-1:0}withIndex(n){if(n===Tu||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Tu||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ar),o=r.getIterator(ar);let l=i.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=o.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(n){return n===Tu?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const QI=new class iz extends Yt{constructor(){super(new Bo(Mk),Yt.EMPTY_NODE,ah.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(an,{MIN:{value:new an(Dp,Yt.EMPTY_NODE)},MAX:{value:new an(oh,QI)}}),RU.__EMPTY_NODE=Yt.EMPTY_NODE,Xv.__childrenNodeConstructor=Yt,function X6(t){xk=t}(QI),function ez(t){FU=t}(QI);const sz=!0;function Lr(t,e=null){if(null===t)return Yt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Xv(t,Lr(e));if(t instanceof Array||!sz){let n=Yt.EMPTY_NODE;return os(t,(r,i)=>{if((0,P.r3)(t,r)&&"."!==r.substring(0,1)){const o=Lr(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Lr(e))}{const n=[];let r=!1;if(os(t,(l,h)=>{if("."!==l.substring(0,1)){const _=Lr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),n.push(new an(l,_)))}}),0===n.length)return Yt.EMPTY_NODE;const o=gA(n,Q6,l=>l.name,Mk);if(r){const l=gA(n,ar.getCompare());return new Yt(o,Lr(e),new ah({".priority":l},{".priority":ar}))}return new Yt(o,Lr(e),ah.Default)}}!function J6(t){PU=t}(Lr);class Nk extends hA{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!rn(e)&&".priority"!==nn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?f_(e.name,n.name):o}makePost(e,n){const r=Lr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(n,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,QI);return new an(oh,e)}toString(){return ZI(this.indexPath_,0).join("/")}}const Ok=new class oz extends hA{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?f_(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,n){const r=Lr(e);return new an(n,r)}toString(){return".value"}};function LU(t){return{type:"value",snapshotNode:t}}function ew(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function XI(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function JI(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class kk{constructor(e){this.index_=e}updateChild(e,n,r,i,o,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(n)?l.trackChildChange(XI(n,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ew(n,r)):l.trackChildChange(JI(n,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ar,(i,o)=>{n.hasChild(i)||r.trackChildChange(XI(i,o))}),n.isLeafNode()||n.forEachChild(ar,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(JI(i,o,l))}else r.trackChildChange(ew(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class eC{constructor(e){this.indexedFilter_=new kk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eC.getStartPost_(e),this.endPost_=eC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,l){return this.matches(new an(n,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,l)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Yt.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const o=this;return n.forEachChild(ar,(l,h)=>{o.matches(new an(l,h))||(i=i.updateImmediateChild(l,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class cz{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new eC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,l){return this.rangedFilter_.matches(new an(n,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,l):this.fullLimitUpdateChild_(e,n,r,o,l)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=Yt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let o;i=n.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;o.hasNext();){const h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let l;if(this.reverse_){const S=this.index_.getCompare();l=(k,B)=>S(B,k)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const _=new an(n,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(h.hasChild(n)){const S=h.getImmediateChild(n);let k=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=k&&(k.name===n||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const B=null==k?1:l(k,_);if(D&&!r.isEmpty()&&B>=0)return o?.trackChildChange(JI(n,r,S)),h.updateImmediateChild(n,r);{o?.trackChildChange(XI(n,S));const le=h.updateImmediateChild(n,Yt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(o?.trackChildChange(ew(k.name,k.node)),le.updateImmediateChild(k.name,k.node)):le}}return r.isEmpty()?e:D&&l(w,_)>=0?(null!=o&&(o.trackChildChange(XI(w.name,w.node)),o.trackChildChange(ew(n,r))),h.updateImmediateChild(n,r).updateImmediateChild(w.name,Yt.EMPTY_NODE)):e}}class mA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ar}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ar}copy(){const e=new mA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Pk(t,e,n){const r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fk(t,e,n){const r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function _A(t,e){const n=t.copy();return n.index_=e,n}function UU(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ar?n="$priority":t.index_===Ok?n="$value":t.index_===Tu?n="$key":((0,P.hu)(t.index_ instanceof Nk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,P.Wl)(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=(0,P.Wl)(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+(0,P.Wl)(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=(0,P.Wl)(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+(0,P.Wl)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function VU(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ar&&(e.i=t.index_.toString()),e}class yA extends CU{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=GI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=yA.getListenId_(e,r),h={};this.listens_[l]=h;const _=UU(e._queryParams);this.restRequest_(o+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(o,S,!1,r),(0,P.DV)(this.listens_,l)===h){let k;k=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(k,null)}})}unlisten(e,n){const r=yA.getListenId_(e,n);delete this.listens_[r]}get(e){const n=UU(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",n,(o,l)=>{let h=l;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(n);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,P.cI)(h.responseText)}catch{Bs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&Bs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class pz{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function vA(){return{value:null,children:new Map}}function tw(t,e,n){if(rn(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=nn(e);t.children.has(r)||t.children.set(r,vA()),tw(t.children.get(r),e=er(e),n)}}function Lk(t,e){if(rn(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ar,(r,i)=>{tw(t,new kn(r),i)}),Lk(t,e)}}if(t.children.size>0){const n=nn(e);return e=er(e),t.children.has(n)&&Lk(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function Uk(t,e,n){null!==t.value?n(e,t.value):function gz(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{Uk(i,new kn(e.toString()+"/"+r),n)})}class mz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&os(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class vz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mz(e);const r=1e4+2e4*Math.random();qI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;os(e,(i,o)=>{o>0&&(0,P.r3)(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),qI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Su=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Su||{});function jk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class wA{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Su.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new kn(e));return new wA(Dn(),n,this.revert)}}return(0,P.hu)(nn(this.path)===e,"operationForChild called for unrelated child."),new wA(er(this.path),this.affectedTree,this.revert)}}class tC{constructor(e,n){this.source=e,this.path=n,this.type=Su.LISTEN_COMPLETE}operationForChild(e){return rn(this.path)?new tC(this.source,Dn()):new tC(this.source,er(this.path))}}class m_{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Su.OVERWRITE}operationForChild(e){return rn(this.path)?new m_(this.source,Dn(),this.snap.getImmediateChild(e)):new m_(this.source,er(this.path),this.snap)}}class nw{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Su.MERGE}operationForChild(e){if(rn(this.path)){const n=this.children.subtree(new kn(e));return n.isEmpty()?null:n.value?new m_(this.source,Dn(),n.value):new nw(this.source,Dn(),n)}return(0,P.hu)(nn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nw(this.source,er(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ap{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rn(e))return this.isFullyInitialized()&&!this.filtered_;const n=nn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class wz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nC(t,e,n,r,i,o){const l=r.filter(h=>h.type===n);l.sort((h,_)=>function Cz(t,e,n){if(null==e.childName||null==n.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,h,_)),l.forEach(h=>{const _=function Iz(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,h,o);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,t.query_))})})}function EA(t,e){return{eventCache:t,serverCache:e}}function rC(t,e,n,r){return EA(new Ap(e,n,r),t.serverCache)}function jU(t,e,n,r){return EA(t.eventCache,new Ap(e,n,r))}function IA(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function __(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Hk;class cr{constructor(e,n=(()=>(Hk||(Hk=new Bo(a6)),Hk))()){this.value=e,this.children=n}static fromObject(e){let n=new cr(null);return os(e,(r,i)=>{n=n.set(new kn(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Dn(),value:this.value};if(rn(e))return null;{const r=nn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(er(e),n);return null!=o?{path:Cr(new kn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rn(e))return this;{const n=nn(e),r=this.children.get(n);return null!==r?r.subtree(er(e)):new cr(null)}}set(e,n){if(rn(e))return new cr(n,this.children);{const r=nn(e),o=(this.children.get(r)||new cr(null)).set(er(e),n),l=this.children.insert(r,o);return new cr(this.value,l)}}remove(e){if(rn(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const n=nn(e),r=this.children.get(n);if(r){const i=r.remove(er(e));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new cr(null):new cr(this.value,o)}return this}}get(e){if(rn(e))return this.value;{const n=nn(e),r=this.children.get(n);return r?r.get(er(e)):null}}setTree(e,n){if(rn(e))return n;{const r=nn(e),o=(this.children.get(r)||new cr(null)).setTree(er(e),n);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new cr(this.value,l)}}fold(e){return this.fold_(Dn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Cr(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Dn(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(rn(e))return null;{const o=nn(e),l=this.children.get(o);return l?l.findOnPath_(er(e),Cr(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Dn(),n)}foreachOnPath_(e,n,r){if(rn(e))return this;{this.value&&r(n,this.value);const i=nn(e),o=this.children.get(i);return o?o.foreachOnPath_(er(e),Cr(n,i),r):new cr(null)}}foreach(e){this.foreach_(Dn(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Cr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class wl{constructor(e){this.writeTree_=e}static empty(){return new wl(new cr(null))}}function iC(t,e,n){if(rn(e))return new wl(new cr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=fo(i,e);return o=o.updateChild(l,n),new wl(t.writeTree_.set(i,o))}{const i=new cr(n),o=t.writeTree_.setTree(e,i);return new wl(o)}}}function $k(t,e,n){let r=t;return os(n,(i,o)=>{r=iC(r,Cr(e,i),o)}),r}function HU(t,e){if(rn(e))return wl.empty();{const n=t.writeTree_.setTree(e,new cr(null));return new wl(n)}}function Gk(t,e){return null!=y_(t,e)}function y_(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(fo(n.path,e)):null}function $U(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ar,(r,i)=>{e.push(new an(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Mp(t,e){if(rn(e))return t;{const n=y_(t,e);return new wl(null!=n?new cr(n):t.writeTree_.subtree(e))}}function zk(t){return t.writeTree_.isEmpty()}function rw(t,e){return GU(Dn(),t.writeTree_,e)}function GU(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,P.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=GU(Cr(t,i),o,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(Cr(t,".priority"),r)),n}}function CA(t,e){return KU(e,t)}function Mz(t,e){if(t.snap)return hc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&hc(Cr(t.path,n),e))return!0;return!1}function Rz(t){return t.visible}function zU(t,e,n){let r=wl.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const l=o.path;let h;if(o.snap)hc(n,l)?(h=fo(n,l),r=iC(r,h,o.snap)):hc(l,n)&&(h=fo(l,n),r=iC(r,Dn(),o.snap.getChild(h)));else{if(!o.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(hc(n,l))h=fo(n,l),r=$k(r,h,o.children);else if(hc(l,n))if(h=fo(l,n),rn(h))r=$k(r,Dn(),o.children);else{const _=(0,P.DV)(o.children,nn(h));if(_){const w=_.getChild(er(h));r=iC(r,Dn(),w)}}}}}return r}function qU(t,e,n,r,i){if(r||i){const o=Mp(t.visibleWrites,e);return!i&&zk(o)?n:i||null!=n||Gk(o,Dn())?rw(zU(t.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(hc(w.path,e)||hc(e,w.path))},e),n||Yt.EMPTY_NODE):null}{const o=y_(t.visibleWrites,e);if(null!=o)return o;{const l=Mp(t.visibleWrites,e);return zk(l)?n:null!=n||Gk(l,Dn())?rw(l,n||Yt.EMPTY_NODE):null}}}function bA(t,e,n,r){return qU(t.writeTree,t.treePath,e,n,r)}function qk(t,e){return function Nz(t,e,n){let r=Yt.EMPTY_NODE;const i=y_(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ar,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(n){const o=Mp(t.visibleWrites,e);return n.forEachChild(ar,(l,h)=>{const _=rw(Mp(o,new kn(l)),h);r=r.updateImmediateChild(l,_)}),$U(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return $U(Mp(t.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(t.writeTree,t.treePath,e)}function WU(t,e,n,r){return function Oz(t,e,n,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Cr(e,n);if(Gk(t.visibleWrites,o))return null;{const l=Mp(t.visibleWrites,o);return zk(l)?i.getChild(n):rw(l,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function DA(t,e){return function Pz(t,e){return y_(t.visibleWrites,e)}(t.writeTree,Cr(t.treePath,e))}function Wk(t,e,n){return function kz(t,e,n,r){const i=Cr(e,n),o=y_(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?rw(Mp(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function ZU(t,e){return KU(Cr(t.treePath,e),t.writeTree)}function KU(t,e){return{treePath:t,writeTree:e}}class Vz{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;(0,P.hu)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,JI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,XI(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,ew(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,JI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const YU=new class Bz{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class Zk{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ap(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wk(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:__(this.viewCache_),o=function Uz(t,e,n,r,i,o){return function Fz(t,e,n,r,i,o,l){let h;const _=Mp(t.visibleWrites,e),w=y_(_,Dn());if(null!=w)h=w;else{if(null==n)return[];h=rw(_,n)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),k=o?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let B=k.getNext();for(;B&&D.length<i;)0!==S(B,r)&&D.push(B),B=k.getNext();return D}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,i,n,1,r,e);return 0===o.length?null:o[0]}}function QU(t,e,n,r,i,o){const l=e.eventCache;if(null!=DA(r,n))return e;{let h,_;if(rn(n))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=__(e),S=qk(r,w instanceof Yt?w:Yt.EMPTY_NODE);h=t.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const w=bA(r,__(e));h=t.filter.updateFullNode(e.eventCache.getNode(),w,o)}else{const w=nn(n);if(".priority"===w){(0,P.hu)(1===Sp(n),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=WU(r,n,D,_);h=null!=S?t.filter.updatePriority(D,S):l.getNode()}else{const D=er(n);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const k=WU(r,n,l.getNode(),_);S=null!=k?l.getNode().getImmediateChild(w).updateChild(D,k):l.getNode().getImmediateChild(w)}else S=Wk(r,w,e.serverCache);h=null!=S?t.filter.updateChild(l.getNode(),w,S,D,i,o):l.getNode()}}return rC(e,h,l.isFullyInitialized()||rn(n),t.filter.filtersNodes())}}function TA(t,e,n,r,i,o,l,h){const _=e.serverCache;let w;const D=l?t.filter:t.filter.getIndexedFilter();if(rn(n))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(n,r);w=D.updateFullNode(_.getNode(),B,null)}else{const B=nn(n);if(!_.isCompleteForPath(n)&&Sp(n)>1)return e;const W=er(n),pe=_.getNode().getImmediateChild(B).updateChild(W,r);w=".priority"===B?D.updatePriority(_.getNode(),pe):D.updateChild(_.getNode(),B,pe,W,YU,null)}const S=jU(e,w,_.isFullyInitialized()||rn(n),D.filtersNodes());return QU(t,S,n,i,new Zk(i,S,o),h)}function Kk(t,e,n,r,i,o,l){const h=e.eventCache;let _,w;const D=new Zk(i,e,o);if(rn(n))w=t.filter.updateFullNode(e.eventCache.getNode(),r,l),_=rC(e,w,!0,t.filter.filtersNodes());else{const S=nn(n);if(".priority"===S)w=t.filter.updatePriority(e.eventCache.getNode(),r),_=rC(e,w,h.isFullyInitialized(),h.isFiltered());else{const k=er(n),B=h.getNode().getImmediateChild(S);let W;if(rn(k))W=r;else{const le=D.getCompleteChild(S);W=null!=le?".priority"===Tk(k)&&le.getChild(SU(k)).isEmpty()?le:le.updateChild(k,r):Yt.EMPTY_NODE}_=B.equals(W)?e:rC(e,t.filter.updateChild(h.getNode(),S,W,k,D,l),h.isFullyInitialized(),t.filter.filtersNodes())}}return _}function XU(t,e){return t.eventCache.isCompleteForChild(e)}function JU(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Yk(t,e,n,r,i,o,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=rn(n)?r:new cr(null).setTree(n,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,k)=>{if(D.hasChild(S)){const W=JU(0,e.serverCache.getNode().getImmediateChild(S),k);_=TA(t,_,new kn(S),W,i,o,l,h)}}),w.children.inorderTraversal((S,k)=>{const B=!e.serverCache.isCompleteForChild(S)&&null===k.value;if(!D.hasChild(S)&&!B){const le=JU(0,e.serverCache.getNode().getImmediateChild(S),k);_=TA(t,_,new kn(S),le,i,o,l,h)}}),_}class Kz{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kk(r.getIndex()),o=function lz(t){return t.loadsAllData()?new kk(t.getIndex()):t.hasLimit()?new cz(t):new eC(t)}(r);this.processor_=function jz(t){return{filter:t}}(o);const l=n.serverCache,h=n.eventCache,_=i.updateFullNode(Yt.EMPTY_NODE,l.getNode(),null),w=o.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),D=new Ap(_,l.isFullyInitialized(),i.filtersNodes()),S=new Ap(w,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=EA(S,D),this.eventGenerator_=new wz(this.query_)}get query(){return this.query_}}function Xz(t,e){const n=__(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!rn(e)&&!n.getImmediateChild(nn(e)).isEmpty())?n.getChild(e):null}function eV(t){return 0===t.eventRegistrations_.length}function tV(t,e,n){const r=[];if(n){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}else i.push(l)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function nV(t,e,n,r){e.type===Su.MERGE&&null!==e.source.queryId&&((0,P.hu)(__(t.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(IA(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=function $z(t,e,n,r,i){const o=new Vz;let l,h;if(n.type===Su.OVERWRITE){const w=n;w.source.fromUser?l=Kk(t,e,w.path,w.snap,r,i,o):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!rn(w.path),l=TA(t,e,w.path,w.snap,r,i,h,o))}else if(n.type===Su.MERGE){const w=n;w.source.fromUser?l=function zz(t,e,n,r,i,o,l){let h=e;return r.foreach((_,w)=>{const D=Cr(n,_);XU(e,nn(D))&&(h=Kk(t,h,D,w,i,o,l))}),r.foreach((_,w)=>{const D=Cr(n,_);XU(e,nn(D))||(h=Kk(t,h,D,w,i,o,l))}),h}(t,e,w.path,w.children,r,i,o):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=Yk(t,e,w.path,w.children,r,i,h,o))}else if(n.type===Su.ACK_USER_WRITE){const w=n;l=w.revert?function Zz(t,e,n,r,i,o){let l;if(null!=DA(r,n))return e;{const h=new Zk(r,e,i),_=e.eventCache.getNode();let w;if(rn(n)||".priority"===nn(n)){let D;if(e.serverCache.isFullyInitialized())D=bA(r,__(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Yt,"serverChildren would be complete if leaf node"),D=qk(r,S)}w=t.filter.updateFullNode(_,D,o)}else{const D=nn(n);let S=Wk(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?t.filter.updateChild(_,D,S,er(n),h,o):e.eventCache.getNode().hasChild(D)?t.filter.updateChild(_,D,Yt.EMPTY_NODE,er(n),h,o):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=bA(r,__(e)),l.isLeafNode()&&(w=t.filter.updateFullNode(w,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=DA(r,Dn()),rC(e,w,l,t.filter.filtersNodes())}}(t,e,w.path,r,i,o):function qz(t,e,n,r,i,o,l){if(null!=DA(i,n))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(rn(n)&&_.isFullyInitialized()||_.isCompleteForPath(n))return TA(t,e,n,_.getNode().getChild(n),i,o,h,l);if(rn(n)){let w=new cr(null);return _.getNode().forEachChild(Tu,(D,S)=>{w=w.set(new kn(D),S)}),Yk(t,e,n,w,i,o,h,l)}return e}{let w=new cr(null);return r.foreach((D,S)=>{const k=Cr(n,D);_.isCompleteForPath(k)&&(w=w.set(D,_.getNode().getChild(k)))}),Yk(t,e,n,w,i,o,h,l)}}(t,e,w.path,w.affectedTree,r,i,o)}else{if(n.type!==Su.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+n.type);l=function Wz(t,e,n,r,i){const o=e.serverCache;return QU(t,jU(e,o.getNode(),o.isFullyInitialized()||rn(n),o.isFiltered()),n,r,YU,i)}(t,e,n.path,r,o)}const _=o.getChanges();return function Gz(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=IA(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(LU(IA(e)))}}(e,l,_),{viewCache:l,changes:_}}(t.processor_,i,e,n,r);return function Hz(t,e){(0,P.hu)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,o.viewCache),(0,P.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,rV(t,o.changes,o.viewCache.eventCache.getNode(),null)}function rV(t,e,n,r){return function Ez(t,e,n,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function az(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(l.childName,l.snapshotNode))}),nC(t,i,"child_removed",e,r,n),nC(t,i,"child_added",e,r,n),nC(t,i,"child_moved",o,r,n),nC(t,i,"child_changed",e,r,n),nC(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let SA,MA;class iV{constructor(){this.views=new Map}}function Qk(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return(0,P.hu)(null!=o,"SyncTree gave us an op for an invalid query."),nV(o,e,n,r)}{let o=[];for(const l of t.views.values())o=o.concat(nV(l,e,n,r));return o}}function sV(t,e,n,r,i){const l=t.views.get(e._queryIdentifier);if(!l){let h=bA(n,i?r:null),_=!1;h?_=!0:r instanceof Yt?(h=qk(n,r),_=!1):(h=Yt.EMPTY_NODE,_=!1);const w=EA(new Ap(h,_,!1),new Ap(r,i,!1));return new Kz(e,w)}return l}function oV(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xp(t,e){let n=null;for(const r of t.views.values())n=n||Xz(r,e);return n}function aV(t,e){return e._queryParams.loadsAllData()?AA(t):t.views.get(e._queryIdentifier)}function cV(t,e){return null!=aV(t,e)}function Rp(t){return null!=AA(t)}function AA(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let cq=1;class lV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_=function Lz(){return{visibleWrites:wl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xk(t,e,n,r,i){return function Dz(t,e,n,r,i){(0,P.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=iC(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?iw(t,new m_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Np(t,e,n=!1){const r=function Sz(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function Az(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,l=t.allWrites.length-1;for(;i&&l>=0;){const h=t.allWrites[l];h.visible&&(l>=n&&Mz(h,r.path)?i=!1:hc(r.path,h.path)&&(o=!0)),l--}return!!i&&(o?(function xz(t){t.visibleWrites=zU(t.allWrites,Rz,Dn()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=HU(t.visibleWrites,r.path):os(r.children,_=>{t.visibleWrites=HU(t.visibleWrites,Cr(r.path,_))}),!0))}(t.pendingWriteTree_,e)){let o=new cr(null);return null!=r.snap?o=o.set(Dn(),!0):os(r.children,l=>{o=o.set(new kn(l),!0)}),iw(t,new wA(r.path,o,n))}return[]}function sC(t,e,n){return iw(t,new m_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function xA(t,e,n,r,i=!1){const o=e._path,l=t.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||cV(l,e))){const _=function sq(t,e,n,r){const i=e._queryIdentifier,o=[];let l=[];const h=Rp(t);if("default"===i)for(const[_,w]of t.views.entries())l=l.concat(tV(w,n,r)),eV(w)&&(t.views.delete(_),w.query._queryParams.loadsAllData()||o.push(w.query));else{const _=t.views.get(i);_&&(l=l.concat(tV(_,n,r)),eV(_)&&(t.views.delete(i),_.query._queryParams.loadsAllData()||o.push(_.query)))}return h&&!Rp(t)&&o.push(new(function nq(){return(0,P.hu)(SA,"Reference.ts has not been loaded"),SA}())(e._repo,e._path)),{removed:o,events:l}}(l,e,n,r);(function rq(t){return 0===t.views.size})(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const w=_.removed;if(h=_.events,!i){const D=-1!==w.findIndex(k=>k._queryParams.loadsAllData()),S=t.syncPointTree_.findOnPath(o,(k,B)=>Rp(B));if(D&&!S){const k=t.syncPointTree_.subtree(o);if(!k.isEmpty()){const B=function gq(t){return t.fold((e,n,r)=>{if(n&&Rp(n))return[AA(n)];{let i=[];return n&&(i=oV(n)),os(r,(o,l)=>{i=i.concat(l)}),i}})}(k);for(let W=0;W<B.length;++W){const le=B[W],pe=le.query,$e=fV(t,le);t.listenProvider_.startListening(aC(pe),oC(t,pe),$e.hashFn,$e.onComplete)}}}!S&&w.length>0&&!r&&(D?t.listenProvider_.stopListening(aC(e),null):w.forEach(k=>{const B=t.queryToTagMap.get(NA(k));t.listenProvider_.stopListening(aC(k),B)}))}!function mq(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=NA(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,w)}return h}function uV(t,e,n,r){const i=eP(t,r);if(null!=i){const o=tP(i),l=o.path,h=o.queryId,_=fo(l,e);return nP(t,l,new m_(jk(h),_,n))}return[]}function Jk(t,e,n,r=!1){const i=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(i,(k,B)=>{const W=fo(k,i);o=o||xp(B,W),l=l||Rp(B)});let _,h=t.syncPointTree_.get(i);h?(l=l||Rp(h),o=o||xp(h,Dn())):(h=new iV,t.syncPointTree_=t.syncPointTree_.set(i,h)),null!=o?_=!0:(_=!1,o=Yt.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((B,W)=>{const le=xp(W,Dn());le&&(o=o.updateImmediateChild(B,le))}));const w=cV(h,e);if(!w&&!e._queryParams.loadsAllData()){const k=NA(e);(0,P.hu)(!t.queryToTagMap.has(k),"View does not exist, but we have a tag");const B=function _q(){return cq++}();t.queryToTagMap.set(k,B),t.tagToQueryMap.set(B,k)}let S=function iq(t,e,n,r,i,o){const l=sV(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),function Jz(t,e){t.eventRegistrations_.push(e)}(l,n),function eq(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ar,(o,l)=>{r.push(ew(o,l))}),n.isFullyInitialized()&&r.push(LU(n.getNode())),rV(t,r,n.getNode(),e)}(l,n)}(h,e,n,CA(t.pendingWriteTree_,i),o,_);if(!w&&!l&&!r){const k=aV(h,e);S=S.concat(function yq(t,e,n){const r=e._path,i=oC(t,e),o=fV(t,n),l=t.listenProvider_.startListening(aC(e),i,o.hashFn,o.onComplete),h=t.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Rp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,D,S)=>{if(!rn(w)&&D&&Rp(D))return[AA(D).query];{let k=[];return D&&(k=k.concat(oV(D).map(B=>B.query))),os(S,(B,W)=>{k=k.concat(W)}),k}});for(let w=0;w<_.length;++w){const D=_[w];t.listenProvider_.stopListening(aC(D),oC(t,D))}}return l}(t,e,k))}return S}function RA(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,h)=>{const w=xp(h,fo(l,e));if(w)return w});return qU(i,e,o,n,!0)}function iw(t,e){return dV(e,t.syncPointTree_,null,CA(t.pendingWriteTree_,Dn()))}function dV(t,e,n,r){if(rn(t.path))return hV(t,e,n,r);{const i=e.get(Dn());null==n&&null!=i&&(n=xp(i,Dn()));let o=[];const l=nn(t.path),h=t.operationForChild(l),_=e.children.get(l);if(_&&h){const w=n?n.getImmediateChild(l):null,D=ZU(r,l);o=o.concat(dV(h,_,w,D))}return i&&(o=o.concat(Qk(i,t,r,n))),o}}function hV(t,e,n,r){const i=e.get(Dn());null==n&&null!=i&&(n=xp(i,Dn()));let o=[];return e.children.inorderTraversal((l,h)=>{const _=n?n.getImmediateChild(l):null,w=ZU(r,l),D=t.operationForChild(l);D&&(o=o.concat(hV(D,h,_,w)))}),i&&(o=o.concat(Qk(i,t,r,n))),o}function fV(t,e){const n=e.query,r=oC(t,n);return{hashFn:()=>(function Yz(t){return t.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function hq(t,e,n){const r=eP(t,n);if(r){const i=tP(r),o=i.path,l=i.queryId,h=fo(o,e);return nP(t,o,new tC(jk(l),h))}return[]}(t,n._path,r):function dq(t,e){return iw(t,new tC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const o=function u6(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return xA(t,n,null,o)}}}}function oC(t,e){const n=NA(e);return t.queryToTagMap.get(n)}function NA(t){return t._path.toString()+"$"+t._queryIdentifier}function eP(t,e){return t.tagToQueryMap.get(e)}function tP(t){const e=t.indexOf("$");return(0,P.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new kn(t.substr(0,e))}}function nP(t,e,n){const r=t.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),Qk(r,n,CA(t.pendingWriteTree_,e),null)}function aC(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function aq(){return(0,P.hu)(MA,"Reference.ts has not been loaded"),MA}())(t._repo,t._path):t}class rP{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new rP(n)}node(){return this.node_}}class iP{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Cr(this.path_,e);return new iP(this.syncTree_,n)}node(){return RA(this.syncTree_,this.path_)}}const vq=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},pV=function(t,e,n){return t&&"object"==typeof t?((0,P.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?wq(t[".sv"],e,n):"object"==typeof t[".sv"]?Eq(t[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},wq=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,P.hu)(!1,"Unexpected server value: "+t)},Eq=function(t,e,n){t.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},gV=function(t,e,n,r){return oP(e,new iP(n,t),r)},sP=function(t,e,n){return oP(t,new rP(e),n)};function oP(t,e,n){const r=t.getPriority().val(),i=pV(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,h=pV(l.getValue(),e,n);return h!==l.getValue()||i!==l.getPriority().val()?new Xv(h,Lr(i)):t}{const l=t;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new Xv(i))),l.forEachChild(ar,(h,_)=>{const w=oP(_,e.getImmediateChild(h),n);w!==_&&(o=o.updateImmediateChild(h,w))}),o}}class aP{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function OA(t,e){let n=e instanceof kn?e:new kn(e),r=t,i=nn(n);for(;null!==i;){const o=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new aP(i,r,o),n=er(n),i=nn(n)}return r}function v_(t){return t.node.value}function cP(t,e){t.node.value=e,lP(t)}function mV(t){return t.node.childCount>0}function kA(t,e){os(t.node.children,(n,r)=>{e(new aP(n,t,r))})}function _V(t,e,n,r){n&&!r&&e(t),kA(t,i=>{_V(i,e,!0,r)}),n&&r&&e(t)}function cC(t){return new kn(null===t.parent?t.name:cC(t.parent)+"/"+t.name)}function lP(t){null!==t.parent&&function bq(t,e,n){const r=function Iq(t){return void 0===v_(t)&&!mV(t)}(n),i=(0,P.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,lP(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,lP(t))}(t.parent,t.name,t)}const Dq=/[\[\].#$\/\u0000-\u001F\u007F]/,Tq=/[\[\].#$\u0000-\u001F\u007F]/,uP=10485760,PA=function(t){return"string"==typeof t&&0!==t.length&&!Dq.test(t)},yV=function(t){return"string"==typeof t&&0!==t.length&&!Tq.test(t)},lC=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!cA(t)||t&&"object"==typeof t&&(0,P.r3)(t,".sv")},Au=function(t,e,n,r){r&&void 0===e||uC((0,P.gK)(t,"value"),e,n)},uC=function(t,e,n){const r=n instanceof kn?new $6(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+p_(r));if("function"==typeof e)throw new Error(t+"contains a function "+p_(r)+" with contents = "+e.toString());if(cA(e))throw new Error(t+"contains "+e.toString()+" "+p_(r));if("string"==typeof e&&e.length>uP/3&&(0,P.ug)(e)>uP)throw new Error(t+"contains a string greater than "+uP+" utf8 bytes "+p_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(os(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!PA(l)))throw new Error(t+" contains an invalid key ("+l+") "+p_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function G6(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,P.ug)(e),AU(t)})(r,l),uC(t,h,r),function z6(t){const e=t.parts_.pop();t.byteLength_-=(0,P.ug)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&o)throw new Error(t+' contains ".value" child '+p_(r)+" in addition to actual children.")}},vV=function(t,e,n,r){if(r&&void 0===e)return;const i=(0,P.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];os(e,(l,h)=>{const _=new kn(l);if(uC(i,h,Cr(n,_)),".priority"===Tk(_)&&!lC(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(_)}),function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const o=ZI(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!PA(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(H6);let i=null;for(n=0;n<e.length;n++){if(r=e[n],null!==i&&hc(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},dP=function(t,e,n){if(!n||void 0!==e){if(cA(e))throw new Error((0,P.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lC(e))throw new Error((0,P.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dC=function(t,e,n,r){if(!(r&&void 0===n||PA(n)))throw new Error((0,P.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hC=function(t,e,n,r){if(!(r&&void 0===n||yV(n)))throw new Error((0,P.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mq=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hC(t,e,n,r)},fc=function(t,e){if(".info"===nn(e))throw new Error(t+" failed = Can't modify data under /.info/")},wV=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!PA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yV(t)}(n))throw new Error((0,P.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function FA(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==n&&!Sk(o,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function EV(t,e,n){FA(t,n),IV(t,r=>Sk(r,e))}function Ea(t,e,n){FA(t,n),IV(t,r=>hc(r,e)||hc(e,r))}function IV(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(Rq(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Rq(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();h_&&ss("event: "+n.toString()),Yv(r)}}}const CV="repo_interrupt",Nq=25;class Oq{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vA(),this.transactionQueueTree_=new aP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bV(t){const n=t.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function fC(t){return vq({timestamp:bV(t)})}function DV(t,e,n,r,i){t.dataUpdateCount++;const o=new kn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(i)if(r){const _=(0,P.UI)(n,w=>Lr(w));l=function fq(t,e,n,r){const i=eP(t,r);if(i){const o=tP(i),l=o.path,h=o.queryId,_=fo(l,e),w=cr.fromObject(n);return nP(t,l,new nw(jk(h),_,w))}return[]}(t.serverSyncTree_,o,_,i)}else{const _=Lr(n);l=uV(t.serverSyncTree_,o,_,i)}else if(r){const _=(0,P.UI)(n,w=>Lr(w));l=function uq(t,e,n){const r=cr.fromObject(n);return iw(t,new nw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,_)}else{const _=Lr(n);l=sC(t.serverSyncTree_,o,_)}let h=o;l.length>0&&(h=ow(t,o)),Ea(t.eventQueue_,h,l)}function TV(t,e){hP(t,"connected",e),!1===e&&function Uq(t){sw(t,"onDisconnectEvents");const e=fC(t),n=vA();Uk(t.onDisconnect_,Dn(),(i,o)=>{const l=gV(i,o,t.serverSyncTree_,e);tw(n,i,l)});let r=[];Uk(n,Dn(),(i,o)=>{r=r.concat(sC(t.serverSyncTree_,i,o));const l=mP(t,i);ow(t,l)}),t.onDisconnect_=vA(),Ea(t.eventQueue_,Dn(),r)}(t)}function hP(t,e,n){const r=new kn("/.info/"+e),i=Lr(n);t.infoData_.updateSnapshot(r,i);const o=sC(t.infoSyncTree_,r,i);Ea(t.eventQueue_,r,o)}function LA(t){return t.nextWriteId_++}function fP(t,e,n,r,i){sw(t,"set",{path:e.toString(),value:n,priority:r});const o=fC(t),l=Lr(n,r),h=RA(t.serverSyncTree_,e),_=sP(l,h,o),w=LA(t),D=Xk(t.serverSyncTree_,e,_,w,!0);FA(t.eventQueue_,D),t.server_.put(e.toString(),l.val(!0),(k,B)=>{const W="ok"===k;W||Bs("set at "+e+" failed: "+k);const le=Np(t.serverSyncTree_,w,!W);Ea(t.eventQueue_,e,le),Op(0,i,k,B)});const S=mP(t,e);ow(t,S),Ea(t.eventQueue_,S,[])}function Vq(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Lk(t.onDisconnect_,e),Op(0,n,r,i)})}function SV(t,e,n,r){const i=Lr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&tw(t.onDisconnect_,e,i),Op(0,r,o,l)})}function pP(t,e,n){let r;r=".info"===nn(e._path)?xA(t.infoSyncTree_,e,n):xA(t.serverSyncTree_,e,n),EV(t.eventQueue_,e._path,r)}function AV(t){t.persistentConnection_&&t.persistentConnection_.interrupt(CV)}function sw(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ss(n,...e)}function Op(t,e,n,r){e&&Yv(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function gP(t,e,n){return RA(t.serverSyncTree_,e,n)||Yt.EMPTY_NODE}function UA(t,e=t.transactionQueueTree_){if(e||VA(t,e),v_(e)){const n=xV(t,e);(0,P.hu)(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function zq(t,e,n){const r=n.map(w=>w.currentWriteId),i=gP(t,e,r);let o=i;const l=i.hash();for(let w=0;w<n.length;w++){const D=n[w];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=fo(e,D.path);o=o.updateChild(S,D.currentOutputSnapshotRaw)}const h=o.val(!0),_=e;t.server_.put(_.toString(),h,w=>{sw(t,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let k=0;k<n.length;k++)n[k].status=2,D=D.concat(Np(t.serverSyncTree_,n[k].currentWriteId)),n[k].onComplete&&S.push(()=>n[k].onComplete(null,!0,n[k].currentOutputSnapshotResolved)),n[k].unwatcher();VA(t,OA(t.transactionQueueTree_,e)),UA(t,t.transactionQueueTree_),Ea(t.eventQueue_,e,D);for(let k=0;k<S.length;k++)Yv(S[k])}else{if("datastale"===w)for(let S=0;S<n.length;S++)n[S].status=3===n[S].status?4:0;else{Bs("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<n.length;S++)n[S].status=4,n[S].abortReason=w}ow(t,e)}},l)}(t,cC(e),n)}else mV(e)&&kA(e,n=>{UA(t,n)})}function ow(t,e){const n=MV(t,e),r=cC(n);return function qq(t,e,n){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=fo(n,_.path);let S,D=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Np(t.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=Nq)D=!0,S="maxretry",i=i.concat(Np(t.serverSyncTree_,_.currentWriteId,!0));else{const k=gP(t,_.path,l);_.currentInputSnapshot=k;const B=e[h].update(k.val());if(void 0!==B){uC("transaction failed: Data returned ",B,_.path);let W=Lr(B);"object"==typeof B&&null!=B&&(0,P.r3)(B,".priority")||(W=W.updatePriority(k.getPriority()));const pe=_.currentWriteId,$e=fC(t),nt=sP(W,k,$e);_.currentOutputSnapshotRaw=W,_.currentOutputSnapshotResolved=nt,_.currentWriteId=LA(t),l.splice(l.indexOf(pe),1),i=i.concat(Xk(t.serverSyncTree_,_.path,nt,_.currentWriteId,_.applyLocally)),i=i.concat(Np(t.serverSyncTree_,pe,!0))}else D=!0,S="nodata",i=i.concat(Np(t.serverSyncTree_,_.currentWriteId,!0))}Ea(t.eventQueue_,n,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}VA(t,t.transactionQueueTree_);for(let h=0;h<r.length;h++)Yv(r[h]);UA(t,t.transactionQueueTree_)}(t,xV(t,n),r),r}function MV(t,e){let n,r=t.transactionQueueTree_;for(n=nn(e);null!==n&&void 0===v_(r);)r=OA(r,n),n=nn(e=er(e));return r}function xV(t,e){const n=[];return RV(t,e,n),n.sort((r,i)=>r.order-i.order),n}function RV(t,e,n){const r=v_(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);kA(e,i=>{RV(t,i,n)})}function VA(t,e){const n=v_(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,cP(e,n.length>0?n:void 0)}kA(e,r=>{VA(t,r)})}function mP(t,e){const n=cC(MV(t,e)),r=OA(t.transactionQueueTree_,e);return function Cq(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{_P(t,i)}),_P(t,r),_V(r,i=>{_P(t,i)}),n}function _P(t,e){const n=v_(e);if(n){const r=[];let i=[],o=-1;for(let l=0;l<n.length;l++)3===n[l].status||(1===n[l].status?((0,P.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):((0,P.hu)(0===n[l].status,"Unexpected transaction status in abort"),n[l].unwatcher(),i=i.concat(Np(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&r.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?cP(e,void 0):n.length=o+1,Ea(t.eventQueue_,cC(e),i);for(let l=0;l<r.length;l++)Yv(r[l])}}const yP=function(t,e){const n=Kq(t),r=n.namespace;return"firebase.com"===n.domain&&Du(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Du("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new wk(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new kn(n.pathString)}},Kq=function(t){let e="",n="",r="",i="",o="",l=!0,h="https",_=443;if("string"==typeof t){let w=t.indexOf("//");w>=0&&(h=t.substring(0,w-1),t=t.substring(w+2));let D=t.indexOf("/");-1===D&&(D=t.length);let S=t.indexOf("?");-1===S&&(S=t.length),e=t.substring(0,Math.min(D,S)),D<S&&(i=function Wq(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(D,S)));const k=function Zq(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Bs(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())n="localhost";else if(B.split(".").length<=2)n=B;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),n=e.substring(W+1),o=r}"ns"in k&&(o=k.ns)}return{host:e,port:_,domain:n,subdomain:r,secure:l,scheme:h,pathString:i,namespace:o}},NV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yq=function(){let t=0;const e=[];return function(n){const r=n===t;let i;t=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=NV.charAt(n%64),n=Math.floor(n/64);(0,P.hu)(0===n,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=NV.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class OV{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class kV{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vP{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class PV{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new P.BH;return Vq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){fc("OnDisconnect.remove",this._path);const e=new P.BH;return SV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){fc("OnDisconnect.set",this._path),Au("OnDisconnect.set",e,this._path,!1);const n=new P.BH;return SV(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){fc("OnDisconnect.setWithPriority",this._path),Au("OnDisconnect.setWithPriority",e,this._path,!1),dP("OnDisconnect.setWithPriority",n,!1);const r=new P.BH;return function Bq(t,e,n,r,i){const o=Lr(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&tw(t.onDisconnect_,e,o),Op(0,i,l,h)})}(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){fc("OnDisconnect.update",this._path),vV("OnDisconnect.update",e,this._path,!1);const n=new P.BH;return function jq(t,e,n,r){if((0,P.xb)(n))return ss("onDisconnect().update() called with empty data.  Don't do anything."),void Op(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{"ok"===i&&os(n,(l,h)=>{const _=Lr(h);tw(t.onDisconnect_,Cr(e,l),_)}),Op(0,r,i,o)})}(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}class jo{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:Tk(this._path)}get ref(){return new pc(this._repo,this._path)}get _queryIdentifier(){const e=VU(this._queryParams),n=yk(e);return"{}"===n?"default":n}get _queryObject(){return VU(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof jo))return!1;const n=this._repo===e._repo,r=Sk(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function j6(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}function BA(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function kp(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Tu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Dp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==oh)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ar){if(null!=e&&!lC(e)||null!=n&&!lC(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(t.getIndex()instanceof Nk||t.getIndex()===Ok,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jA(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class pc extends jo{constructor(e,n){super(e,n,new mA,!1)}get parent(){const e=SU(this._path);return null===e?null:new pc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class w_{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new kn(e),r=E_(this.ref,e);return new w_(this._node.getChild(n),r,ar)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new w_(i,E_(this.ref,r),ar)))}hasChild(e){const n=new kn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function FV(t,e){return(t=(0,P.m9)(t))._checkNotDeleted("ref"),void 0!==e?E_(t._root,e):t._root}function LV(t,e){(t=(0,P.m9)(t))._checkNotDeleted("refFromURL");const n=yP(e,t._repo.repoInfo_.nodeAdmin);wV("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Du("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),FV(t,n.path.toString())}function E_(t,e){return null===nn((t=(0,P.m9)(t))._path)?Mq("child","path",e,!1):hC("child","path",e,!1),new pc(t._repo,Cr(t._path,e))}function wP(t,e){t=(0,P.m9)(t),fc("set",t._path),Au("set",e,t._path,!1);const n=new P.BH;return fP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function t9(t,e){vV("update",e,t._path,!1);const n=new P.BH;return function Lq(t,e,n,r){sw(t,"update",{path:e.toString(),value:n});let i=!0;const o=fC(t),l={};if(os(n,(h,_)=>{i=!1,l[h]=gV(Cr(e,h),Lr(_),t.serverSyncTree_,o)}),i)ss("update() called with empty data.  Don't do anything."),Op(0,r,"ok",void 0);else{const h=LA(t),_=function lq(t,e,n,r){!function Tz(t,e,n,r){(0,P.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=$k(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);const i=cr.fromObject(n);return iw(t,new nw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,l,h);FA(t.eventQueue_,_),t.server_.merge(e.toString(),n,(w,D)=>{const S="ok"===w;S||Bs("update at "+e+" failed: "+w);const k=Np(t.serverSyncTree_,h,!S),B=k.length>0?ow(t,e):e;Ea(t.eventQueue_,B,k),Op(0,r,w,D)}),os(n,w=>{const D=mP(t,Cr(e,w));ow(t,D)}),Ea(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function n9(t){t=(0,P.m9)(t);const e=new vP(()=>{}),n=new pC(e);return function Fq(t,e,n){const r=function pq(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(w,D)=>{const S=fo(w,n);r=r||xp(D,S)});let i=t.syncPointTree_.get(n);i?r=r||xp(i,Dn()):(i=new iV,t.syncPointTree_=t.syncPointTree_.set(n,i));const o=null!=r,l=o?new Ap(r,!0,!1):null;return function Qz(t){return IA(t.viewCache_)}(sV(i,e,CA(t.pendingWriteTree_,e._path),o?l.getNode():Yt.EMPTY_NODE,o))}(t.serverSyncTree_,e);return null!=r?Promise.resolve(r):t.server_.get(e).then(i=>{const o=Lr(i).withIndex(e._queryParams.getIndex());let l;if(Jk(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())l=sC(t.serverSyncTree_,e._path,o);else{const h=oC(t.serverSyncTree_,e);l=uV(t.serverSyncTree_,e._path,o,h)}return Ea(t.eventQueue_,e._path,l),xA(t.serverSyncTree_,e,n,null,!0),o},i=>(sw(t,"get for query "+(0,P.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(t._repo,t,n).then(r=>new w_(r,new pc(t._repo,t._path),t._queryParams.getIndex()))}class pC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new OV("value",this,new w_(e.snapshotNode,new pc(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kV(this,e,n):null}matches(e){return e instanceof pC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class HA{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kV(this,e,n):null}createEvent(e,n){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=E_(new pc(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new OV(e.type,this,new w_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof HA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function gC(t,e,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const _=n,w=(D,S)=>{pP(t._repo,t,h),_(D,S)};w.userCallback=n.userCallback,w.context=n.context,n=w}const l=new vP(n,o||void 0),h="value"===e?new pC(l):new HA(e,l);return function Hq(t,e,n){let r;r=".info"===nn(e._path)?Jk(t.infoSyncTree_,e,n):Jk(t.serverSyncTree_,e,n),EV(t.eventQueue_,e._path,r)}(t._repo,t,h),()=>pP(t._repo,t,h)}function EP(t,e,n,r){return gC(t,"value",e,n,r)}function UV(t,e,n,r){return gC(t,"child_added",e,n,r)}function VV(t,e,n,r){return gC(t,"child_changed",e,n,r)}function BV(t,e,n,r){return gC(t,"child_moved",e,n,r)}function jV(t,e,n,r){return gC(t,"child_removed",e,n,r)}function HV(t,e,n){let r=null;const i=n?new vP(n):null;"value"===e?r=new pC(i):e&&(r=new HA(e,i)),pP(t._repo,t,r)}class El{}class $V extends El{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Au("endAt",this._value,e._path,!0);const n=Fk(e._queryParams,this._value,this._key);if(jA(n),kp(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jo(e._repo,e._path,n,e._orderByCalled)}}class i9 extends El{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Au("endBefore",this._value,e._path,!1);const n=function fz(t,e,n){let r;return r=Fk(t,e,t.index_===Tu||n?n:Dp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(jA(n),kp(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jo(e._repo,e._path,n,e._orderByCalled)}}class GV extends El{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Au("startAt",this._value,e._path,!0);const n=Pk(e._queryParams,this._value,this._key);if(jA(n),kp(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jo(e._repo,e._path,n,e._orderByCalled)}}class a9 extends El{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Au("startAfter",this._value,e._path,!1);const n=function hz(t,e,n){let r;return r=Pk(t,e,t.index_===Tu||n?n:oh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jA(n),kp(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jo(e._repo,e._path,n,e._orderByCalled)}}class l9 extends El{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jo(e._repo,e._path,function uz(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class d9 extends El{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jo(e._repo,e._path,function dz(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class f9 extends El{constructor(e){super(),this._path=e}_apply(e){BA(e,"orderByChild");const n=new kn(this._path);if(rn(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Nk(n),i=_A(e._queryParams,r);return kp(i),new jo(e._repo,e._path,i,!0)}}class g9 extends El{_apply(e){BA(e,"orderByKey");const n=_A(e._queryParams,Tu);return kp(n),new jo(e._repo,e._path,n,!0)}}class _9 extends El{_apply(e){BA(e,"orderByPriority");const n=_A(e._queryParams,ar);return kp(n),new jo(e._repo,e._path,n,!0)}}class v9 extends El{_apply(e){BA(e,"orderByValue");const n=_A(e._queryParams,Ok);return kp(n),new jo(e._repo,e._path,n,!0)}}class E9 extends El{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(Au("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $V(this._value,this._key)._apply(new GV(this._value,this._key)._apply(e))}}function Il(t,...e){let n=(0,P.m9)(t);for(const r of e)n=r._apply(n);return n}(function tq(t){(0,P.hu)(!SA,"__referenceConstructor has already been defined"),SA=t})(pc),function oq(t){(0,P.hu)(!MA,"__referenceConstructor has already been defined"),MA=t}(pc);const IP={};function qV(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||Du("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ss("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=yP(o,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,o=`http://${w}?ns=${h.namespace}`,l=yP(o,i),h=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new WI(WI.OWNER):new m6(t.name,t.options,e);wV("Invalid Firebase Database URL",l),rn(l.path)||Du("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function T9(t,e,n,r){let i=IP[e.name];i||(i={},IP[e.name]=i);let o=i[t.toURLString()];return o&&Du("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Oq(t,false,n,r),i[t.toURLString()]=o,o}(h,t,D,new g6(t.name,n));return new A9(S,t)}class A9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function kq(t,e,n){if(t.stats_=Ck(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new yA(t.repoInfo_,(r,i,o,l)=>{DV(t,r,i,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>TV(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new g_(t.repoInfo_,e,(r,i,o,l)=>{DV(t,r,i,o,l)},r=>{TV(t,r)},r=>{!function Pq(t,e){os(e,(n,r)=>{hP(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function v6(t,e){const n=t.toString();return Ik[n]||(Ik[n]=e()),Ik[n]}(t.repoInfo_,()=>new vz(t.stats_,t.server_)),t.infoData_=new pz,t.infoSyncTree_=new lV({startListening:(r,i,o,l)=>{let h=[];const _=t.infoData_.getNode(r._path);return _.isEmpty()||(h=sC(t.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),hP(t,"connected",!1),t.serverSyncTree_=new lV({startListening:(r,i,o,l)=>(t.server_.listen(r,o,i,(h,_)=>{const w=l(h,_);Ea(t.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pc(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function D9(t,e){const n=IP[e];(!n||n[t.key]!==t)&&Du(`Database ${e}(${t.repoInfo_}) has already been deleted.`),AV(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Du("Cannot call "+e+" on a deleted database.")}}function WV(){gU.IS_TRANSPORT_INITIALIZED&&Bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function M9(){WV(),Tp.forceDisallow()}function x9(){WV(),Qv.forceDisallow(),Tp.forceAllow()}function O9(t,e){K2(t,e)}const P9={".sv":"timestamp"};class U9{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}g_.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},g_.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function k9(t){G2(ps.SDK_VERSION),(0,ps._registerComponent)(new Qr.wA("database",(e,{instanceIdentifier:n})=>qV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(H2,"0.14.4",t),(0,ps.registerVersion)(H2,"0.14.4","esm2017")}();const H9=new gs.Yd("@firebase/database-compat"),KV=function(t){H9.warn("FIREBASE WARNING: "+t)};class z9{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,KV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}class q9{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Pp{constructor(e,n){this._database=e,this._delegate=n}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hC("DataSnapshot.child","path",e,!1),new Pp(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Pp(this._database,n)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ys{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",n,!1);const l=ys.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{n.call(l.context,new Pp(this.database,w),D)};h.userCallback=n,h.context=l.context;const _=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return EP(this._delegate,h,_),n;case"child_added":return UV(this._delegate,h,_),n;case"child_removed":return jV(this._delegate,h,_),n;case"child_changed":return VV(this._delegate,h,_),n;case"child_moved":return BV(this._delegate,h,_),n;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",n,!0),(0,P.lb)("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,HV(this._delegate,e,i)}else HV(this._delegate,e)}get(){return n9(this._delegate).then(e=>new Pp(this.database,e))}once(e,n,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",n,!0);const o=ys.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,D)=>{const S=new Pp(this.database,w);n&&n.call(o.context,S,D),l.resolve(S)};h.userCallback=n,h.context=o.context;const _=w=>{o.cancel&&o.cancel.call(o.context,w),l.reject(w)};switch(e){case"value":EP(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":UV(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":jV(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":VV(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":BV(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ys(this.database,Il(this._delegate,function u9(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new l9(t)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ys(this.database,Il(this._delegate,function h9(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new d9(t)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ys(this.database,Il(this._delegate,function p9(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hC("orderByChild","path",t,!1),new f9(t)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ys(this.database,Il(this._delegate,function m9(){return new g9}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ys(this.database,Il(this._delegate,function y9(){return new _9}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ys(this.database,Il(this._delegate,function w9(){return new v9}()))}startAt(e=null,n){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ys(this.database,Il(this._delegate,function o9(t=null,e){return dC("startAt","key",e,!0),new GV(t,e)}(e,n)))}startAfter(e=null,n){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ys(this.database,Il(this._delegate,function c9(t,e){return dC("startAfter","key",e,!0),new a9(t,e)}(e,n)))}endAt(e=null,n){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ys(this.database,Il(this._delegate,function r9(t,e){return dC("endAt","key",e,!0),new $V(t,e)}(e,n)))}endBefore(e=null,n){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ys(this.database,Il(this._delegate,function s9(t,e){return dC("endBefore","key",e,!0),new i9(t,e)}(e,n)))}equalTo(e,n){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ys(this.database,Il(this._delegate,function I9(t,e){return dC("equalTo","key",e,!0),new E9(t,e)}(e,n)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ys))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(n)if("object"==typeof n&&null!==n)i.context=n;else{if("function"!=typeof n)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=n}return i}get ref(){return new Ia(this.database,new pc(this._delegate._repo,this._delegate._path))}}class Ia extends ys{constructor(e,n){super(e,new jo(n._repo,n._path,new mA,!1)),this.database=e,this._delegate=n}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ia(this.database,E_(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ia(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Ia(this.database,this._delegate.root)}set(e,n){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",n,!0);const r=wP(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,KV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fc("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",n,!0);const r=t9(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function e9(t,e,n){if(fc("setWithPriority",t._path),Au("setWithPriority",e,t._path,!1),dP("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new P.BH;return fP(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const n=function Xq(t){return fc("remove",t._path),wP(t,null)}(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",n,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function V9(t,e,n){var r;if(t=(0,P.m9)(t),fc("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=null===(r=n?.applyLocally)||void 0===r||r,o=new P.BH,h=EP(t,()=>{});return function Gq(t,e,n,r,i,o){sw(t,"transaction on "+e);const l={path:e,update:n,onComplete:r,status:null,order:q2(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=gP(t,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{uC("transaction failed: Data returned ",_,l.path),l.status=0;const w=OA(t.transactionQueueTree_,e),D=v_(w)||[];let S;D.push(l),cP(w,D),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(S=(0,P.DV)(_,".priority"),(0,P.hu)(lC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(RA(t.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const k=fC(t),B=Lr(_,S),W=sP(B,h,k);l.currentOutputSnapshotRaw=B,l.currentOutputSnapshotResolved=W,l.currentWriteId=LA(t);const le=Xk(t.serverSyncTree_,e,W,l.currentWriteId,l.applyLocally);Ea(t.eventQueue_,e,le),UA(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(_,w,D)=>{let S=null;_?o.reject(_):(S=new w_(D,new pc(t._repo,t._path),ar),o.resolve(new U9(w,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new q9(o.committed,new Pp(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",n,!0);const r=function Jq(t,e){t=(0,P.m9)(t),fc("setPriority",t._path),dP("setPriority",e,!1);const n=new P.BH;return fP(t._repo,Cr(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",n,!0);const r=function Qq(t,e){t=(0,P.m9)(t),fc("push",t._path),Au("push",e,t._path,!0);const n=bV(t._repo),r=Yq(n),i=E_(t,r),o=E_(t,r);let l;return l=null!=e?wP(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ia(this.database,l));n&&i.then(()=>n(null),l=>n(l));const o=new Ia(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return fc("Reference.onDisconnect",this._delegate._path),new z9(new PV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class mC{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:M9,forceLongPolling:x9}}useEmulator(e,n,r={}){!function ZV(t,e,n,r={}){(t=(0,P.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Du("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Du('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new WI(WI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,t.app.options.projectId);o=new WI(l)}!function b9(t,e,n,r){t.repoInfo_=new wk(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(this._delegate,e,n,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Ia){const n=LV(this._delegate,e.toString());return new Ia(this,n)}{const n=FV(this._delegate,e);return new Ia(this,n)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=LV(this._delegate,e);return new Ia(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function R9(t){(t=(0,P.m9)(t))._checkNotDeleted("goOffline"),AV(t._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function N9(t){(t=(0,P.m9)(t))._checkNotDeleted("goOnline"),function $q(t){t.persistentConnection_&&t.persistentConnection_.resume(CV)}(t._repo)}(this._delegate)}}mC.ServerValue={TIMESTAMP:function F9(){return P9}(),increment:t=>function L9(t){return{".sv":{increment:t}}}(t)};var Z9=Object.freeze({__proto__:null,initStandalone:function W9({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){G2(n);const l=new Qr.zt("auth-internal",new Qr.H0("database-standalone"));return l.setComponent(new Qr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new mC(qV(t,l,void 0,e,o),t),namespace:i}}});const K9=mC.ServerValue;function YV(t){return null==t}function QV(t){return"function"==typeof t.set}function XV(t,e){return QV(e)?e:t.ref(e)}function JV(t,e){if(function Q9(t){return"string"==typeof t}(t))return e.stringCase();if(QV(t))return e.firebaseCase();if(function X9(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function _C(t,e,n="on",r=yy.z){return new Qi.y(i=>{let o=null;return o=t[n](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===n&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,mt.U)(i=>{const{snapshot:o,prevKey:l}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:l,key:h}}),(0,fO.B)())}function eB(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function tW(t,e){const{payload:n,prevKey:r,key:i}=e,o=eB(t,i),l=function eW(t,e){if(YV(e))return 0;{const n=eB(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,t=[...t,w],!1})}return t;case"child_added":if(o>-1){const h=t[o-1];(h&&h.key||null)!==r&&(t=t.filter(_=>_.payload.key!==n.key)).splice(l,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(l,0,e)}return t;case"child_removed":return t.filter(h=>h.payload.key!==n.key);case"child_changed":return t.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=t.splice(o,1)[0];return(t=t.slice()).splice(l,0,h),t}return t;default:return t}}function tB(t){return(YV(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function nB(t,e,n){return function J9(t,e,n){return _C(t,"value","once",n).pipe((0,En.w)(r=>{const i=[(0,dt.of)(r)];return e.forEach(o=>i.push(_C(t,o,"on",n))),(0,hO.T)(...i).pipe(oa(tW,[]))}),(0,Lg.x)())}(t,e=tB(e),n)}function rB(t,e,n){const r=(e=tB(e)).map(i=>_C(t,i,"on",n));return(0,hO.T)(...r)}function iB(t,e){return function(r,i){return JV(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function sW(t){return function(n){return n?JV(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function sB(t,e){return function(){return _C(t,"value","on",e)}}!function Y9(t){t.INTERNAL.registerComponent(new Qr.wA("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new mC(i,r)},"PUBLIC").setServiceProps({Reference:Ia,Query:ys,Database:mC,DataSnapshot:Pp,enableLogging:O9,INTERNAL:Z9,ServerValue:K9}).setMultipleInstances(!0)),t.registerVersion("@firebase/database-compat","0.3.4")}(EE.Z);const cW=new f.OlP("angularfire2.realtimeDatabaseURL"),lW=new f.OlP("angularfire2.database.use-emulator");let uW=(()=>{class t{constructor(n,r,i,o,l,h,_,w,D,S,k,B,W,le,pe){this.schedulers=h;const $e=_,nt=(0,li.on)(n,l,r);w&&$O(nt,l,D,k,B,W,S,le),this.database=(0,li.cc)(`${nt.name}.database.${i}`,"AngularFireDatabase",nt.name,()=>{const Qe=l.runOutsideAngular(()=>nt.database(i||void 0));return $e&&Qe.useEmulator(...$e),Qe},[$e])}list(n,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>XV(this.database,n));let o=i;return r&&(o=r(i)),function oW(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:iB(r,"update"),set:iB(r,"set"),push:i=>r.push(i),remove:sW(r),snapshotChanges:i=>nB(t,i,n).pipe(_n.iC),stateChanges:i=>rB(t,i,n).pipe(_n.iC),auditTrail:i=>function nW(t,e,n){return function iW(t,e,n){return function rW(t,e){return _C(t,"value","on",e).pipe((0,mt.U)(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}(t,n).pipe(function t6(...t){const e=(0,ta.jO)(t);return(0,Hn.e)((n,r)=>{const i=t.length,o=new Array(i);let l=t.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,bo.Xf)(t[_]).subscribe((0,sr.x)(r,w=>{o[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(dr.y))&&(l=null))},EL.Z));n.subscribe((0,sr.x)(r,_=>{if(h){const w=[_,...o];r.next(e?e(...w):w)}}))})}(e),(0,mt.U)(([i,o])=>{const l=i.lastKeyToLoad,h=o.map(_=>_.key);return{actions:o,lastKeyToLoad:l,loadedKeys:h}}),function n6(t){return(0,Hn.e)((e,n)=>{let r=!1,i=0;e.subscribe((0,sr.x)(n,o=>(r||(r=!t(o,i++)))&&n.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,mt.U)(i=>i.actions))}(t,rB(t,e).pipe(oa((i,o)=>[...i,o],[])),n)}(t,i,n).pipe(_n.iC),valueChanges:(i,o)=>nB(t,i,n).pipe((0,mt.U)(h=>h.map(_=>o&&o.idField?Object.assign(Object.assign({},_.payload.val()),{[o.idField]:_.key}):_.payload.val())),_n.iC)}}(o,this)}object(n){return function aW(t,e){return{query:t,snapshotChanges:()=>sB(t,e.schedulers.outsideAngular)().pipe(_n.iC),update:n=>t.ref.update(n),set:n=>t.ref.set(n),remove:()=>t.ref.remove(),valueChanges:()=>sB(t,e.schedulers.outsideAngular)().pipe(_n.iC,(0,mt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>XV(this.database,n)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(n){return new(n||t)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(cW,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_n.HU),f.LFG(lW,8),f.LFG(OI,8),f.LFG(LO,8),f.LFG(UO,8),f.LFG(VO,8),f.LFG(BO,8),f.LFG(jO,8),f.LFG(HO,8),f.LFG(NI,8))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),dW=(()=>{class t{constructor(){zS.Z.registerVersion("angularfire",_n.q4.full,"rtdb-compat")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[uW]}),t})(),hW=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=f.oAB({type:t,bootstrap:[Z$]}),t.\u0275inj=f.cJS({imports:[Rc,$$,d4,u4,tx,ex,yi,li.hO.initializeApp(Jo_firebaseConfig),S$,P$,e6,dW]}),e})();Ol().bootstrapModule(hW).catch(t=>console.error(t)),(0,Fl.ZF)(Jo_firebaseConfig)},5619:(ft,Se,F)=>{F.d(Se,{X:()=>te});var f=F(8645);class te extends f.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ie=super._subscribe(ne);return!ie.closed&&ne.next(this._value),ie}getValue(){const{hasError:ne,thrownError:ie,_value:fe}=this;if(ne)throw ie;return this._throwIfClosed(),fe}next(ne){super.next(this._value=ne)}}},5592:(ft,Se,F)=>{F.d(Se,{y:()=>Fe});var f=F(305),te=F(7394),U=F(4850),ne=F(8407),ie=F(2653),fe=F(4674),ve=F(1441);let Fe=(()=>{class ee{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ye=new ee;return Ye.source=this,Ye.operator=Ne,Ye}subscribe(Ne,Ye,Pe){const Ze=function z(ee){return ee&&ee instanceof f.Lv||function j(ee){return ee&&(0,fe.m)(ee.next)&&(0,fe.m)(ee.error)&&(0,fe.m)(ee.complete)}(ee)&&(0,te.Nn)(ee)}(Ne)?Ne:new f.Hp(Ne,Ye,Pe);return(0,ve.x)(()=>{const{operator:je,source:wt}=this;Ze.add(je?je.call(Ze,wt):wt?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ye){Ne.error(Ye)}}forEach(Ne,Ye){return new(Ye=me(Ye))((Pe,Ze)=>{const je=new f.Hp({next:wt=>{try{Ne(wt)}catch(gt){Ze(gt),je.unsubscribe()}},error:Ze,complete:Pe});this.subscribe(je)})}_subscribe(Ne){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ne)}[U.L](){return this}pipe(...Ne){return(0,ne.U)(Ne)(this)}toPromise(Ne){return new(Ne=me(Ne))((Ye,Pe)=>{let Ze;this.subscribe(je=>Ze=je,je=>Pe(je),()=>Ye(Ze))})}}return ee.create=He=>new ee(He),ee})();function me(ee){var He;return null!==(He=ee??ie.config.Promise)&&void 0!==He?He:Promise}},8645:(ft,Se,F)=>{F.d(Se,{x:()=>ve});var f=F(5592),te=F(7394);const ne=(0,F(2306).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=F(9039),fe=F(1441);let ve=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ee=new Fe(this,this);return ee.operator=z,ee}_throwIfClosed(){if(this.closed)throw new ne}next(z){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(z)}})}error(z){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ee}=this;for(;ee.length;)ee.shift().error(z)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ee,isStopped:He,observers:Ne}=this;return ee||He?te.Lc:(this.currentObservers=null,Ne.push(z),new te.w0(()=>{this.currentObservers=null,(0,ie.P)(Ne,z)}))}_checkFinalizedStatuses(z){const{hasError:ee,thrownError:He,isStopped:Ne}=this;ee?z.error(He):Ne&&z.complete()}asObservable(){const z=new f.y;return z.source=this,z}}return me.create=(j,z)=>new Fe(j,z),me})();class Fe extends ve{constructor(j,z){super(),this.destination=j,this.source=z}next(j){var z,ee;null===(ee=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ee||ee.call(z,j)}error(j){var z,ee;null===(ee=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ee||ee.call(z,j)}complete(){var j,z;null===(z=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===z||z.call(j)}_subscribe(j){var z,ee;return null!==(ee=null===(z=this.source)||void 0===z?void 0:z.subscribe(j))&&void 0!==ee?ee:te.Lc}}},305:(ft,Se,F)=>{F.d(Se,{Hp:()=>Pe,Lv:()=>ee});var f=F(4674),te=F(7394),U=F(2653),ne=F(3894),ie=F(2420);const fe=me("C",void 0,void 0);function me(oe,Ee,re){return{kind:oe,value:Ee,error:re}}var j=F(7599),z=F(1441);class ee extends te.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,te.Nn)(Ee)&&Ee.add(this)):this.destination=gt}static create(Ee,re,Ae){return new Pe(Ee,re,Ae)}next(Ee){this.isStopped?wt(function Fe(oe){return me("N",oe,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?wt(function ve(oe){return me("E",void 0,oe)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?wt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ne(oe,Ee){return He.call(oe,Ee)}class Ye{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:re}=this;if(re.next)try{re.next(Ee)}catch(Ae){Ze(Ae)}}error(Ee){const{partialObserver:re}=this;if(re.error)try{re.error(Ee)}catch(Ae){Ze(Ae)}else Ze(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(re){Ze(re)}}}class Pe extends ee{constructor(Ee,re,Ae){let Ve;if(super(),(0,f.m)(Ee)||!Ee)Ve={next:Ee??void 0,error:re??void 0,complete:Ae??void 0};else{let Ke;this&&U.config.useDeprecatedNextContext?(Ke=Object.create(Ee),Ke.unsubscribe=()=>this.unsubscribe(),Ve={next:Ee.next&&Ne(Ee.next,Ke),error:Ee.error&&Ne(Ee.error,Ke),complete:Ee.complete&&Ne(Ee.complete,Ke)}):Ve=Ee}this.destination=new Ye(Ve)}}function Ze(oe){U.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(oe):(0,ne.h)(oe)}function wt(oe,Ee){const{onStoppedNotification:re}=U.config;re&&j.z.setTimeout(()=>re(oe,Ee))}const gt={closed:!0,next:ie.Z,error:function je(oe){throw oe},complete:ie.Z}},7394:(ft,Se,F)=>{F.d(Se,{Lc:()=>fe,w0:()=>ie,Nn:()=>ve});var f=F(4674);const U=(0,F(2306).d)(me=>function(z){me(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ee,He)=>`${He+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ne=F(9039);class ie{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ne of z)Ne.remove(this);else z.remove(this);const{initialTeardown:ee}=this;if((0,f.m)(ee))try{ee()}catch(Ne){j=Ne instanceof U?Ne.errors:[Ne]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ne of He)try{Fe(Ne)}catch(Ye){j=j??[],Ye instanceof U?j=[...j,...Ye.errors]:j.push(Ye)}}if(j)throw new U(j)}}add(j){var z;if(j&&j!==this)if(this.closed)Fe(j);else{if(j instanceof ie){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(j)}}_hasParent(j){const{_parentage:z}=this;return z===j||Array.isArray(z)&&z.includes(j)}_addParent(j){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(j),z):z?[z,j]:j}_removeParent(j){const{_parentage:z}=this;z===j?this._parentage=null:Array.isArray(z)&&(0,ne.P)(z,j)}remove(j){const{_finalizers:z}=this;z&&(0,ne.P)(z,j),j instanceof ie&&j._removeParent(this)}}ie.EMPTY=(()=>{const me=new ie;return me.closed=!0,me})();const fe=ie.EMPTY;function ve(me){return me instanceof ie||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function Fe(me){(0,f.m)(me)?me():me.unsubscribe()}},2653:(ft,Se,F)=>{F.d(Se,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ft,Se,F)=>{F.d(Se,{E:()=>te});const te=new(F(5592).y)(ie=>ie.complete())},2459:(ft,Se,F)=>{F.d(Se,{D:()=>Ee});var f=F(4829),te=F(3093),U=F(5137),fe=F(5592),Fe=F(4971),me=F(4674),j=F(7103);function ee(re,Ae){if(!re)throw new Error("Iterable cannot be null");return new fe.y(Ve=>{(0,j.f)(Ve,Ae,()=>{const Ke=re[Symbol.asyncIterator]();(0,j.f)(Ve,Ae,()=>{Ke.next().then(ue=>{ue.done?Ve.complete():Ve.next(ue.value)})},0,!0)})})}var He=F(8382),Ne=F(4026),Ye=F(4266),Pe=F(3664),Ze=F(5726),je=F(9853),wt=F(541);function Ee(re,Ae){return Ae?function oe(re,Ae){if(null!=re){if((0,He.c)(re))return function ne(re,Ae){return(0,f.Xf)(re).pipe((0,U.R)(Ae),(0,te.Q)(Ae))}(re,Ae);if((0,Ye.z)(re))return function ve(re,Ae){return new fe.y(Ve=>{let Ke=0;return Ae.schedule(function(){Ke===re.length?Ve.complete():(Ve.next(re[Ke++]),Ve.closed||this.schedule())})})}(re,Ae);if((0,Ne.t)(re))return function ie(re,Ae){return(0,f.Xf)(re).pipe((0,U.R)(Ae),(0,te.Q)(Ae))}(re,Ae);if((0,Ze.D)(re))return ee(re,Ae);if((0,Pe.T)(re))return function z(re,Ae){return new fe.y(Ve=>{let Ke;return(0,j.f)(Ve,Ae,()=>{Ke=re[Fe.h](),(0,j.f)(Ve,Ae,()=>{let ue,Ct;try{({value:ue,done:Ct}=Ke.next())}catch($t){return void Ve.error($t)}Ct?Ve.complete():Ve.next(ue)},0,!0)}),()=>(0,me.m)(Ke?.return)&&Ke.return()})}(re,Ae);if((0,wt.L)(re))return function gt(re,Ae){return ee((0,wt.Q)(re),Ae)}(re,Ae)}throw(0,je.z)(re)}(re,Ae):(0,f.Xf)(re)}},4829:(ft,Se,F)=>{F.d(Se,{Xf:()=>He});var f=F(7582),te=F(4266),U=F(4026),ne=F(5592),ie=F(8382),fe=F(5726),ve=F(9853),Fe=F(3664),me=F(541),j=F(4674),z=F(3894),ee=F(4850);function He(oe){if(oe instanceof ne.y)return oe;if(null!=oe){if((0,ie.c)(oe))return function Ne(oe){return new ne.y(Ee=>{const re=oe[ee.L]();if((0,j.m)(re.subscribe))return re.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,te.z)(oe))return function Ye(oe){return new ne.y(Ee=>{for(let re=0;re<oe.length&&!Ee.closed;re++)Ee.next(oe[re]);Ee.complete()})}(oe);if((0,U.t)(oe))return function Pe(oe){return new ne.y(Ee=>{oe.then(re=>{Ee.closed||(Ee.next(re),Ee.complete())},re=>Ee.error(re)).then(null,z.h)})}(oe);if((0,fe.D)(oe))return je(oe);if((0,Fe.T)(oe))return function Ze(oe){return new ne.y(Ee=>{for(const re of oe)if(Ee.next(re),Ee.closed)return;Ee.complete()})}(oe);if((0,me.L)(oe))return function wt(oe){return je((0,me.Q)(oe))}(oe)}throw(0,ve.z)(oe)}function je(oe){return new ne.y(Ee=>{(function gt(oe,Ee){var re,Ae,Ve,Ke;return(0,f.mG)(this,void 0,void 0,function*(){try{for(re=(0,f.KL)(oe);!(Ae=yield re.next()).done;)if(Ee.next(Ae.value),Ee.closed)return}catch(ue){Ve={error:ue}}finally{try{Ae&&!Ae.done&&(Ke=re.return)&&(yield Ke.call(re))}finally{if(Ve)throw Ve.error}}Ee.complete()})})(oe,Ee).catch(re=>Ee.error(re))})}},3019:(ft,Se,F)=>{F.d(Se,{T:()=>fe});var f=F(7537),te=F(4829),U=F(6232),ne=F(4564),ie=F(2459);function fe(...ve){const Fe=(0,ne.yG)(ve),me=(0,ne._6)(ve,1/0),j=ve;return j.length?1===j.length?(0,te.Xf)(j[0]):(0,f.J)(me)((0,ie.D)(j,Fe)):U.E}},2096:(ft,Se,F)=>{F.d(Se,{of:()=>U});var f=F(4564),te=F(2459);function U(...ne){const ie=(0,f.yG)(ne);return(0,te.D)(ne,ie)}},8251:(ft,Se,F)=>{F.d(Se,{x:()=>te});var f=F(305);function te(ne,ie,fe,ve,Fe){return new U(ne,ie,fe,ve,Fe)}class U extends f.Lv{constructor(ie,fe,ve,Fe,me,j){super(ie),this.onFinalize=me,this.shouldUnsubscribe=j,this._next=fe?function(z){try{fe(z)}catch(ee){ie.error(ee)}}:super._next,this._error=Fe?function(z){try{Fe(z)}catch(ee){ie.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(z){ie.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},3997:(ft,Se,F)=>{F.d(Se,{x:()=>ne});var f=F(2737),te=F(9360),U=F(8251);function ne(fe,ve=f.y){return fe=fe??ie,(0,te.e)((Fe,me)=>{let j,z=!0;Fe.subscribe((0,U.x)(me,ee=>{const He=ve(ee);(z||!fe(j,He))&&(z=!1,j=He,me.next(ee))}))})}function ie(fe,ve){return fe===ve}},7398:(ft,Se,F)=>{F.d(Se,{U:()=>U});var f=F(9360),te=F(8251);function U(ne,ie){return(0,f.e)((fe,ve)=>{let Fe=0;fe.subscribe((0,te.x)(ve,me=>{ve.next(ne.call(ie,me,Fe++))}))})}},7537:(ft,Se,F)=>{F.d(Se,{J:()=>U});var f=F(1631),te=F(2737);function U(ne=1/0){return(0,f.z)(te.y,ne)}},1631:(ft,Se,F)=>{F.d(Se,{z:()=>Fe});var f=F(7398),te=F(4829),U=F(9360),ne=F(7103),ie=F(8251),ve=F(4674);function Fe(me,j,z=1/0){return(0,ve.m)(j)?Fe((ee,He)=>(0,f.U)((Ne,Ye)=>j(ee,Ne,He,Ye))((0,te.Xf)(me(ee,He))),z):("number"==typeof j&&(z=j),(0,U.e)((ee,He)=>function fe(me,j,z,ee,He,Ne,Ye,Pe){const Ze=[];let je=0,wt=0,gt=!1;const oe=()=>{gt&&!Ze.length&&!je&&j.complete()},Ee=Ae=>je<ee?re(Ae):Ze.push(Ae),re=Ae=>{Ne&&j.next(Ae),je++;let Ve=!1;(0,te.Xf)(z(Ae,wt++)).subscribe((0,ie.x)(j,Ke=>{He?.(Ke),Ne?Ee(Ke):j.next(Ke)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(je--;Ze.length&&je<ee;){const Ke=Ze.shift();Ye?(0,ne.f)(j,Ye,()=>re(Ke)):re(Ke)}oe()}catch(Ke){j.error(Ke)}}))};return me.subscribe((0,ie.x)(j,Ee,()=>{gt=!0,oe()})),()=>{Pe?.()}}(ee,He,me,z)))}},3093:(ft,Se,F)=>{F.d(Se,{Q:()=>ne});var f=F(7103),te=F(9360),U=F(8251);function ne(ie,fe=0){return(0,te.e)((ve,Fe)=>{ve.subscribe((0,U.x)(Fe,me=>(0,f.f)(Fe,ie,()=>Fe.next(me),fe),()=>(0,f.f)(Fe,ie,()=>Fe.complete(),fe),me=>(0,f.f)(Fe,ie,()=>Fe.error(me),fe)))})}},3020:(ft,Se,F)=>{F.d(Se,{B:()=>ie});var f=F(4829),te=F(8645),U=F(305),ne=F(9360);function ie(ve={}){const{connector:Fe=(()=>new te.x),resetOnError:me=!0,resetOnComplete:j=!0,resetOnRefCountZero:z=!0}=ve;return ee=>{let He,Ne,Ye,Pe=0,Ze=!1,je=!1;const wt=()=>{Ne?.unsubscribe(),Ne=void 0},gt=()=>{wt(),He=Ye=void 0,Ze=je=!1},oe=()=>{const Ee=He;gt(),Ee?.unsubscribe()};return(0,ne.e)((Ee,re)=>{Pe++,!je&&!Ze&&wt();const Ae=Ye=Ye??Fe();re.add(()=>{Pe--,0===Pe&&!je&&!Ze&&(Ne=fe(oe,z))}),Ae.subscribe(re),!He&&Pe>0&&(He=new U.Hp({next:Ve=>Ae.next(Ve),error:Ve=>{je=!0,wt(),Ne=fe(gt,me,Ve),Ae.error(Ve)},complete:()=>{Ze=!0,wt(),Ne=fe(gt,j),Ae.complete()}}),(0,f.Xf)(Ee).subscribe(He))})(ee)}}function fe(ve,Fe,...me){if(!0===Fe)return void ve();if(!1===Fe)return;const j=new U.Hp({next:()=>{j.unsubscribe(),ve()}});return(0,f.Xf)(Fe(...me)).subscribe(j)}},5137:(ft,Se,F)=>{F.d(Se,{R:()=>te});var f=F(9360);function te(U,ne=0){return(0,f.e)((ie,fe)=>{fe.add(U.schedule(()=>ie.subscribe(fe),ne))})}},4664:(ft,Se,F)=>{F.d(Se,{w:()=>ne});var f=F(4829),te=F(9360),U=F(8251);function ne(ie,fe){return(0,te.e)((ve,Fe)=>{let me=null,j=0,z=!1;const ee=()=>z&&!me&&Fe.complete();ve.subscribe((0,U.x)(Fe,He=>{me?.unsubscribe();let Ne=0;const Ye=j++;(0,f.Xf)(ie(He,Ye)).subscribe(me=(0,U.x)(Fe,Pe=>Fe.next(fe?fe(He,Pe,Ye,Ne++):Pe),()=>{me=null,ee()}))},()=>{z=!0,ee()}))})}},9397:(ft,Se,F)=>{F.d(Se,{b:()=>ie});var f=F(4674),te=F(9360),U=F(8251),ne=F(2737);function ie(fe,ve,Fe){const me=(0,f.m)(fe)||ve||Fe?{next:fe,error:ve,complete:Fe}:fe;return me?(0,te.e)((j,z)=>{var ee;null===(ee=me.subscribe)||void 0===ee||ee.call(me);let He=!0;j.subscribe((0,U.x)(z,Ne=>{var Ye;null===(Ye=me.next)||void 0===Ye||Ye.call(me,Ne),z.next(Ne)},()=>{var Ne;He=!1,null===(Ne=me.complete)||void 0===Ne||Ne.call(me),z.complete()},Ne=>{var Ye;He=!1,null===(Ye=me.error)||void 0===Ye||Ye.call(me,Ne),z.error(Ne)},()=>{var Ne,Ye;He&&(null===(Ne=me.unsubscribe)||void 0===Ne||Ne.call(me)),null===(Ye=me.finalize)||void 0===Ye||Ye.call(me)}))}):ne.y}},1954:(ft,Se,F)=>{F.d(Se,{o:()=>ie});var f=F(7394);class te extends f.w0{constructor(ve,Fe){super()}schedule(ve,Fe=0){return this}}const U={setInterval(fe,ve,...Fe){const{delegate:me}=U;return me?.setInterval?me.setInterval(fe,ve,...Fe):setInterval(fe,ve,...Fe)},clearInterval(fe){const{delegate:ve}=U;return(ve?.clearInterval||clearInterval)(fe)},delegate:void 0};var ne=F(9039);class ie extends te{constructor(ve,Fe){super(ve,Fe),this.scheduler=ve,this.work=Fe,this.pending=!1}schedule(ve,Fe=0){var me;if(this.closed)return this;this.state=ve;const j=this.id,z=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(z,j,Fe)),this.pending=!0,this.delay=Fe,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(z,this.id,Fe),this}requestAsyncId(ve,Fe,me=0){return U.setInterval(ve.flush.bind(ve,this),me)}recycleAsyncId(ve,Fe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return Fe;null!=Fe&&U.clearInterval(Fe)}execute(ve,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ve,Fe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Fe){let j,me=!1;try{this.work(ve)}catch(z){me=!0,j=z||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Fe}=this,{actions:me}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(me,this),null!=ve&&(this.id=this.recycleAsyncId(Fe,ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(ft,Se,F)=>{F.d(Se,{v:()=>U});var f=F(4552);class te{constructor(ie,fe=te.now){this.schedulerActionCtor=ie,this.now=fe}schedule(ie,fe=0,ve){return new this.schedulerActionCtor(this,ie).schedule(ve,fe)}}te.now=f.l.now;class U extends te{constructor(ie,fe=te.now){super(ie,fe),this.actions=[],this._active=!1}flush(ie){const{actions:fe}=this;if(this._active)return void fe.push(ie);let ve;this._active=!0;do{if(ve=ie.execute(ie.state,ie.delay))break}while(ie=fe.shift());if(this._active=!1,ve){for(;ie=fe.shift();)ie.unsubscribe();throw ve}}}},6321:(ft,Se,F)=>{F.d(Se,{z:()=>U});var f=F(1954);const U=new(F(2631).v)(f.o)},4552:(ft,Se,F)=>{F.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(ft,Se,F)=>{F.d(Se,{z:()=>f});const f={setTimeout(te,U,...ne){const{delegate:ie}=f;return ie?.setTimeout?ie.setTimeout(te,U,...ne):setTimeout(te,U,...ne)},clearTimeout(te){const{delegate:U}=f;return(U?.clearTimeout||clearTimeout)(te)},delegate:void 0}},4971:(ft,Se,F)=>{F.d(Se,{h:()=>te});const te=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ft,Se,F)=>{F.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ft,Se,F)=>{F.d(Se,{_6:()=>fe,jO:()=>ne,yG:()=>ie});var f=F(4674);function U(ve){return ve[ve.length-1]}function ne(ve){return(0,f.m)(U(ve))?ve.pop():void 0}function ie(ve){return function te(ve){return ve&&(0,f.m)(ve.schedule)}(U(ve))?ve.pop():void 0}function fe(ve,Fe){return"number"==typeof U(ve)?ve.pop():Fe}},9039:(ft,Se,F)=>{function f(te,U){if(te){const ne=te.indexOf(U);0<=ne&&te.splice(ne,1)}}F.d(Se,{P:()=>f})},2306:(ft,Se,F)=>{function f(te){const ne=te(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Se,{d:()=>f})},1441:(ft,Se,F)=>{F.d(Se,{O:()=>ne,x:()=>U});var f=F(2653);let te=null;function U(ie){if(f.config.useDeprecatedSynchronousErrorHandling){const fe=!te;if(fe&&(te={errorThrown:!1,error:null}),ie(),fe){const{errorThrown:ve,error:Fe}=te;if(te=null,ve)throw Fe}}else ie()}function ne(ie){f.config.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=ie)}},7103:(ft,Se,F)=>{function f(te,U,ne,ie=0,fe=!1){const ve=U.schedule(function(){ne(),fe?te.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(te.add(ve),!fe)return ve}F.d(Se,{f:()=>f})},2737:(ft,Se,F)=>{function f(te){return te}F.d(Se,{y:()=>f})},4266:(ft,Se,F)=>{F.d(Se,{z:()=>f});const f=te=>te&&"number"==typeof te.length&&"function"!=typeof te},5726:(ft,Se,F)=>{F.d(Se,{D:()=>te});var f=F(4674);function te(U){return Symbol.asyncIterator&&(0,f.m)(U?.[Symbol.asyncIterator])}},4674:(ft,Se,F)=>{function f(te){return"function"==typeof te}F.d(Se,{m:()=>f})},8382:(ft,Se,F)=>{F.d(Se,{c:()=>U});var f=F(4850),te=F(4674);function U(ne){return(0,te.m)(ne[f.L])}},3664:(ft,Se,F)=>{F.d(Se,{T:()=>U});var f=F(4971),te=F(4674);function U(ne){return(0,te.m)(ne?.[f.h])}},4026:(ft,Se,F)=>{F.d(Se,{t:()=>te});var f=F(4674);function te(U){return(0,f.m)(U?.then)}},541:(ft,Se,F)=>{F.d(Se,{L:()=>ne,Q:()=>U});var f=F(7582),te=F(4674);function U(ie){return(0,f.FC)(this,arguments,function*(){const ve=ie.getReader();try{for(;;){const{value:Fe,done:me}=yield(0,f.qq)(ve.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Fe)}}finally{ve.releaseLock()}})}function ne(ie){return(0,te.m)(ie?.getReader)}},9360:(ft,Se,F)=>{F.d(Se,{A:()=>te,e:()=>U});var f=F(4674);function te(ne){return(0,f.m)(ne?.lift)}function U(ne){return ie=>{if(te(ie))return ie.lift(function(fe){try{return ne(fe,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ft,Se,F)=>{function f(){}F.d(Se,{Z:()=>f})},8407:(ft,Se,F)=>{F.d(Se,{U:()=>U,z:()=>te});var f=F(2737);function te(...ne){return U(ne)}function U(ne){return 0===ne.length?f.y:1===ne.length?ne[0]:function(fe){return ne.reduce((ve,Fe)=>Fe(ve),fe)}}},3894:(ft,Se,F)=>{F.d(Se,{h:()=>U});var f=F(2653),te=F(7599);function U(ne){te.z.setTimeout(()=>{const{onUnhandledError:ie}=f.config;if(!ie)throw ne;ie(ne)})}},9853:(ft,Se,F)=>{function f(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>f})},5879:(ft,Se,F)=>{F.d(Se,{$8M:()=>za,$WT:()=>mo,$Z:()=>gb,AFp:()=>EM,AaK:()=>ee,BQk:()=>Sy,CHM:()=>Qp,CRH:()=>k0,EJc:()=>Vm,EiD:()=>GC,EpF:()=>Ay,F4k:()=>cD,FYo:()=>Qw,FiY:()=>So,GfV:()=>Cg,Gpc:()=>Ye,HDt:()=>ac,JOm:()=>Xh,JVY:()=>YA,JZr:()=>gt,KtG:()=>vo,L6k:()=>QA,LAX:()=>JA,LFG:()=>tn,LSH:()=>Mw,Lbi:()=>JC,Lck:()=>sT,MAs:()=>sD,MMx:()=>$f,NdJ:()=>Mf,Ojb:()=>CM,OlP:()=>In,Oqu:()=>zE,P3R:()=>qC,PXZ:()=>qT,Q6J:()=>Kg,QGY:()=>My,Qsj:()=>SP,R0b:()=>rs,RDi:()=>Z_,Rgc:()=>Sm,SBq:()=>ci,Sil:()=>UT,Suo:()=>O0,TTD:()=>La,TgZ:()=>Or,VuI:()=>NR,W1O:()=>CT,X6Q:()=>wR,XFs:()=>yt,Xpm:()=>zo,Xq5:()=>_n,Xts:()=>Sd,Y36:()=>Ag,YKP:()=>lu,YNc:()=>TE,Yjl:()=>Ru,Yz7:()=>Pt,Z0I:()=>pn,ZZ4:()=>qm,_Bn:()=>dl,_UZ:()=>Af,_c5:()=>bv,_uU:()=>Ud,aQg:()=>Wm,c2e:()=>Um,cJS:()=>xn,cg1:()=>Gy,dDg:()=>GT,dqk:()=>cn,eBb:()=>XA,eFA:()=>cp,eJc:()=>Qf,ekj:()=>jE,eoX:()=>K0,f3M:()=>Qt,g9A:()=>IM,h0i:()=>jf,hGG:()=>MR,hij:()=>fm,iGM:()=>R0,ifc:()=>Rn,ip1:()=>Jn,jDz:()=>$i,kL8:()=>zy,lG2:()=>xu,lqb:()=>Jl,lri:()=>op,mCW:()=>Q_,n5z:()=>Ga,oAB:()=>zs,oxw:()=>NE,pB0:()=>eM,q3G:()=>Ql,q4F:()=>oy,qFp:()=>uS,qLn:()=>Dg,qOj:()=>wE,qZA:()=>Xr,qzn:()=>uf,rWj:()=>Hm,rg0:()=>Sh,sBO:()=>ER,s_b:()=>xm,soG:()=>dv,tb:()=>J0,tp0:()=>ai,uIk:()=>Ug,vHH:()=>oe,vpe:()=>oo,wAp:()=>Vd,xp6:()=>PM,ynx:()=>Qg,z2F:()=>lc,z3N:()=>el,zSh:()=>KC,zs3:()=>nu});var f=F(8645),te=F(7394),U=F(5619),ne=F(5592),ie=F(3019),fe=F(2096),ve=F(3020),Fe=F(4664),me=F(3997);function j(s){for(let a in s)if(s[a]===j)return a;throw Error("Could not find renamed property on target object.")}function z(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function He(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Ne=j({__forward_ref__:j});function Ye(s){return s.__forward_ref__=Ye,s.toString=function(){return ee(this())},s}function Pe(s){return Ze(s)?s():s}function Ze(s){return"function"==typeof s&&s.hasOwnProperty(Ne)&&s.__forward_ref__===Ye}function je(s){return s&&!!s.\u0275providers}const gt="https://g.co/ng/security#xss";class oe extends Error{constructor(a,c){super(function Ee(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,c)),this.code=a}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ct(s,a){throw new oe(-201,!1)}function rt(s,a){null==s&&function ct(s,a,c,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${c} ${u} ${a} <=Actual]`))}(a,s,null,"!=")}function Pt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xn(s){return{providers:s.providers||[],imports:s.imports||[]}}function gr(s){return Vr(s,xi)||Vr(s,po)}function pn(s){return null!==gr(s)}function Vr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Ca(s){return s&&(s.hasOwnProperty(Ri)||s.hasOwnProperty(gc))?s[Ri]:null}const xi=j({\u0275prov:j}),Ri=j({\u0275inj:j}),po=j({ngInjectableDef:j}),gc=j({ngInjectorDef:j});var yt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(yt||{});let Gt;function wn(s){const a=Gt;return Gt=s,a}function Pn(s,a,c){const u=gr(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&yt.Optional?null:void 0!==a?a:void Ct(ee(s))}const cn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Br={},Vt="__NG_DI_FLAG__",as="ngTempTokenPath",Da=/\n/gm,vs="__source";let Tr;function Cn(s){const a=Tr;return Tr=s,a}function ws(s,a=yt.Default){if(void 0===Tr)throw new oe(-203,!1);return null===Tr?Pn(s,void 0,a):Tr.get(s,a&yt.Optional?null:void 0,a)}function tn(s,a=yt.Default){return(function Mt(){return Gt}()||ws)(Pe(s),a)}function Qt(s,a=yt.Default){return tn(s,$(a))}function $(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function H(s){const a=[];for(let c=0;c<s.length;c++){const u=Pe(s[c]);if(Array.isArray(u)){if(0===u.length)throw new oe(900,!1);let d,g=yt.Default;for(let y=0;y<u.length;y++){const I=u[y],b=Te(I);"number"==typeof b?-1===b?d=I.token:g|=b:d=I}a.push(tn(d,g))}else a.push(tn(u))}return a}function Y(s,a){return s[Vt]=a,s.prototype[Vt]=a,s}function Te(s){return s[Vt]}function vt(s){return{toString:s}.toString()}var zt=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(zt||{}),Rn=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Rn||{});const vn={},Dt=[],Zt=j({\u0275cmp:j}),Sr=j({\u0275dir:j}),zi=j({\u0275pipe:j}),Is=j({\u0275mod:j}),Oi=j({\u0275fac:j}),_e=j({__NG_ELEMENT_ID__:j}),se=j({__NG_ENV_ID__:j});function Le(s,a,c){let u=s.length;for(;;){const d=s.indexOf(a,c);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=a.length;if(d+g===u||s.charCodeAt(d+g)<=32)return d}c=d+1}}function pt(s,a,c){let u=0;for(;u<c.length;){const d=c[u];if("number"==typeof d){if(0!==d)break;u++;const g=c[u++],y=c[u++],I=c[u++];s.setAttribute(a,y,I,g)}else{const g=d,y=c[++u];Ft(g)?s.setProperty(a,g,y):s.setAttribute(a,g,y),u++}}return u}function Tt(s){return 3===s||4===s||6===s}function Ft(s){return 64===s.charCodeAt(0)}function Xt(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let u=0;u<a.length;u++){const d=a[u];"number"==typeof d?c=d:0===c||ur(s,c,d,null,-1===c||2===c?a[++u]:null)}}return s}function ur(s,a,c,u,d){let g=0,y=s.length;if(-1===a)y=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===a){y=-1;break}if(I>a){y=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===c){if(null===u)return void(null!==d&&(s[g+1]=d));if(u===s[g+1])return void(s[g+2]=d)}g++,null!==u&&g++,null!==d&&g++}-1!==y&&(s.splice(y,0,a),g=y+1),s.splice(g++,0,c),null!==u&&s.splice(g++,0,u),null!==d&&s.splice(g++,0,d)}const nr="ng-template";function $s(s,a,c){let u=0,d=!0;for(;u<s.length;){let g=s[u++];if("string"==typeof g&&d){const y=s[u++];if(c&&"class"===g&&-1!==Le(y.toLowerCase(),a,0))return!0}else{if(1===g){for(;u<s.length&&"string"==typeof(g=s[u++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function Go(s){return 4===s.type&&s.value!==nr}function mc(s,a,c){return a===(4!==s.type||c?s.value:nr)}function ch(s,a,c){let u=4;const d=s.attrs||[],g=function _c(s){for(let a=0;a<s.length;a++)if(Tt(s[a]))return a;return s.length}(d);let y=!1;for(let I=0;I<a.length;I++){const b=a[I];if("number"!=typeof b){if(!y)if(4&u){if(u=2|1&u,""!==b&&!mc(s,b,c)||""===b&&1===a.length){if(ki(u))return!1;y=!0}}else{const x=8&u?b:a[++I];if(8&u&&null!==s.attrs){if(!$s(s.attrs,x,c)){if(ki(u))return!1;y=!0}continue}const V=lh(8&u?"class":b,d,Go(s),c);if(-1===V){if(ki(u))return!1;y=!0;continue}if(""!==x){let K;K=V>g?"":d[V+1].toLowerCase();const X=8&u?K:null;if(X&&-1!==Le(X,x,0)||2&u&&x!==K){if(ki(u))return!1;y=!0}}}}else{if(!y&&!ki(u)&&!ki(b))return!1;if(y&&ki(b))continue;y=!1,u=b|1&u}}return ki(u)||y}function ki(s){return 0==(1&s)}function lh(s,a,c,u){if(null===a)return-1;let d=0;if(u||!c){let g=!1;for(;d<a.length;){const y=a[d];if(y===s)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let I=a[++d];for(;"string"==typeof I;)I=a[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function uh(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const u=s[c];if("number"==typeof u)return-1;if(u===a)return c;c++}return-1}(a,s)}function qi(s,a,c=!1){for(let u=0;u<a.length;u++)if(ch(s,a[u],c))return!0;return!1}function Gs(s,a){return s?":not("+a.trim()+")":a}function C_(s){let a=s[0],c=1,u=2,d="",g=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&u){const I=s[++c];d+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&u?d+="."+y:4&u&&(d+=" "+y);else""!==d&&!ki(y)&&(a+=Gs(g,d),d=""),u=y,g=g||!ki(u);c++}return""!==d&&(a+=Gs(g,d)),a}function zo(s){return vt(()=>{const a=bl(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===zt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Rn.Emulated,styles:s.styles||Dt,_:null,schemas:s.schemas||null,tView:null,id:""};Nu(c);const u=s.dependencies;return c.directiveDefs=Ta(u,!1),c.pipeDefs=Ta(u,!0),c.id=function fh(s){let a=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of c)a=Math.imul(31,a)+d.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function hh(s){return Lt(s)||mr(s)}function b_(s){return null!==s}function zs(s){return vt(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function yc(s,a){if(null==s)return vn;const c={};for(const u in s)if(s.hasOwnProperty(u)){let d=s[u],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),c[d]=u,a&&(a[d]=g)}return c}function xu(s){return vt(()=>{const a=bl(s);return Nu(a),a})}function Ru(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Lt(s){return s[Zt]||null}function mr(s){return s[Sr]||null}function gn(s){return s[zi]||null}function mo(s){const a=Lt(s)||mr(s)||gn(s);return null!==a&&a.standalone}function jr(s,a){const c=s[Is]||null;if(!c&&!0===a)throw new Error(`Type ${ee(s)} does not have '\u0275mod' property.`);return c}function bl(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||vn,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yc(s.inputs,a),outputs:yc(s.outputs)}}function Nu(s){s.features?.forEach(a=>a(s))}function Ta(s,a){if(!s)return null;const c=a?gn:hh;return()=>("function"==typeof s?s():s).map(u=>c(u)).filter(b_)}const zn=0,et=1,Nt=2,Tn=3,Pi=4,Sa=5,ni=6,qo=7,Nn=8,Ar=9,qs=10,Ot=11,_i=12,ph=13,Cs=14,Fn=15,Aa=16,wc=17,yi=18,Ma=19,gh=20,Fi=21,qn=22,Dl=23,Wo=24,Ht=25,Tl=1,bs=2,vi=7,Zo=9,Mr=11;function Wn(s){return Array.isArray(s)&&"object"==typeof s[Tl]}function Li(s){return Array.isArray(s)&&!0===s[Tl]}function xa(s){return 0!=(4&s.flags)}function Ws(s){return s.componentOffset>-1}function Zs(s){return 1==(1&s.flags)}function xr(s){return!!s.template}function Hr(s){return 0!=(512&s[Nt])}function Ra(s,a){return s.hasOwnProperty(Oi)?s[Oi]:null}let Ch=cn.WeakRef??class Dc{constructor(a){this.ref=a}deref(){return this.ref}},Oa=0,Ts=null,ka=!1;function ir(s){const a=Ts;return Ts=s,a}class wi{constructor(){this.id=Oa++,this.ref=function Na(s){return new Ch(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,c]of this.producers){const u=c.producerNode.deref();if(null!=u&&c.atTrackingVersion===this.trackingVersion){if(u.producerPollStatus(c.seenValueVersion))return!0}else this.producers.delete(a),u?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=ka;ka=!0;try{for(const[c,u]of this.consumers){const d=u.consumerNode.deref();null!=d&&d.trackingVersion===u.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(c),d?.producers.delete(this.id))}}finally{ka=a}}producerAccessed(){if(ka)throw new Error("");if(null===Ts)return;let a=Ts.producers.get(this.id);void 0===a?(a={consumerNode:Ts.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Ts.trackingVersion},Ts.producers.set(this.id,a),this.consumers.set(Ts.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=Ts.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Ts?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let Th=null;function Sh(s){const a=ir(null);try{return s()}finally{ir(a)}}const Bu=()=>{};class ju extends wi{constructor(a,c,u){super(),this.watch=a,this.schedule=c,this.dirty=!1,this.cleanupFn=Bu,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=u}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=ir(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Bu,this.watch(this.registerOnCleanup)}finally{ir(a)}}cleanup(){this.cleanupFn()}}class Hu{constructor(a,c,u){this.previousValue=a,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function La(){return Al}function Al(s){return s.type.prototype.ngOnChanges&&(s.setInput=qp),Sc}function Sc(){const s=Wp(this),a=s?.current;if(a){const c=s.previous;if(c===vn)s.previous=a;else for(let u in a)c[u]=a[u];s.current=null,this.ngOnChanges(a)}}function qp(s,a,c,u){const d=this.declaredInputs[c],g=Wp(s)||function Ml(s,a){return s[$u]=a}(s,{previous:vn,current:null}),y=g.current||(g.current={}),I=g.previous,b=I[d];y[d]=new Hu(b&&b.currentValue,a,I===vn),s[u]=a}La.ngInherit=!0;const $u="__ngSimpleChanges__";function Wp(s){return s[$u]||null}const Ss=function(s,a,c){};function ln(s){for(;Array.isArray(s);)s=s[zn];return s}function Ua(s,a){return ln(a[s])}function Gr(s,a){return ln(a[s.index])}function xh(s,a){return s.data[a]}function Ki(s,a){const c=a[s];return Wn(c)?c:c[zn]}function As(s,a){return null==a?null:s[a]}function Nh(s){s[wc]=0}function qu(s){1024&s[Nt]||(s[Nt]|=1024,Wu(s,1))}function xl(s){1024&s[Nt]&&(s[Nt]&=-1025,Wu(s,-1))}function Wu(s,a){let c=s[Tn];if(null===c)return;c[Sa]+=a;let u=c;for(c=c[Tn];null!==c&&(1===a&&1===u[Sa]||-1===a&&0===u[Sa]);)c[Sa]+=a,u=c,c=c[Tn]}const bt={lFrame:ed(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ku(){return bt.bindingsEnabled}function Re(){return bt.lFrame.lView}function Kt(){return bt.lFrame.tView}function Qp(s){return bt.lFrame.contextLView=s,s[Nn]}function vo(s){return bt.lFrame.contextLView=null,s}function zr(){let s=wo();for(;null!==s&&64===s.type;)s=s.parent;return s}function wo(){return bt.lFrame.currentTNode}function ls(s,a){const c=bt.lFrame;c.currentTNode=s,c.isParent=a}function xc(){return bt.lFrame.isParent}function Xu(){bt.lFrame.isParent=!1}function Ln(){return bt.lFrame.bindingIndex++}function Fh(s,a){const c=bt.lFrame;c.bindingIndex=c.bindingRootIndex=s,Oc(a)}function Oc(s){bt.lFrame.currentDirectiveIndex=s}function kc(){return bt.lFrame.currentQueryIndex}function Yo(s){bt.lFrame.currentQueryIndex=s}function Ms(s){const a=s[et];return 2===a.type?a.declTNode:1===a.type?s[ni]:null}function kl(s,a,c){if(c&yt.SkipSelf){let d=a,g=s;for(;!(d=d.parent,null!==d||c&yt.Host||(d=Ms(g),null===d||(g=g[Cs],10&d.type))););if(null===d)return!1;a=d,s=g}const u=bt.lFrame=Fc();return u.currentTNode=a,u.lView=s,!0}function Pc(s){const a=Fc(),c=s[et];bt.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Fc(){const s=bt.lFrame,a=null===s?null:s.child;return null===a?ed(s):a}function ed(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Xp(){const s=bt.lFrame;return bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const M_=Xp;function Qo(){const s=Xp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ei(){return bt.lFrame.selectedIndex}function Eo(s){bt.lFrame.selectedIndex=s}function jn(){const s=bt.lFrame;return xh(s.tView,s.selectedIndex)}let td=!0;function Bc(){return td}function Xo(s){td=s}function nd(s,a){for(let c=a.directiveStart,u=a.directiveEnd;c<u;c++){const g=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:O}=g;y&&(s.contentHooks??=[]).push(-c,y),I&&((s.contentHooks??=[]).push(c,I),(s.contentCheckHooks??=[]).push(c,I)),b&&(s.viewHooks??=[]).push(-c,b),x&&((s.viewHooks??=[]).push(c,x),(s.viewCheckHooks??=[]).push(c,x)),null!=O&&(s.destroyHooks??=[]).push(c,O)}}function ja(s,a,c){Fl(s,a,3,c)}function rd(s,a,c,u){(3&s[Nt])===c&&Fl(s,a,c,u)}function Pl(s,a){let c=s[Nt];(3&c)===a&&(c&=8191,c+=1,s[Nt]=c)}function Fl(s,a,c,u){const g=u??-1,y=a.length-1;let I=0;for(let b=void 0!==u?65535&s[wc]:0;b<y;b++)if("number"==typeof a[b+1]){if(I=a[b],null!=u&&I>=u)break}else a[b]<0&&(s[wc]+=65536),(I<g||-1==g)&&(Qi(s,c,a,b),s[wc]=(4294901760&s[wc])+b+2),b++}function Jo(s,a){Ss(4,s,a);const c=ir(null);try{a.call(s)}finally{ir(c),Ss(5,s,a)}}function Qi(s,a,c,u){const d=c[u]<0,g=c[u+1],I=s[d?-c[u]:c[u]];d?s[Nt]>>13<s[wc]>>16&&(3&s[Nt])===a&&(s[Nt]+=8192,Jo(I,g)):Jo(I,g)}const Ii=-1;class jc{constructor(a,c,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function Io(s){return s!==Ii}function dr(s){return 32767&s}function Hc(s,a){let c=function mt(s){return s>>16}(s),u=a;for(;c>0;)u=u[Cs],c--;return u}let Ha=!0;function Co(s){const a=Ha;return Ha=s,a}const Xi=255,sr=5;let Bh=0;const Ui={};function Ul(s,a){const c=na(s,a);if(-1!==c)return c;const u=a[et];u.firstCreatePass&&(s.injectorIndex=a.length,$c(u.data,s),$c(a,null),$c(u.blueprint,null));const d=Qs(s,a),g=s.injectorIndex;if(Io(d)){const y=dr(d),I=Hc(d,a),b=I[et].data;for(let x=0;x<8;x++)a[g+x]=I[y+x]|b[y+x]}return a[g+8]=d,g}function $c(s,a){s.push(0,0,0,0,0,0,0,0,a)}function na(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Qs(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,u=null,d=a;for(;null!==d;){if(u=jl(d),null===u)return Ii;if(c++,d=d[Cs],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return Ii}function $a(s,a,c){!function od(s,a,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(_e)&&(u=c[_e]),null==u&&(u=c[_e]=Bh++);const d=u&Xi;a.data[s+(d>>sr)]|=1<<d}(s,a,c)}function bo(s,a,c){if(c&yt.Optional||void 0!==s)return s;Ct()}function Vl(s,a,c,u){if(c&yt.Optional&&void 0===u&&(u=null),!(c&(yt.Self|yt.Host))){const d=s[Ar],g=wn(void 0);try{return d?d.get(a,u,c&yt.Optional):Pn(a,u,c&yt.Optional)}finally{wn(g)}}return bo(u,0,c)}function cd(s,a,c,u=yt.Default,d){if(null!==s){if(2048&a[Nt]&&!(u&yt.Self)){const y=function ii(s,a,c,u,d){let g=s,y=a;for(;null!==g&&null!==y&&2048&y[Nt]&&!(512&y[Nt]);){const I=Do(g,y,c,u|yt.Self,Ui);if(I!==Ui)return I;let b=g.parent;if(!b){const x=y[gh];if(x){const O=x.get(c,Ui,u);if(O!==Ui)return O}b=jl(y),y=y[Cs]}g=b}return d}(s,a,c,u,Ui);if(y!==Ui)return y}const g=Do(s,a,c,u,Ui);if(g!==Ui)return g}return Vl(a,c,u,d)}function Do(s,a,c,u,d){const g=function Gc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(_e)?s[_e]:void 0;return"number"==typeof a?a>=0?a&Xi:sa:a}(c);if("function"==typeof g){if(!kl(a,s,u))return u&yt.Host?bo(d,0,u):Vl(a,c,u,d);try{const y=g(u);if(null!=y||u&yt.Optional)return y;Ct()}finally{M_()}}else if("number"==typeof g){let y=null,I=na(s,a),b=Ii,x=u&yt.Host?a[Fn][ni]:null;for((-1===I||u&yt.SkipSelf)&&(b=-1===I?Qs(s,a):a[I+8],b!==Ii&&Xs(u,!1)?(y=a[et],I=dr(b),a=Hc(b,a)):I=-1);-1!==I;){const O=a[et];if(Bl(g,I,O.data)){const V=ra(I,a,c,y,u,x);if(V!==Ui)return V}b=a[I+8],b!==Ii&&Xs(u,a[et].data[I+8]===x)&&Bl(g,I,a)?(y=O,I=dr(b),a=Hc(b,a)):I=-1}}return d}function ra(s,a,c,u,d,g){const y=a[et],I=y.data[s+8],O=ia(I,y,c,null==u?Ws(I)&&Ha:u!=y&&0!=(3&I.type),d&yt.Host&&g===I);return null!==O?Hn(a,y,O,I):Ui}function ia(s,a,c,u,d){const g=s.providerIndexes,y=a.data,I=1048575&g,b=s.directiveStart,O=g>>20,K=d?I+O:s.directiveEnd;for(let X=u?I:I+O;X<K;X++){const be=y[X];if(X<b&&c===be||X>=b&&be.type===c)return X}if(d){const X=y[b];if(X&&xr(X)&&X.type===c)return b}return null}function Hn(s,a,c,u){let d=s[c];const g=a.data;if(function dn(s){return s instanceof jc}(d)){const y=d;y.resolving&&function Ve(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new oe(-200,`Circular dependency in DI detected for ${s}${c}`)}(function Ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(g[c]));const I=Co(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?wn(y.injectImpl):null;kl(s,u,yt.Default);try{d=s[c]=y.factory(void 0,g,s,u),a.firstCreatePass&&c>=u.directiveStart&&function Uh(s,a,c){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:g}=a.type.prototype;if(u){const y=Al(a);(c.preOrderHooks??=[]).push(s,y),(c.preOrderCheckHooks??=[]).push(s,y)}d&&(c.preOrderHooks??=[]).push(0-s,d),g&&((c.preOrderHooks??=[]).push(s,g),(c.preOrderCheckHooks??=[]).push(s,g))}(c,g[c],a)}finally{null!==b&&wn(b),Co(I),y.resolving=!1,M_()}}return d}function Bl(s,a,c){return!!(c[a+(s>>sr)]&1<<s)}function Xs(s,a){return!(s&yt.Self||s&yt.Host&&a)}class En{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,u){return cd(this._tNode,this._lView,a,$(u),c)}}function sa(){return new En(zr(),Re())}function Ga(s){return vt(()=>{const a=s.prototype.constructor,c=a[Oi]||Rr(a),u=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==u;){const g=d[Oi]||Rr(d);if(g&&g!==c)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Rr(s){return Ze(s)?()=>{const a=Rr(Pe(s));return a&&a()}:Ra(s)}function jl(s){const a=s[et],c=a.type;return 2===c?a.declTNode:1===c?s[ni]:null}function za(s){return function ad(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const u=c.length;let d=0;for(;d<u;){const g=c[d];if(Tt(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<u&&"string"==typeof c[d];)d++;else{if(g===a)return c[d+1];d+=2}}}return null}(zr(),s)}const Zr="__parameters__";function xs(s,a,c){return vt(()=>{const u=function Vi(s){return function(...c){if(s){const u=s(...c);for(const d in u)this[d]=u[d]}}}(a);function d(...g){if(this instanceof d)return u.apply(this,g),this;const y=new d(...g);return I.annotation=y,I;function I(b,x,O){const V=b.hasOwnProperty(Zr)?b[Zr]:Object.defineProperty(b,Zr,{value:[]})[Zr];for(;V.length<=O;)V.push(null);return(V[O]=V[O]||[]).push(y),b}}return c&&(d.prototype=Object.create(c.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Ji(s,a){s.forEach(c=>Array.isArray(c)?Ji(c,a):a(c))}function dd(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function hd(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function T(s,a,c){let u=L(s,a);return u>=0?s[1|u]=c:(u=~u,function ig(s,a,c,u){let d=s.length;if(d==a)s.push(c,u);else if(1===d)s.push(u,s[0]),s[0]=c;else{for(d--,s.push(s[d-1],s[d]);d>a;)s[d]=s[d-2],d--;s[a]=c,s[a+1]=u}}(s,u,a,c)),u}function R(s,a){const c=L(s,a);if(c>=0)return s[1|c]}function L(s,a){return function Q(s,a,c){let u=0,d=s.length>>c;for(;d!==u;){const g=u+(d-u>>1),y=s[g<<c];if(a===y)return g<<c;y>a?d=g:u=g+1}return~(d<<c)}(s,a,1)}const So=Y(xs("Optional"),8),ai=Y(xs("SkipSelf"),4);function Yh(s){return 128==(128&s.flags)}var Xh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Xh||{});const F_=/^>|^->|<!--|-->|--!>|<!-$/g,pw=/(<|>)/,gw="\u200b$1\u200b";const ug=new Map;let _d=0;const fs="__ngContext__";function or(s,a){Wn(a)?(s[fs]=a[Ma],function dg(s){ug.set(s[Ma],s)}(a)):s[fs]=a}let Ed;function Os(s,a){return Ed(s,a)}function Ya(s){const a=s[Tn];return Li(a)?a[Tn]:a}function Kc(s){return tf(s[_i])}function ji(s){return tf(s[Pi])}function tf(s){for(;null!==s&&!Li(s);)s=s[Pi];return s}function Ro(s,a,c,u,d){if(null!=u){let g,y=!1;Li(u)?g=u:Wn(u)&&(y=!0,u=u[zn]);const I=ln(u);0===s&&null!==c?null==d?ke(a,c,I):J(a,c,I,d||null,!0):1===s&&null!==c?J(a,c,I,d||null,!0):2===s?function bd(s,a,c){const u=On(s,a);u&&function it(s,a,c,u){s.removeChild(a,c,u)}(s,u,a,c)}(a,I,y):3===s&&a.destroyNode(I),null!=g&&function q_(s,a,c,u,d){const g=c[vi];g!==ln(c)&&Ro(a,s,u,g,d);for(let I=Mr;I<c.length;I++){const b=c[I];sf(b[et],b,s,a,u,g)}}(a,s,g,c,d)}}function Qa(s,a){return s.createComment(function L_(s){return s.replace(F_,a=>a.replace(pw,gw))}(a))}function Kl(s,a,c){return s.createElement(a,c)}function G_(s,a){const c=s[Zo],u=c.indexOf(a);xl(a),c.splice(u,1)}function v(s,a){if(s.length<=Mr)return;const c=Mr+a,u=s[c];if(u){const d=u[Aa];null!==d&&d!==s&&G_(d,u),a>0&&(s[c-1][Pi]=u[Pi]);const g=hd(s,Mr+a);!function hg(s,a){sf(s,a,a[Ot],2,null,null),a[zn]=null,a[ni]=null}(u[et],u);const y=g[yi];null!==y&&y.detachView(g[et]),u[Tn]=null,u[Pi]=null,u[Nt]&=-129}return u}function p(s,a){if(!(256&a[Nt])){const c=a[Ot];a[Dl]?.destroy(),a[Wo]?.destroy(),c.destroyNode&&sf(s,a,c,3,null,null),function bC(s){let a=s[_i];if(!a)return m(s[et],s);for(;a;){let c=null;if(Wn(a))c=a[_i];else{const u=a[Mr];u&&(c=u)}if(!c){for(;a&&!a[Pi]&&a!==s;)Wn(a)&&m(a[et],a),a=a[Tn];null===a&&(a=s),Wn(a)&&m(a[et],a),c=a&&a[Pi]}a=c}}(a)}}function m(s,a){if(!(256&a[Nt])){a[Nt]&=-129,a[Nt]|=256,function M(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let u=0;u<c.length;u+=2){const d=a[c[u]];if(!(d instanceof jc)){const g=c[u+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const I=d[g[y]],b=g[y+1];Ss(4,I,b);try{b.call(I)}finally{Ss(5,I,b)}}else{Ss(4,d,g);try{g.call(d)}finally{Ss(5,d,g)}}}}}(s,a),function E(s,a){const c=s.cleanup,u=a[qo];if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const y=c[g+3];y>=0?u[y]():u[-y].unsubscribe(),g+=2}else c[g].call(u[c[g+1]]);null!==u&&(a[qo]=null);const d=a[Fi];if(null!==d){a[Fi]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(s,a),1===a[et].type&&a[Ot].destroy();const c=a[Aa];if(null!==c&&Li(a[Tn])){c!==a[Tn]&&G_(c,a);const u=a[yi];null!==u&&u.detachView(s)}!function yw(s){ug.delete(s[Ma])}(a)}}function N(s,a,c){return function G(s,a,c){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return c[zn];{const{componentOffset:d}=u;if(d>-1){const{encapsulation:g}=s.data[u.directiveStart+d];if(g===Rn.None||g===Rn.Emulated)return null}return Gr(u,c)}}(s,a.parent,c)}function J(s,a,c,u,d){s.insertBefore(a,c,u,d)}function ke(s,a,c){s.appendChild(a,c)}function Ge(s,a,c,u,d){null!==u?J(s,a,c,u,d):ke(s,a,c)}function On(s,a){return s.parentNode(a)}let rf,W_,Cw,Xc,nf=function Yc(s,a,c){return 40&s.type?Gr(s,c):null};function Oo(s,a,c,u){const d=N(s,u,a),g=a[Ot],I=function No(s,a,c){return nf(s,a,c)}(u.parent||a[ni],u,a);if(null!=d)if(Array.isArray(c))for(let b=0;b<c.length;b++)Ge(g,d,c[b],I,!1);else Ge(g,d,c,I,!1);void 0!==rf&&rf(g,u,a,c,d)}function Yl(s,a){if(null!==a){const c=a.type;if(3&c)return Gr(a,s);if(4&c)return Cd(-1,s[a.index]);if(8&c){const u=a.child;if(null!==u)return Yl(s,u);{const d=s[a.index];return Li(d)?Cd(-1,d):ln(d)}}if(32&c)return Os(a,s)()||ln(s[a.index]);{const u=fg(s,a);return null!==u?Array.isArray(u)?u[0]:Yl(Ya(s[Fn]),u):Yl(s,a.next)}}return null}function fg(s,a){return null!==a?s[Fn][ni].projection[a.projection]:null}function Cd(s,a){const c=Mr+s+1;if(c<a.length){const u=a[c],d=u[et].firstChild;if(null!==d)return Yl(u,d)}return a[vi]}function Dd(s,a,c,u,d,g,y){for(;null!=c;){const I=u[c.index],b=c.type;if(y&&0===a&&(I&&or(ln(I),u),c.flags|=2),32!=(32&c.flags))if(8&b)Dd(s,a,c.child,u,d,g,!1),Ro(a,s,d,I,g);else if(32&b){const x=Os(c,u);let O;for(;O=x();)Ro(a,s,d,O,g);Ro(a,s,d,I,g)}else 16&b?Ew(s,a,u,c,d,g):Ro(a,s,d,I,g);c=y?c.projectionNext:c.next}}function sf(s,a,c,u,d,g){Dd(c,u,s.firstChild,a,d,g,!1)}function Ew(s,a,c,u,d,g){const y=c[Fn],b=y[ni].projection[u.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)Ro(a,s,d,b[x],g);else{let x=b;const O=y[Tn];Yh(u)&&(x.flags|=128),Dd(s,a,x,O,d,g,!0)}}function SC(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function AC(s,a,c){const{mergedAttrs:u,classes:d,styles:g}=c;null!==u&&pt(s,a,u),null!==d&&SC(s,a,d),null!==g&&function GA(s,a,c){s.setAttribute(a,"style",c)}(s,a,g)}function cf(s){return function Iw(){if(void 0===W_&&(W_=null,cn.trustedTypes))try{W_=cn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return W_}()?.createHTML(s)||s}function Z_(s){Cw=s}function NC(s){return function K_(){if(void 0===Xc&&(Xc=null,cn.trustedTypes))try{Xc=cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Xc}()?.createScriptURL(s)||s}class Jc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}class WA extends Jc{getTypeName(){return"HTML"}}class bw extends Jc{getTypeName(){return"Style"}}class OC extends Jc{getTypeName(){return"Script"}}class ZA extends Jc{getTypeName(){return"URL"}}class KA extends Jc{getTypeName(){return"ResourceURL"}}function el(s){return s instanceof Jc?s.changingThisBreaksApplicationSecurity:s}function uf(s,a){const c=function Y_(s){return s instanceof Jc&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${gt})`)}return c===a}function YA(s){return new WA(s)}function QA(s){return new bw(s)}function XA(s){return new OC(s)}function JA(s){return new ZA(s)}function eM(s){return new KA(s)}class PC{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(cf(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class bP{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=cf(a),c}}const LC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Q_(s){return(s=String(s)).match(LC)?s:"unsafe:"+s}function tl(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function pg(...s){const a={};for(const c of s)for(const u in c)c.hasOwnProperty(u)&&(a[u]=!0);return a}const UC=tl("area,br,col,hr,img,wbr"),VC=tl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),BC=tl("rp,rt"),mg=pg(UC,pg(VC,tl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pg(BC,tl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pg(BC,VC)),Dw=tl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sw=pg(Dw,tl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),HC=tl("script,style,template");class rM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,u=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?u=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,u&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let d=this.checkClobberedElement(c,c.nextSibling);if(d){c=d;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!mg.hasOwnProperty(c))return this.sanitizedSomething=!0,!HC.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const u=a.attributes;for(let d=0;d<u.length;d++){const g=u.item(d),y=g.name,I=y.toLowerCase();if(!Sw.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let b=g.value;Dw[I]&&(b=Q_(b)),this.buf.push(" ",y,'="',$C(b),'"')}return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();mg.hasOwnProperty(c)&&!UC.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push($C(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const iM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sM=/([^\#-~ |!])/g;function $C(s){return s.replace(/&/g,"&amp;").replace(iM,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(sM,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Td;function GC(s,a){let c=null;try{Td=Td||function kC(s){const a=new bP(s);return function FC(){try{return!!(new window.DOMParser).parseFromString(cf(""),"text/html")}catch{return!1}}()?new PC(a):a}(s);let u=a?String(a):"";c=Td.getInertBodyElement(u);let d=5,g=u;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,u=g,g=c.innerHTML,c=Td.getInertBodyElement(u)}while(u!==g);return cf((new rM).sanitizeChildren(Aw(c)||c))}finally{if(c){const u=Aw(c)||c;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Aw(s){return"content"in s&&function _g(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Ql=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Ql||{});function Mw(s){const a=X_();return a?a.sanitize(Ql.URL,s)||"":uf(s,"URL")?el(s):Q_(re(s))}function zC(s){const a=X_();if(a)return NC(a.sanitize(Ql.RESOURCE_URL,s)||"");if(uf(s,"ResourceURL"))return NC(el(s));throw new oe(904,!1)}function qC(s,a,c){return function lM(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?zC:Mw}(a,c)(s)}function X_(){const s=Re();return s&&s[qs].sanitizer}class In{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Pt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Sd=new In("ENVIRONMENT_INITIALIZER"),xw=new In("INJECTOR",-1),dM=new In("INJECTOR_DEF_TYPES");class Rw{get(a,c=Br){if(c===Br){const u=new Error(`NullInjectorError: No provider for ${ee(a)}!`);throw u.name="NullInjectorError",u}return c}}function hM(...s){return{\u0275providers:fM(0,s),\u0275fromNgModule:!0}}function fM(s,...a){const c=[],u=new Set;let d;return Ji(a,g=>{const y=g;WC(y,c,[],u)&&(d||=[],d.push(y))}),void 0!==d&&pM(d,c),c}function pM(s,a){for(let c=0;c<s.length;c++){const{providers:d}=s[c];J_(d,g=>{a.push(g)})}}function WC(s,a,c,u){if(!(s=Pe(s)))return!1;let d=null,g=Ca(s);const y=!g&&Lt(s);if(g||y){if(y&&!y.standalone)return!1;d=s}else{const b=s.ngModule;if(g=Ca(b),!g)return!1;d=b}const I=u.has(d);if(y){if(I)return!1;if(u.add(d),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const x of b)WC(x,a,c,u)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let x;u.add(d);try{Ji(g.imports,O=>{WC(O,a,c,u)&&(x||=[],x.push(O))})}finally{}void 0!==x&&pM(x,a)}if(!I){const x=Ra(d)||(()=>new d);a.push({provide:d,useFactory:x,deps:Dt},{provide:dM,useValue:d,multi:!0},{provide:Sd,useValue:()=>tn(d),multi:!0})}const b=g.providers;null==b||I||J_(b,O=>{a.push(O)})}}return d!==s&&void 0!==s.providers}function J_(s,a){for(let c of s)je(c)&&(c=c.\u0275providers),Array.isArray(c)?J_(c,a):a(c)}const Nw=j({provide:String,useValue:j});function Ow(s){return null!==s&&"object"==typeof s&&Nw in s}function Xl(s){return"function"==typeof s}const KC=new In("Set Injector scope."),kw={},DP={};let Pw;function Fw(){return void 0===Pw&&(Pw=new Rw),Pw}class Jl{}class Lw extends Jl{get destroyed(){return this._destroyed}constructor(a,c,u,d){super(),this.parent=c,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vw(a,y=>this.processProvider(y)),this.records.set(xw,hf(void 0,this)),d.has("environment")&&this.records.set(Jl,hf(void 0,this));const g=this.records.get(KC);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(dM.multi,Dt,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=Cn(this),u=wn(void 0);try{return a()}finally{Cn(c),wn(u)}}get(a,c=Br,u=yt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(se))return a[se](this);u=$(u);const d=Cn(this),g=wn(void 0);try{if(!(u&yt.SkipSelf)){let I=this.records.get(a);if(void 0===I){const b=function XC(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(a)&&gr(a);I=b&&this.injectableDefInScope(b)?hf(Uw(a),kw):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(u&yt.Self?Fw():this.parent).get(a,c=u&yt.Optional&&c===Br?null:c)}catch(y){if("NullInjectorError"===y.name){if((y[as]=y[as]||[]).unshift(ee(a)),d)throw y;return function ce(s,a,c,u){const d=s[as];throw a[vs]&&d.unshift(a[vs]),s.message=function ot(s,a,c,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ee(a);if(Array.isArray(a))d=a.map(ee).join(" -> ");else if("object"==typeof a){let g=[];for(let y in a)if(a.hasOwnProperty(y)){let I=a[y];g.push(y+":"+("string"==typeof I?JSON.stringify(I):ee(I)))}d=`{${g.join(", ")}}`}return`${c}${u?"("+u+")":""}[${d}]: ${s.replace(Da,"\n  ")}`}("\n"+s.message,d,c,u),s.ngTokenPath=d,s[as]=null,s}(y,a,"R3InjectorError",this.source)}throw y}finally{wn(g),Cn(d)}}resolveInjectorInitializers(){const a=Cn(this),c=wn(void 0);try{const u=this.get(Sd.multi,Dt,yt.Self);for(const d of u)d()}finally{Cn(a),wn(c)}}toString(){const a=[],c=this.records;for(const u of c.keys())a.push(ee(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(a){let c=Xl(a=Pe(a))?a:Pe(a&&a.provide);const u=function yM(s){return Ow(s)?hf(void 0,s.useValue):hf(QC(s),kw)}(a);if(Xl(a)||!0!==a.multi)this.records.get(c);else{let d=this.records.get(c);d||(d=hf(void 0,kw,!0),d.factory=()=>H(d.multi),this.records.set(c,d)),c=a,d.multi.push(a)}this.records.set(c,u)}hydrate(a,c){return c.value===kw&&(c.value=DP,c.value=c.factory()),"object"==typeof c.value&&c.value&&function wM(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Pe(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Uw(s){const a=gr(s),c=null!==a?a.factory:Ra(s);if(null!==c)return c;if(s instanceof In)throw new oe(204,!1);if(s instanceof Function)return function YC(s){const a=s.length;if(a>0)throw function ca(s,a){const c=[];for(let u=0;u<s;u++)c.push(a);return c}(a,"?"),new oe(204,!1);const c=function Mi(s){return s&&(s[xi]||s[po])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new oe(204,!1)}function QC(s,a,c){let u;if(Xl(s)){const d=Pe(s);return Ra(d)||Uw(d)}if(Ow(s))u=()=>Pe(s.useValue);else if(function mM(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...H(s.deps||[]));else if(function ZC(s){return!(!s||!s.useExisting)}(s))u=()=>tn(Pe(s.useExisting));else{const d=Pe(s&&(s.useClass||s.provide));if(!function vM(s){return!!s.deps}(s))return Ra(d)||Uw(d);u=()=>new d(...H(s.deps))}return u}function hf(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function Vw(s,a){for(const c of s)Array.isArray(c)?Vw(c,a):c&&je(c)?Vw(c.\u0275providers,a):a(c)}const EM=new In("AppId",{providedIn:"root",factory:()=>TP}),TP="ng",IM=new In("Platform Initializer"),JC=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CM=new In("CSP nonce",{providedIn:"root",factory:()=>function lf(){if(void 0!==Cw)return Cw;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let $w=(s,a)=>null;function Gw(s,a){return $w(s,a)}class Zw{}class Kw{}class sy{resolveComponentFactory(a){throw function ob(s){const a=Error(`No component factory found for ${ee(s)}.`);return a.ngComponent=s,a}(a)}}let Eg=(()=>{class a{}return a.NULL=new sy,a})();function cb(){return Md(zr(),Re())}function Md(s,a){return new ci(Gr(s,a))}let ci=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=cb,a})();function eu(s){return s instanceof ci?s.nativeElement:s}class Qw{}let SP=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function AP(){const s=Re(),c=Ki(zr().index,s);return(Wn(c)?c:s)[Ot]}(),a})(),Ig=(()=>{var s;class a{}return(s=a).\u0275prov=Pt({token:s,providedIn:"root",factory:()=>null}),a})();class Cg{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const oy=new Cg("16.1.7"),gf={};function bg(s){for(;s;){s[Nt]|=64;const a=Ya(s);if(Hr(s)&&!a)return s;s=a}return null}function lb(s){return s.ngOriginalError}class Dg{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&lb(a);for(;c&&lb(c);)c=lb(c);return c||null}}const MM=new In("",{providedIn:"root",factory:()=>!1});function Po(s){return s instanceof Function?s():s}class eE extends wi{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){bg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,c,u){const d=ir(this);this.trackingVersion++;try{a(c,u)}finally{ir(d)}}destroy(){this.trackingVersion++}}let Rd=null;function mf(){return Rd??=new eE,Rd}function OM(s,a){return s[a]??mf()}function kM(s,a){const c=mf();c.hasReadASignal&&(s[a]=Rd,c.lView=s,Rd=new eE)}const jt={};function PM(s){tu(Kt(),Re(),Ei()+s,!1)}function tu(s,a,c,u){if(!u)if(3==(3&a[Nt])){const g=s.preOrderCheckHooks;null!==g&&ja(a,g,c)}else{const g=s.preOrderHooks;null!==g&&rd(a,g,0,c)}Eo(c)}function pb(s,a=null,c=null,u){const d=nE(s,a,c,u);return d.resolveInjectorInitializers(),d}function nE(s,a=null,c=null,u,d=new Set){const g=[c||Dt,hM(s)];return u=u||("object"==typeof s?void 0:ee(s)),new Lw(g,a||Fw(),u||null,d)}let nu=(()=>{var s;class a{static create(u,d){if(Array.isArray(u))return pb({name:""},d,u,"");{const g=u.name??"";return pb({name:g},u.parent,u.providers,g)}}}return(s=a).THROW_IF_NOT_FOUND=Br,s.NULL=new Rw,s.\u0275prov=Pt({token:s,providedIn:"any",factory:()=>tn(xw)}),s.__NG_ELEMENT_ID__=-1,a})();function Ag(s,a=yt.Default){const c=Re();return null===c?tn(s,a):cd(zr(),c,Pe(s),a)}function gb(){throw new Error("invalid")}function iE(s,a,c,u,d,g,y,I,b,x,O){const V=a.blueprint.slice();return V[zn]=d,V[Nt]=140|u,(null!==x||s&&2048&s[Nt])&&(V[Nt]|=2048),Nh(V),V[Tn]=V[Cs]=s,V[Nn]=c,V[qs]=y||s&&s[qs],V[Ot]=I||s&&s[Ot],V[Ar]=b||s&&s[Ar]||null,V[ni]=g,V[Ma]=function mw(){return _d++}(),V[qn]=O,V[gh]=x,V[Fn]=2==a.type?s[Fn]:V,V}function Mg(s,a,c,u,d){let g=s.data[a];if(null===g)g=function xg(s,a,c,u,d){const g=wo(),y=xc(),b=s.data[a]=function FP(s,a,c,u,d,g){let y=a?a.injectorIndex:-1,I=0;return function cs(){return null!==bt.skipHydrationRootTNode}()&&(I|=128),{type:c,index:u,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,c,a,u,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(y?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b,b.prev=g)),b}(s,a,c,u,d),function qr(){return bt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=c,g.value=u,g.attrs=d;const y=function Rl(){const s=bt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return ls(g,!0),g}function Rg(s,a,c,u){if(0===c)return-1;const d=a.length;for(let g=0;g<c;g++)a.push(u),s.blueprint.push(u),s.data.push(null);return d}function sE(s,a,c,u,d){const g=OM(a,Dl),y=Ei(),I=2&u;try{if(Eo(-1),I&&a.length>Ht&&tu(s,a,Ht,!1),Ss(I?2:0,d),I)g.runInContext(c,u,d);else{const x=ir(null);try{c(u,d)}finally{ir(x)}}}finally{I&&null===a[Dl]&&kM(a,Dl),Eo(y),Ss(I?3:1,d)}}function Ng(s,a,c){if(xa(a)){const u=ir(null);try{const g=a.directiveEnd;for(let y=a.directiveStart;y<g;y++){const I=s.data[y];I.contentQueries&&I.contentQueries(1,c[y],y)}}finally{ir(u)}}}function oE(s,a,c){Ku()&&(function UP(s,a,c,u){const d=c.directiveStart,g=c.directiveEnd;Ws(c)&&function WM(s,a,c){const u=Gr(a,s),d=_b(c);let y=16;c.signals?y=4096:c.onPush&&(y=64);const I=wf(s,iE(s,d,null,y,u,a,null,s[qs].rendererFactory.createRenderer(u,c),null,null,null));s[a.index]=I}(a,c,s.data[d+c.componentOffset]),s.firstCreatePass||Ul(c,a),or(u,a);const y=c.initialInputs;for(let I=d;I<g;I++){const b=s.data[I],x=Hn(a,s,I,c);or(x,a),null!==y&&dE(0,I-d,x,b,0,y),xr(b)&&(Ki(c.index,a)[Nn]=Hn(a,s,I,c))}}(s,a,c,Gr(c,a)),64==(64&c.flags)&&aE(s,a,c))}function mb(s,a,c=Gr){const u=a.localNames;if(null!==u){let d=a.index+1;for(let g=0;g<u.length;g+=2){const y=u[g+1],I=-1===y?c(a,s):s[y];s[d++]=I}}}function _b(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Nd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function Nd(s,a,c,u,d,g,y,I,b,x,O){const V=Ht+u,K=V+d,X=function Og(s,a){const c=[];for(let u=0;u<a;u++)c.push(u<s?null:jt);return c}(V,K),be="function"==typeof x?x():x;return X[et]={type:s,blueprint:X,template:c,queries:null,viewQuery:I,declTNode:a,data:X.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:K,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:be,incompleteFirstPass:!1,ssrId:O}}let yf=s=>null;function BM(s,a,c,u){for(let d in s)if(s.hasOwnProperty(d)){c=null===c?{}:c;const g=s[d];null===u?jM(c,a,d,g):u.hasOwnProperty(d)&&jM(c,a,u[d],g)}return c}function jM(s,a,c,u){s.hasOwnProperty(c)?s[c].push(a,u):s[c]=[a,u]}function vf(s,a,c,u){if(Ku()){const d=null===u?null:{"":-1},g=function bb(s,a){const c=s.directiveRegistry;let u=null,d=null;if(c)for(let g=0;g<c.length;g++){const y=c[g];if(qi(a,y.selectors,!1))if(u||(u=[]),xr(y))if(null!==y.findHostDirectiveDefs){const I=[];d=d||new Map,y.findHostDirectiveDefs(y,I,d),u.unshift(...I,y),cE(s,a,I.length)}else u.unshift(y),cE(s,a,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,u,d),u.push(y)}return null===u?null:[u,d]}(s,c);let y,I;null===g?y=I=null:[y,I]=g,null!==y&&Ib(s,a,c,y,d,I),d&&function Db(s,a,c){if(a){const u=s.localNames=[];for(let d=0;d<a.length;d+=2){const g=c[a[d+1]];if(null==g)throw new oe(-301,!1);u.push(a[d],g)}}}(c,u,d)}c.mergedAttrs=Xt(c.mergedAttrs,c.attrs)}function Ib(s,a,c,u,d,g){for(let x=0;x<u.length;x++)$a(Ul(c,a),s,u[x].type);!function qM(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,u.length);for(let x=0;x<u.length;x++){const O=u[x];O.providersResolver&&O.providersResolver(O)}let y=!1,I=!1,b=Rg(s,a,u.length,null);for(let x=0;x<u.length;x++){const O=u[x];c.mergedAttrs=Xt(c.mergedAttrs,O.hostAttrs),Tb(s,c,a,b,O),lE(b,O,d),null!==O.contentQueries&&(c.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(c.flags|=64);const V=O.type.prototype;!y&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),y=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),I=!0),b++}!function LP(s,a,c){const d=a.directiveEnd,g=s.data,y=a.attrs,I=[];let b=null,x=null;for(let O=a.directiveStart;O<d;O++){const V=g[O],K=c?c.get(V):null,be=K?K.outputs:null;b=BM(V.inputs,O,b,K?K.inputs:null),x=BM(V.outputs,O,x,be);const Be=null===b||null===y||Go(a)?null:hE(b,O,y);I.push(Be)}null!==b&&(b.hasOwnProperty("class")&&(a.flags|=8),b.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=I,a.inputs=b,a.outputs=x}(s,c,g)}function aE(s,a,c){const u=c.directiveStart,d=c.directiveEnd,g=c.index,y=function Nc(){return bt.lFrame.currentDirectiveIndex}();try{Eo(g);for(let I=u;I<d;I++){const b=s.data[I],x=a[I];Oc(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&zM(b,x)}}finally{Eo(-1),Oc(y)}}function zM(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function cE(s,a,c){a.componentOffset=c,(s.components??=[]).push(a.index)}function lE(s,a,c){if(c){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)c[a.exportAs[u]]=s;xr(a)&&(c[""]=s)}}function Tb(s,a,c,u,d){s.data[u]=d;const g=d.factory||(d.factory=Ra(d.type)),y=new jc(g,xr(d),Ag);s.blueprint[u]=y,c[u]=y,function Cb(s,a,c,u,d){const g=d.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~a.index;(function GM(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(y)!=I&&y.push(I),y.push(c,u,g)}}(s,a,u,Rg(s,c,d.hostVars,jt),d)}function no(s,a,c,u,d,g){const y=Gr(s,a);!function uE(s,a,c,u,d,g,y){if(null==g)s.removeAttribute(a,d,c);else{const I=null==y?re(g):y(g,u||"",d);s.setAttribute(a,d,I,c)}}(a[Ot],y,g,s.value,c,u,d)}function dE(s,a,c,u,d,g){const y=g[a];if(null!==y)for(let I=0;I<y.length;)Sb(u,c,y[I++],y[I++],y[I++])}function Sb(s,a,c,u,d){const g=ir(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(u)&&(d=y[u].call(a,d)),null!==s.setInput?s.setInput(a,d,c,u):a[u]=d}finally{ir(g)}}function hE(s,a,c){let u=null,d=0;for(;d<c.length;){const g=c[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===u&&(u=[]);const y=s[g];for(let I=0;I<y.length;I+=2)if(y[I]===a){u.push(g,y[I+1],c[d+1]);break}}d+=2}else d+=2;else d+=4}return u}function fE(s,a,c,u){return[s,!0,!1,a,null,0,u,c,null,null,null]}function Ab(s,a){const c=s.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const g=c[u+1];if(-1!==g){const y=s.data[g];Yo(c[u]),y.contentQueries(2,a[g],g)}}}function wf(s,a){return s[_i]?s[ph][Pi]=a:s[_i]=a,s[ph]=a,a}function pE(s,a,c){Yo(0);const u=ir(null);try{a(s,c)}finally{ir(u)}}function Mb(s){return s[qo]||(s[qo]=[])}function py(s){return s.cleanup||(s.cleanup=[])}function Rb(s,a){const c=s[Ar],u=c?c.get(Dg,null):null;u&&u.handleError(a)}function gy(s,a,c,u,d){for(let g=0;g<c.length;){const y=c[g++],I=c[g++];Sb(s.data[y],a[y],u,I,d)}}function VP(s,a){const c=Ki(a,s),u=c[et];!function gE(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])}(u,c);const d=c[zn];null!==d&&null===c[qn]&&(c[qn]=Gw(d,c[Ar])),mE(u,c,c[Nn])}function mE(s,a,c){Pc(a);try{const u=s.viewQuery;null!==u&&pE(1,u,c);const d=s.template;null!==d&&sE(s,a,d,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ab(s,a),s.staticViewQueries&&pE(2,s.viewQuery,c);const g=s.components;null!==g&&function Nb(s,a){for(let c=0;c<a.length;c++)VP(s,a[c])}(a,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{a[Nt]&=-5,Qo()}}let _E=(()=>{var s;class a{constructor(){this.all=new Set,this.queue=new Map}create(u,d,g){const y=typeof Zone>"u"?null:Zone.current,I=new ju(u,O=>{this.all.has(O)&&this.queue.set(O,y)},g);let b;this.all.add(I),I.notify();const x=()=>{I.cleanup(),b?.(),this.all.delete(I),this.queue.delete(I)};return b=d?.onDestroy(x),{destroy:x}}flush(){if(0!==this.queue.size)for(const[u,d]of this.queue)this.queue.delete(u),d?d.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return(s=a).\u0275prov=Pt({token:s,providedIn:"root",factory:()=>new s}),a})();function kg(s,a,c){let u=c?s.styles:null,d=c?s.classes:null,g=0;if(null!==a)for(let y=0;y<a.length;y++){const I=a[y];"number"==typeof I?g=I:1==g?d=He(d,I):2==g&&(u=He(u,I+": "+a[++y]+";"))}c?s.styles=u:s.stylesWithoutHost=u,c?s.classes=d:s.classesWithoutHost=d}function Pg(s,a,c,u,d=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&u.push(ln(g)),Li(g)){for(let I=Mr;I<g.length;I++){const b=g[I],x=b[et].firstChild;null!==x&&Pg(b[et],b,x,u)}g[vi]!==g[zn]&&u.push(g[vi])}const y=c.type;if(8&y)Pg(s,a,c.child,u);else if(32&y){const I=Os(c,a);let b;for(;b=I();)u.push(b)}else if(16&y){const I=fg(a,c);if(Array.isArray(I))u.push(...I);else{const b=Ya(a[Fn]);Pg(b[et],b,I,u,!0)}}c=d?c.projectionNext:c.next}return u}function my(s,a,c,u=!0){const d=a[qs].rendererFactory;d.begin&&d.begin();try{Fb(s,a,s.template,c)}catch(y){throw u&&Rb(a,y),y}finally{d.end&&d.end(),a[qs].effectManager?.flush()}}function Fb(s,a,c,u){const d=a[Nt];if(256!=(256&d)){a[qs].effectManager?.flush(),Pc(a);try{Nh(a),function Ol(s){return bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&sE(s,a,c,2,u);const y=3==(3&d);if(y){const x=s.preOrderCheckHooks;null!==x&&ja(a,x,null)}else{const x=s.preOrderHooks;null!==x&&rd(a,x,0,null),Pl(a,0)}if(function YM(s){for(let a=Kc(s);null!==a;a=ji(a)){if(!a[bs])continue;const c=a[Zo];for(let u=0;u<c.length;u++){qu(c[u])}}}(a),yE(a,2),null!==s.contentQueries&&Ab(s,a),y){const x=s.contentCheckHooks;null!==x&&ja(a,x)}else{const x=s.contentHooks;null!==x&&rd(a,x,1),Pl(a,1)}!function rE(s,a){const c=s.hostBindingOpCodes;if(null===c)return;const u=OM(a,Wo);try{for(let d=0;d<c.length;d++){const g=c[d];if(g<0)Eo(~g);else{const y=g,I=c[++d],b=c[++d];Fh(I,y),u.runInContext(b,2,a[y])}}}finally{null===a[Wo]&&kM(a,Wo),Eo(-1)}}(s,a);const I=s.components;null!==I&&vE(a,I,0);const b=s.viewQuery;if(null!==b&&pE(2,b,u),y){const x=s.viewCheckHooks;null!==x&&ja(a,x)}else{const x=s.viewHooks;null!==x&&rd(a,x,2),Pl(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Nt]&=-73,xl(a)}finally{Qo()}}}function yE(s,a){for(let c=Kc(s);null!==c;c=ji(c))for(let u=Mr;u<c.length;u++)Ub(c[u],a)}function Lb(s,a,c){Ub(Ki(a,s),c)}function Ub(s,a){if(!function Rh(s){return 128==(128&s[Nt])}(s))return;const c=s[et];if(80&s[Nt]&&0===a||1024&s[Nt]||2===a)Fb(c,s,c.template,s[Nn]);else if(s[Sa]>0){yE(s,1);const d=s[et].components;null!==d&&vE(s,d,1)}}function vE(s,a,c){for(let u=0;u<a.length;u++)Lb(s,a[u],c)}class Fg{get rootNodes(){const a=this._lView,c=a[et];return Pg(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(a){this._lView[Nn]=a}get destroyed(){return 256==(256&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Tn];if(Li(a)){const c=a[8],u=c?c.indexOf(this):-1;u>-1&&(v(a,u),hd(c,u))}this._attachedToViewContainer=!1}p(this._lView[et],this._lView)}onDestroy(a){!function _o(s,a){if(256==(256&s[Nt]))throw new oe(911,!1);null===s[Fi]&&(s[Fi]=[]),s[Fi].push(a)}(this._lView,a)}markForCheck(){bg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-129}reattach(){this._lView[Nt]|=128}detectChanges(){my(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $_(s,a){sf(s,a,a[Ot],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=a}}class Vb extends Fg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;my(a[et],a,a[Nn],!1)}checkNoChanges(){}get context(){return null}}class QM extends Eg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Lt(a);return new Ef(c,this.ngModule)}}function XM(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class Bb{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,u){u=$(u);const d=this.injector.get(a,gf,u);return d!==gf||c===gf?d:this.parentInjector.get(a,c,u)}}class Ef extends Kw{get inputs(){const a=this.componentDef,c=a.inputTransforms,u=XM(a.inputs);if(null!==c)for(const d of u)c.hasOwnProperty(d.propName)&&(d.transform=c[d.propName]);return u}get outputs(){return XM(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Fp(s){return s.map(C_).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,u,d){let g=(d=d||this.ngModule)instanceof Jl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new Bb(a,g):a,I=y.get(Qw,null);if(null===I)throw new oe(407,!1);const O={rendererFactory:I,sanitizer:y.get(Ig,null),effectManager:y.get(_E,null)},V=I.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",X=u?function yb(s,a,c,u){const g=u.get(MM,!1)||c===Rn.ShadowDom,y=s.selectRootElement(a,g);return function vb(s){yf(s)}(y),y}(V,u,this.componentDef.encapsulation,y):Kl(V,K,function jP(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(K)),Je=this.componentDef.signals?4608:this.componentDef.onPush?576:528,ht=Nd(0,null,null,1,0,null,null,null,null,null,null),Me=iE(null,ht,null,Je,null,null,O,V,y,null,null);let kt,Jt;Pc(Me);try{const on=this.componentDef;let is,Xm=null;on.findHostDirectiveDefs?(is=[],Xm=new Map,on.findHostDirectiveDefs(on,is,Xm),is.push(on)):is=[on];const dS=function jb(s,a){const c=s[et],u=Ht;return s[u]=a,Mg(c,u,2,"#host",null)}(Me,X),fI=function JM(s,a,c,u,d,g,y){const I=d[et];!function $P(s,a,c,u){for(const d of s)a.mergedAttrs=Xt(a.mergedAttrs,d.hostAttrs);null!==a.mergedAttrs&&(kg(a,a.mergedAttrs,!0),null!==c&&AC(u,c,a))}(u,s,a,y);let b=null;null!==a&&(b=Gw(a,d[Ar]));const x=g.rendererFactory.createRenderer(a,c);let O=16;c.signals?O=4096:c.onPush&&(O=64);const V=iE(d,_b(c),null,O,d[s.index],s,g,x,null,null,b);return I.firstCreatePass&&cE(I,s,u.length-1),wf(d,V),d[s.index]=V}(dS,X,on,is,Me,O,V);Jt=xh(ht,Ht),X&&function zP(s,a,c,u){if(u)pt(s,c,["ng-version",oy.full]);else{const{attrs:d,classes:g}=function Cl(s){const a=[],c=[];let u=1,d=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===d?""!==g&&a.push(g,s[++u]):8===d&&c.push(g);else{if(!ki(d))break;d=g}u++}return{attrs:a,classes:c}}(a.selectors[0]);d&&pt(s,c,d),g&&g.length>0&&SC(s,c,g.join(" "))}}(V,on,X,u),void 0!==c&&function ex(s,a,c){const u=s.projection=[];for(let d=0;d<a.length;d++){const g=c[d];u.push(null!=g?Array.from(g):null)}}(Jt,this.ngContentSelectors,c),kt=function GP(s,a,c,u,d,g){const y=zr(),I=d[et],b=Gr(y,d);Ib(I,d,y,c,null,u);for(let O=0;O<c.length;O++)or(Hn(d,I,y.directiveStart+O,y),d);aE(I,d,y),b&&or(b,d);const x=Hn(d,I,y.directiveStart+y.componentOffset,y);if(s[Nn]=d[Nn]=x,null!==g)for(const O of g)O(x,a);return Ng(I,y,s),x}(fI,on,is,Xm,Me,[tx]),mE(ht,Me,null)}finally{Qo()}return new HP(this.componentType,kt,Md(Jt,Me),Me,Jt)}}class HP extends Zw{constructor(a,c,u,d,g){super(),this.location=u,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new Vb(d),this.componentType=a}setInput(a,c){const u=this._tNode.inputs;let d;if(null!==u&&(d=u[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const g=this._rootLView;gy(g[et],g,d,a,c),this.previousInputValues.set(a,c),bg(Ki(this._tNode.index,g))}}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function tx(){const s=zr();nd(Re()[et],s)}function wE(s){let a=function Hb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const u=[s];for(;a;){let d;if(xr(s))d=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new oe(903,!1);d=a.\u0275dir}if(d){if(c){u.push(d);const y=s;y.inputs=_y(s.inputs),y.inputTransforms=_y(s.inputTransforms),y.declaredInputs=_y(s.declaredInputs),y.outputs=_y(s.outputs);const I=d.hostBindings;I&&sx(s,I);const b=d.viewQuery,x=d.contentQueries;if(b&&rx(s,b),x&&ix(s,x),z(s.inputs,d.inputs),z(s.declaredInputs,d.declaredInputs),z(s.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),z(y.inputTransforms,d.inputTransforms)),xr(d)&&d.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const I=g[y];I&&I.ngInherit&&I(s),I===wE&&(c=!1)}}a=Object.getPrototypeOf(a)}!function nx(s){let a=0,c=null;for(let u=s.length-1;u>=0;u--){const d=s[u];d.hostVars=a+=d.hostVars,d.hostAttrs=Xt(d.hostAttrs,c=Xt(c,d.hostAttrs))}}(u)}function _y(s){return s===vn?{}:s===Dt?[]:s}function rx(s,a){const c=s.viewQuery;s.viewQuery=c?(u,d)=>{a(u,d),c(u,d)}:a}function ix(s,a){const c=s.contentQueries;s.contentQueries=c?(u,d,g)=>{a(u,d,g),c(u,d,g)}:a}function sx(s,a){const c=s.hostBindings;s.hostBindings=c?(u,d)=>{a(u,d),c(u,d)}:a}function _n(s){const a=s.inputConfig,c={};for(const u in a)if(a.hasOwnProperty(u)){const d=a[u];Array.isArray(d)&&d[2]&&(c[u]=d[2])}s.inputTransforms=c}function Lg(s){return!!we(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function we(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function P(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function Ug(s,a,c,u){const d=Re();return P(d,Ln(),a)&&(Kt(),no(jn(),d,s,a,c,u)),Ug}function TE(s,a,c,u,d,g,y,I){const b=Re(),x=Kt(),O=s+Ht,V=x.firstCreatePass?function tD(s,a,c,u,d,g,y,I,b){const x=a.consts,O=Mg(a,s,4,y||null,As(x,I));vf(a,c,O,As(x,b)),nd(a,O);const V=O.tView=Nd(2,O,u,d,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x,null);return null!==a.queries&&(a.queries.template(a,O),V.queries=a.queries.embeddedTView(O)),O}(O,x,b,a,c,u,d,g,y):x.data[O];ls(V,!1);const K=nD(x,b,V,s);Bc()&&Oo(x,b,K,V),or(K,b),wf(b,b[O]=fE(K,b,K,V)),Zs(V)&&oE(x,b,V),null!=y&&mb(b,V,I)}let nD=function SE(s,a,c,u){return Xo(!0),a[Ot].createComment("")};function sD(s){return function Ys(s,a){return s[a]}(function Bn(){return bt.lFrame.contextLView}(),Ht+s)}function Kg(s,a,c){const u=Re();return P(u,Ln(),a)&&function ks(s,a,c,u,d,g,y,I){const b=Gr(a,c);let O,x=a.inputs;!I&&null!=x&&(O=x[u])?(gy(s,c,O,u,d),Ws(a)&&function $M(s,a){const c=Ki(a,s);16&c[Nt]||(c[Nt]|=64)}(c,a.index)):3&a.type&&(u=function HM(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),d=null!=y?y(d,a.value||"",u):d,g.setProperty(b,u,d))}(Kt(),jn(),u,s,a,u[Ot],c,!1),Kg}function Yg(s,a,c,u,d){const y=d?"class":"style";gy(s,c,a.inputs[y],y,u)}function Or(s,a,c,u){const d=Re(),g=Kt(),y=Ht+s,I=d[Ot],b=g.firstCreatePass?function ME(s,a,c,u,d,g){const y=a.consts,b=Mg(a,s,2,u,As(y,d));return vf(a,c,b,As(y,g)),null!==b.attrs&&kg(b,b.attrs,!1),null!==b.mergedAttrs&&kg(b,b.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,b),b}(y,g,d,a,c,u):g.data[y],x=Ty(g,d,b,I,a,s);d[y]=x;const O=Zs(b);return ls(b,!0),AC(I,x,b),32!=(32&b.flags)&&Bc()&&Oo(g,d,x,b),0===function Zp(){return bt.lFrame.elementDepthCount}()&&or(x,d),function kh(){bt.lFrame.elementDepthCount++}(),O&&(oE(g,d,b),Ng(g,b,d)),null!==u&&mb(d,b),Or}function Xr(){let s=zr();xc()?Xu():(s=s.parent,ls(s,!1));const a=s;(function Ba(s){return bt.skipHydrationRootTNode===s})(a)&&function Yp(){bt.skipHydrationRootTNode=null}(),function Kp(){bt.lFrame.elementDepthCount--}();const c=Kt();return c.firstCreatePass&&(nd(c,s),xa(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function id(s){return 0!=(8&s.flags)}(a)&&Yg(c,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function sd(s){return 0!=(16&s.flags)}(a)&&Yg(c,a,Re(),a.stylesWithoutHost,!1),Xr}function Af(s,a,c,u){return Or(s,a,c,u),Xr(),Af}let Ty=(s,a,c,u,d,g)=>(Xo(!0),Kl(u,d,function Vc(){return bt.lFrame.currentNamespace}()));function Qg(s,a,c){const u=Re(),d=Kt(),g=s+Ht,y=d.firstCreatePass?function yx(s,a,c,u,d){const g=a.consts,y=As(g,u),I=Mg(a,s,8,"ng-container",y);return null!==y&&kg(I,y,!0),vf(a,c,I,As(g,d)),null!==a.queries&&a.queries.elementStart(a,I),I}(g,d,u,a,c):d.data[g];ls(y,!0);const I=aD(d,u,y,s);return u[g]=I,Bc()&&Oo(d,u,I,y),or(I,u),Zs(y)&&(oE(d,u,y),Ng(d,y,u)),null!=c&&mb(u,y),Qg}function Sy(){let s=zr();const a=Kt();return xc()?Xu():(s=s.parent,ls(s,!1)),a.firstCreatePass&&(nd(a,s),xa(s)&&a.queries.elementEnd(s)),Sy}let aD=(s,a,c,u)=>(Xo(!0),Qa(a[Ot],""));function Ay(){return Re()}function My(s){return!!s&&"function"==typeof s.then}function cD(s){return!!s&&"function"==typeof s.subscribe}function Mf(s,a,c,u){const d=Re(),g=Kt(),y=zr();return function RE(s,a,c,u,d,g,y){const I=Zs(u),x=s.firstCreatePass&&py(s),O=a[Nn],V=Mb(a);let K=!0;if(3&u.type||y){const Be=Gr(u,a),Je=y?y(Be):Be,ht=V.length,Me=y?Jt=>y(ln(Jt[u.index])):u.index;let kt=null;if(!y&&I&&(kt=function xE(s,a,c,u){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===c&&d[g+1]===u){const I=a[qo],b=d[g+2];return I.length>b?I[b]:null}"string"==typeof y&&(g+=2)}return null}(s,a,d,u.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=g,kt.__ngLastListenerFn__=g,K=!1;else{g=xf(u,a,O,g,!1);const Jt=c.listen(Je,d,g);V.push(g,Jt),x&&x.push(d,Me,ht,ht+1)}}else g=xf(u,a,O,g,!1);const X=u.outputs;let be;if(K&&null!==X&&(be=X[d])){const Be=be.length;if(Be)for(let Je=0;Je<Be;Je+=2){const on=a[be[Je]][be[Je+1]].subscribe(g),is=V.length;V.push(g,on),x&&x.push(d,u.index,is,-(is+1))}}}(g,d,d[Ot],y,s,a,u),Mf}function lD(s,a,c,u){try{return Ss(6,a,c),!1!==c(u)}catch(d){return Rb(s,d),!1}finally{Ss(7,a,c)}}function xf(s,a,c,u,d){return function g(y){if(y===Function)return u;bg(s.componentOffset>-1?Ki(s.index,a):a);let b=lD(a,c,u,y),x=g.__ngNextListenerFn__;for(;x;)b=lD(a,c,x,y)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&y.preventDefault(),b}}function NE(s=1){return function Lh(s){return(bt.lFrame.contextLView=function x_(s,a){for(;s>0;)a=a[Cs],s--;return a}(s,bt.lFrame.contextLView))[Nn]}(s)}function tm(s,a){return s<<17|a<<2}function _r(s){return s>>17&32767}function Nf(s){return 2|s}function su(s){return(131068&s)>>2}function rm(s,a){return-131069&s|a<<2}function Ny(s){return 1|s}function im(s,a,c,u,d){const g=s[c+1],y=null===a;let I=u?_r(g):su(g),b=!1;for(;0!==I&&(!1===b||y);){const O=s[I+1];sm(s[I],a)&&(b=!0,s[I+1]=u?Ny(O):Nf(O)),I=u?_r(O):su(O)}b&&(s[c+1]=u?Nf(g):Ny(g))}function sm(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&L(s,a)>=0}function jE(s,a){return function di(s,a,c,u){const d=Re(),g=Kt(),y=function us(s){const a=bt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}(2);g.firstUpdatePass&&function HE(s,a,c,u){const d=s.data;if(null===d[c+1]){const g=d[Ei()],y=function lm(s,a){return a>=s.expandoStartIndex}(s,c);(function GE(s,a){return 0!=(s.flags&(a?8:16))})(g,u)&&null===a&&!y&&(a=!1),a=function Yn(s,a,c,u){const d=function Ju(s){const a=bt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=u?a.residualClasses:a.residualStyles;if(null===d)0===(u?a.classBindings:a.styleBindings)&&(c=kf(c=$E(null,s,a,c,u),a.attrs,u),g=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==d)if(c=$E(d,s,a,c,u),null===g){let b=function Fy(s,a,c){const u=c?a.classBindings:a.styleBindings;if(0!==su(u))return s[_r(u)]}(s,a,u);void 0!==b&&Array.isArray(b)&&(b=$E(null,s,a,b[1],u),b=kf(b,a.attrs,u),function um(s,a,c,u){s[_r(c?a.classBindings:a.styleBindings)]=u}(s,a,u,b))}else g=function dm(s,a,c){let u;const d=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<d;g++)u=kf(u,s[g].hostAttrs,c);return kf(u,a.attrs,c)}(s,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),c}(d,g,a,u),function FE(s,a,c,u,d,g){let y=g?a.classBindings:a.styleBindings,I=_r(y),b=su(y);s[u]=c;let O,x=!1;if(Array.isArray(c)?(O=c[1],(null===O||L(c,O)>0)&&(x=!0)):O=c,d)if(0!==b){const K=_r(s[I+1]);s[u+1]=tm(K,I),0!==K&&(s[K+1]=rm(s[K+1],u)),s[I+1]=function nm(s,a){return 131071&s|a<<17}(s[I+1],u)}else s[u+1]=tm(I,0),0!==I&&(s[I+1]=rm(s[I+1],u)),I=u;else s[u+1]=tm(b,0),0===I?I=u:s[b+1]=rm(s[b+1],u),b=u;x&&(s[u+1]=Nf(s[u+1])),im(s,O,u,!0),im(s,O,u,!1),function LE(s,a,c,u,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&L(g,a)>=0&&(c[u+1]=Ny(c[u+1]))}(a,O,s,u,g),y=tm(I,b),g?a.classBindings=y:a.styleBindings=y}(d,g,a,c,y,u)}}(g,s,y,u),a!==jt&&P(d,y,a)&&function Pf(s,a,c,u,d,g,y,I){if(!(3&a.type))return;const b=s.data,x=b[I+1],O=function mD(s){return 1==(1&s)}(x)?cl(b,a,c,d,su(x),y):void 0;hm(O)||(hm(g)||function gD(s){return 2==(2&s)}(x)&&(g=cl(b,null,c,d,I,y)),function af(s,a,c,u,d){if(a)d?s.addClass(c,u):s.removeClass(c,u);else{let g=-1===u.indexOf("-")?void 0:Xh.DashCase;null==d?s.removeStyle(c,u,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Xh.Important),s.setStyle(c,u,d,g))}}(u,y,Ua(Ei(),c),d,g))}(g,g.data[Ei()],d,d[Ot],s,d[y+1]=function DD(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ee(el(s)))),s}(a,c),u,y)}(s,a,null,!0),jE}function $E(s,a,c,u,d){let g=null;const y=c.directiveEnd;let I=c.directiveStylingLast;for(-1===I?I=c.directiveStart:I++;I<y&&(g=a[I],u=kf(u,g.hostAttrs,d),g!==s);)I++;return null!==s&&(c.directiveStylingLast=I),u}function kf(s,a,c){const u=c?1:2;let d=-1;if(null!==a)for(let g=0;g<a.length;g++){const y=a[g];"number"==typeof y?d=y:d===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),T(s,y,!!c||a[++g]))}return void 0===s?null:s}function cl(s,a,c,u,d,g){const y=null===a;let I;for(;d>0;){const b=s[d],x=Array.isArray(b),O=x?b[1]:b,V=null===O;let K=c[d+1];K===jt&&(K=V?Dt:void 0);let X=V?R(K,u):O===u?K:void 0;if(x&&!hm(X)&&(X=R(b,u)),hm(X)&&(I=X,y))return I;const be=s[d+1];d=y?_r(be):su(be)}if(null!==a){let b=g?a.residualClasses:a.residualStyles;null!=b&&(I=R(b,u))}return I}function hm(s){return void 0!==s}function Ud(s,a=""){const c=Re(),u=Kt(),d=s+Ht,g=u.firstCreatePass?Mg(u,d,1,a,null):u.data[d],y=TD(u,c,g,a,s);c[d]=y,Bc()&&Oo(u,c,y,g),ls(g,!1)}let TD=(s,a,c,u,d)=>(Xo(!0),function Id(s,a){return s.createText(a)}(a[Ot],u));function zE(s){return fm("",s,""),zE}function fm(s,a,c){const u=Re(),d=function sl(s,a,c,u){return P(s,Ln(),c)?a+re(c)+u:jt}(u,s,a,c);return d!==jt&&function il(s,a,c){const u=Ua(a,s);!function Js(s,a,c){s.setValue(a,c)}(s[Ot],u,c)}(u,Ei(),d),fm}const tc=void 0;var LD=["en",[["a","p"],["AM","PM"],tc],[["AM","PM"],tc,tc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tc,"{1} 'at' {0}",tc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Mx(s){const c=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===u?1:5}];let nc={};function Gy(s){const a=function VD(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=t0(a);if(c)return c;const u=a.split("-")[0];if(c=t0(u),c)return c;if("en"===u)return LD;throw new oe(701,!1)}function zy(s){return Gy(s)[Vd.PluralCase]}function t0(s){return s in nc||(nc[s]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[s]),nc[s]}var Vd=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Vd||{});const jd="en-US";let r0=jd;function Qy(s,a,c,u,d){if(s=Pe(s),Array.isArray(s))for(let g=0;g<s.length;g++)Qy(s[g],a,c,u,d);else{const g=Kt(),y=Re();let I=Xl(s)?s:Pe(s.provide),b=QC(s);const x=zr(),O=1048575&x.providerIndexes,V=x.directiveStart,K=x.providerIndexes>>20;if(Xl(s)||!s.multi){const X=new jc(b,d,Ag),be=ae(I,a,d?O:O+K,V);-1===be?($a(Ul(x,y),g,I),ic(g,s,a.length),a.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),c.push(X),y.push(X)):(c[be]=X,y[be]=X)}else{const X=ae(I,a,O+K,V),be=ae(I,a,O,O+K),Je=be>=0&&c[be];if(d&&!Je||!d&&!(X>=0&&c[X])){$a(Ul(x,y),g,I);const ht=function Cm(s,a,c,u,d){const g=new jc(s,c,Ag);return g.multi=[],g.index=a,g.componentProviders=0,Xy(g,d,u&&!c),g}(d?fa:Jy,c.length,d,u,b);!d&&Je&&(c[be].providerFactory=ht),ic(g,s,a.length,0),a.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),c.push(ht),y.push(ht)}else ic(g,s,X>-1?X:be,Xy(c[d?be:X],b,!d&&u));!d&&u&&Je&&c[be].componentProviders++}}}function ic(s,a,c,u){const d=Xl(a),g=function _M(s){return!!s.useClass}(a);if(d||g){const b=(g?Pe(a.useClass):a).prototype.ngOnDestroy;if(b){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&a.multi){const O=x.indexOf(c);-1===O?x.push(c,[u,b]):x[O+1].push(u,b)}else x.push(c,b)}}}function Xy(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function ae(s,a,c,u){for(let d=c;d<u;d++)if(a[d]===s)return d;return-1}function Jy(s,a,c,u){return g0(this.multi,[])}function fa(s,a,c,u){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=Hn(c,c[et],this.providerFactory.index,u);g=I.slice(0,y),g0(d,g);for(let b=y;b<I.length;b++)g.push(I[b])}else g=[],g0(d,g);return g}function g0(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function dl(s,a=[]){return c=>{c.providersResolver=(u,d)=>function iT(s,a,c){const u=Kt();if(u.firstCreatePass){const d=xr(s);Qy(c,u.data,u.blueprint,d,!0),Qy(a,u.data,u.blueprint,d,!1)}}(u,d?d(s):s,a)}}class jf{}class lu{}function sT(s,a){return new m0(s,a??null,[])}class m0 extends jf{constructor(a,c,u){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QM(this);const d=jr(a);this._bootstrapComponents=Po(d.bootstrap),this._r3Injector=nE(a,c,[{provide:jf,useValue:this},{provide:Eg,useValue:this.componentFactoryResolver},...u],ee(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class _0 extends lu{constructor(a){super(),this.moduleType=a}create(a){return new m0(this.moduleType,a,[])}}class Hf extends jf{constructor(a){super(),this.componentFactoryResolver=new QM(this),this.instance=null;const c=new Lw([...a.providers,{provide:jf,useValue:this},{provide:Eg,useValue:this.componentFactoryResolver}],a.parent||Fw(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function $f(s,a,c=null){return new Hf({providers:s,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let aT=(()=>{var s;class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const d=fM(0,u.type),g=d.length>0?$f([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,g)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return(s=a).\u0275prov=Pt({token:s,providedIn:"environment",factory:()=>new s(tn(Jl))}),a})();function $i(s){s.getStandaloneInjector=a=>a.get(aT).getOrCreateStandaloneInjector(s)}function ga(s){return a=>{setTimeout(s,void 0,a)}}const oo=class Er extends f.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,u){let d=a,g=c||(()=>null),y=u;if(a&&"object"==typeof a){const b=a;d=b.next?.bind(b),g=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(g=ga(g),d&&(d=ga(d)),y&&(y=ga(y)));const I=super.subscribe({next:d,error:g,complete:y});return a instanceof te.w0&&a.add(I),I}};function ev(){return this._results[Symbol.iterator]()}class qd{get changes(){return this._changes||(this._changes=new oo)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=qd.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=ev)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const u=this;u.dirty=!1;const d=function si(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function bi(s,a,c){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++){let d=s[u],g=a[u];if(c&&(d=c(d),g=c(g)),g!==d)return!1}return!0}(u._results,d,c))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sm=(()=>{class a{}return a.__NG_ELEMENT_ID__=tv,a})();const uu=Sm,du=class extends uu{constructor(a,c,u){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c,null)}createEmbeddedViewImpl(a,c,u){const y=this._declarationTContainer.tView,I=iE(this._declarationLView,y,a,4096&this._declarationLView[Nt]?4096:16,null,y.declTNode,null,null,null,c||null,u||null);I[Aa]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[yi];return null!==x&&(I[yi]=x.createEmbeddedView(y)),mE(y,I,a),new Fg(I)}};function tv(){return ma(zr(),Re())}function ma(s,a){return 4&s.type?new du(a,s,Md(s,a)):null}let xm=(()=>{class a{}return a.__NG_ELEMENT_ID__=gT,a})();function gT(){return mT(zr(),Re())}const rv=xm,qf=class extends rv{constructor(a,c,u){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=u}get element(){return Md(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){const a=Qs(this._hostTNode,this._hostLView);if(Io(a)){const c=Hc(a,this._hostLView),u=dr(a);return new En(c[et].data[u+8],c)}return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=T0(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(a,c,u){let d,g;"number"==typeof u?d=u:null!=u&&(d=u.index,g=u.injector);const I=a.createEmbeddedViewImpl(c||{},g,null);return this.insertImpl(I,d,false),I}createComponent(a,c,u,d,g){const y=a&&!function aa(s){return"function"==typeof s}(a);let I;if(y)I=c;else{const Be=c||{};I=Be.index,u=Be.injector,d=Be.projectableNodes,g=Be.environmentInjector||Be.ngModuleRef}const b=y?a:new Ef(Lt(a)),x=u||this.parentInjector;if(!g&&null==b.ngModule){const Je=(y?x:this.parentInjector).get(Jl,null);Je&&(g=Je)}Lt(b.componentType??{});const X=b.create(x,d,null,g);return this.insertImpl(X.hostView,I,false),X}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,u){const d=a._lView,g=d[et];if(function zu(s){return Li(s[Tn])}(d)){const b=this.indexOf(a);if(-1!==b)this.detach(b);else{const x=d[Tn],O=new qf(x,x[ni],x[Tn]);O.detach(O.indexOf(a))}}const y=this._adjustIndex(c),I=this._lContainer;if(function DC(s,a,c,u){const d=Mr+u,g=c.length;u>0&&(c[d-1][Pi]=a),u<g-Mr?(a[Pi]=c[d],dd(c,Mr+u,a)):(c.push(a),a[Pi]=null),a[Tn]=c;const y=a[Aa];null!==y&&c!==y&&function TC(s,a){const c=s[Zo];a[Fn]!==a[Tn][Tn][Fn]&&(s[bs]=!0),null===c?s[Zo]=[a]:c.push(a)}(y,a);const I=a[yi];null!==I&&I.insertView(s),a[Nt]|=128}(g,d,I,y),!u){const b=Cd(y,I),x=d[Ot],O=On(x,I[vi]);null!==O&&function ww(s,a,c,u,d,g){u[zn]=d,u[ni]=a,sf(s,u,c,1,d,g)}(g,I[ni],x,d,O,b)}return a.attachToViewContainerRef(),dd(S0(I),y,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=T0(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),u=v(this._lContainer,c);u&&(hd(S0(this._lContainer),c),p(u[et],u))}detach(a){const c=this._adjustIndex(a,-1),u=v(this._lContainer,c);return u&&null!=hd(S0(this._lContainer),c)?new Fg(u):null}_adjustIndex(a,c=0){return a??this.length+c}};function T0(s){return s[8]}function S0(s){return s[8]||(s[8]=[])}function mT(s,a){let c;const u=a[s.index];return Li(u)?c=u:(c=fE(u,a,null,s),a[s.index]=c,wf(a,c)),A0(c,a,s,u),new qf(c,s,a)}let A0=function Ti(s,a,c,u){if(s[vi])return;let d;d=8&c.type?ln(u):function _T(s,a){const c=s[Ot],u=c.createComment(""),d=Gr(a,s);return J(c,On(c,d),u,function eo(s,a){return s.nextSibling(a)}(c,d),!1),u}(a,c),s[vi]=d};class sc{constructor(a){this.queryList=a,this.matches=null}clone(){return new sc(this.queryList)}setDirty(){this.queryList.setDirty()}}class iv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const u=null!==a.contentQueries?a.contentQueries[0]:c.length,d=[];for(let g=0;g<u;g++){const y=c.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new iv(d)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==P0(a,c).matches&&this.queries[c].setDirty()}}class M0{constructor(a,c,u=null){this.predicate=a,this.flags=c,this.read=u}}class fu{constructor(a=[]){this.queries=a}elementStart(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let u=0;u<this.length;u++){const d=null!==c?c.length:0,g=this.getByIndex(u).embeddedTView(a,d);g&&(g.indexInDeclarationView=u,null!==c?c.push(g):c=[g])}return null!==c?new fu(c):null}template(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class x0{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new x0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const g=u[d];this.matchTNodeWithReadOption(a,c,vT(c,g)),this.matchTNodeWithReadOption(a,c,ia(c,a,g,!1,!1))}else u===Sm?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,ia(c,a,u,!1,!1))}matchTNodeWithReadOption(a,c,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===ci||d===xm||d===Sm&&4&c.type)this.addMatch(c.index,-2);else{const g=ia(c,a,d,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,u)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function vT(s,a){const c=s.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===a)return c[u+1];return null}function An(s,a,c,u){return-1===c?function sn(s,a){return 11&s.type?Md(s,a):4&s.type?ma(s,a):null}(a,s):-2===c?function Wf(s,a,c){return c===ci?Md(a,s):c===Sm?ma(a,s):c===xm?mT(a,s):void 0}(s,a,u):Hn(s,s[et],c,a)}function sv(s,a,c,u){const d=a[yi].queries[u];if(null===d.matches){const g=s.data,y=c.matches,I=[];for(let b=0;b<y.length;b+=2){const x=y[b];I.push(x<0?null:An(a,g[x],y[b+1],c.metadata.read))}d.matches=I}return d.matches}function Rm(s,a,c,u){const d=s.queries.getByIndex(c),g=d.matches;if(null!==g){const y=sv(s,a,d,c);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)u.push(y[I/2]);else{const x=g[I+1],O=a[-b];for(let V=Mr;V<O.length;V++){const K=O[V];K[Aa]===K[Tn]&&Rm(K[et],K,x,u)}if(null!==O[Zo]){const V=O[Zo];for(let K=0;K<V.length;K++){const X=V[K];Rm(X[et],X,x,u)}}}}}return u}function R0(s){const a=Re(),c=Kt(),u=kc();Yo(u+1);const d=P0(c,u);if(s.dirty&&function S_(s){return 4==(4&s[Nt])}(a)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Rm(c,a,u,[]):sv(c,a,d,u);s.reset(g,eu),s.notifyOnChanges()}return!0}return!1}function O0(s,a,c,u){const d=Kt();if(d.firstCreatePass){const g=zr();(function IT(s,a,c){null===s.queries&&(s.queries=new fu),s.queries.track(new x0(a,c))})(d,new M0(a,c,u),g.index),function iR(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(d,s),2==(2&c)&&(d.staticContentQueries=!0)}!function ET(s,a,c){const u=new qd(4==(4&c));(function wb(s,a,c,u){const d=Mb(a);d.push(c),s.firstCreatePass&&py(s).push(u,d.length-1)})(s,a,u,u.destroy),null===a[yi]&&(a[yi]=new iv),a[yi].queries.push(new sc(u))}(d,Re(),c)}function k0(){return function wT(s,a){return s[yi].queries[a].queryList}(Re(),kc())}function P0(s,a){return s.queries.getByIndex(a)}function CT(s,a){return ma(s,a)}function Qf(s){return!!jr(s)}const Jn=new In("Application Initializer");let np=(()=>{var s;class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d}),this.appInits=Qt(Jn,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const g of this.appInits){const y=g();if(My(y))u.push(y);else if(cD(y)){const I=new Promise((b,x)=>{y.subscribe({complete:b,error:x})});u.push(I)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{d()}).catch(g=>{this.reject(g)}),0===u.length&&d(),this.initialized=!0}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})(),Um=(()=>{var s;class a{log(u){console.log(u)}warn(u){console.warn(u)}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();const dv=new In("LocaleId",{providedIn:"root",factory:()=>Qt(dv,yt.Optional|yt.SkipSelf)||function FT(){return typeof $localize<"u"&&$localize.locale||jd}()}),Vm=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let ac=(()=>{var s;class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new U.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();class LT{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let UT=(()=>{var s;class a{compileModuleSync(u){return new _0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),y=Po(jr(u).declarations).reduce((I,b)=>{const x=Lt(b);return x&&I.push(new Ef(x)),I},[]);return new LT(d,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function jT(...s){}class rs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oo(!1),this.onMicrotaskEmpty=new oo(!1),this.onStable=new oo(!1),this.onError=new oo(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&c,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ei(){const s="function"==typeof cn.requestAnimationFrame;let a=cn[s?"requestAnimationFrame":"setTimeout"],c=cn[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const d=c[Zone.__symbol__("OriginalDelegate")];d&&(c=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function $T(s){const a=()=>{!function pv(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(cn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,z0(s),s.isCheckStableRunning=!0,jm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),z0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,d,g,y,I)=>{try{return q0(s),c.invokeTask(d,g,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),W0(s)}},onInvoke:(c,u,d,g,y,I,b)=>{try{return q0(s),c.invoke(d,g,y,I,b)}finally{s.shouldCoalesceRunChangeDetection&&a(),W0(s)}},onHasTask:(c,u,d,g)=>{c.hasTask(d,g),u===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,z0(s),jm(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,u,d,g)=>(c.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rs.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(rs.isInAngularZone())throw new oe(909,!1)}run(a,c,u){return this._inner.run(a,c,u)}runTask(a,c,u,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,a,HT,jT,jT);try{return g.runTask(y,c,u)}finally{g.cancelTask(y)}}runGuarded(a,c,u){return this._inner.runGuarded(a,c,u)}runOutsideAngular(a){return this._outer.run(a)}}const HT={};function jm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function z0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function q0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function W0(s){s._nesting--,jm(s)}class Z0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oo,this.onMicrotaskEmpty=new oo,this.onStable=new oo,this.onError=new oo}run(a,c,u){return a.apply(c,u)}runGuarded(a,c,u){return a.apply(c,u)}runOutsideAngular(a){return a()}runTask(a,c,u,d){return a.apply(c,u)}}const ip=new In("",{providedIn:"root",factory:sp});function sp(){const s=Qt(rs);let a=!0;const c=new ne.y(d=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(a),d.complete()})}),u=new ne.y(d=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{rs.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,d.next(!0))})})});const y=s.onUnstable.subscribe(()=>{rs.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{g.unsubscribe(),y.unsubscribe()}});return(0,ie.T)(c,u.pipe((0,ve.B)()))}const op=new In(""),Hm=new In("");let Y0,GT=(()=>{var s;class a{constructor(u,d,g){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Y0||(function zT(s){Y0=s}(g),g.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,g){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:g})}whenStable(u,d,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,g){return[]}}return(s=a).\u0275fac=function(u){return new(u||s)(tn(rs),tn(K0),tn(Hm))},s.\u0275prov=Pt({token:s,factory:s.\u0275fac}),a})(),K0=(()=>{var s;class a{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Y0?.findTestabilityInTree(this,u,d)??null}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})(),pl=null;const Q0=new In("AllowMultipleToken"),X0=new In("PlatformDestroyListeners"),J0=new In("appBootstrapListener");class qT{constructor(a,c){this.name=a,this.token=c}}function cp(s,a,c=[]){const u=`Platform: ${a}`,d=new In(u);return(g=[])=>{let y=Kd();if(!y||y.injector.get(Q0,!1)){const I=[...c,...g,{provide:d,useValue:!0}];s?s(I):function mR(s){if(pl&&!pl.get(Q0,!1))throw new oe(400,!1);(function gv(){!function Sl(s){Th=s}(()=>{throw new oe(600,!1)})})(),pl=s;const a=s.get(eI);(function mv(s){s.get(IM,null)?.forEach(c=>c())})(s)}(function _v(s=[],a){return nu.create({name:a,providers:[{provide:KC,useValue:"platform"},{provide:X0,useValue:new Set([()=>pl=null])},...s]})}(I,u))}return function cc(s){const a=Kd();if(!a)throw new oe(401,!1);return a}()}}function Kd(){return pl?.get(eI)??null}let eI=(()=>{var s;class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const g=function WT(s="zone.js",a){return"noop"===s?new Z0:"zone.js"===s?new rs(a):s}(d?.ngZone,function tI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return g.run(()=>{const y=function so(s,a,c){return new m0(s,a,c)}(u.moduleType,this.injector,function iI(s){return[{provide:rs,useFactory:s},{provide:Sd,multi:!0,useFactory:()=>{const a=Qt(QT,{optional:!0});return()=>a.initialize()}},{provide:nI,useFactory:rI},{provide:ip,useFactory:sp}]}(()=>g)),I=y.injector.get(Dg,null);return g.runOutsideAngular(()=>{const b=g.onError.subscribe({next:x=>{I.handleError(x)}});y.onDestroy(()=>{lp(this._modules,y),b.unsubscribe()})}),function ZT(s,a,c){try{const u=c();return My(u)?u.catch(d=>{throw a.runOutsideAngular(()=>s.handleError(d)),d}):u}catch(u){throw a.runOutsideAngular(()=>s.handleError(u)),u}}(I,g,()=>{const b=y.injector.get(np);return b.runInitializers(),b.donePromise.then(()=>(function $d(s){rt(s,"Expected localeId to be defined"),"string"==typeof s&&(r0=s.toLowerCase().replace(/_/g,"-"))}(y.injector.get(dv,jd)||jd),this._moduleDoBootstrap(y),y))})})}bootstrapModule(u,d=[]){const g=KT({},d);return function gR(s,a,c){const u=new _0(c);return Promise.resolve(u)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(u){const d=u.injector.get(lc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(g=>d.bootstrap(g));else{if(!u.instance.ngDoBootstrap)throw new oe(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(X0,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(s=a).\u0275fac=function(u){return new(u||s)(tn(nu))},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();function KT(s,a){return Array.isArray(a)?a.reduce(KT,s):{...s,...a}}let lc=(()=>{var s;class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Qt(nI),this.zoneIsStable=Qt(ip),this.componentTypes=[],this.components=[],this.isStable=Qt(ac).hasPendingTasks.pipe((0,Fe.w)(u=>u?(0,fe.of)(!1):this.zoneIsStable),(0,me.x)(),(0,ve.B)()),this._injector=Qt(Jl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const g=u instanceof Kw;if(!this._injector.get(np).done)throw!g&&mo(u),new oe(405,!1);let I;I=g?u:this._injector.get(Eg).resolveComponentFactory(u),this.componentTypes.push(I.componentType);const b=function ap(s){return s.isBoundToModule}(I)?void 0:this._injector.get(jf),O=I.create(nu.NULL,[],d||I.selector,b),V=O.location.nativeElement,K=O.injector.get(op,null);return K?.registerApplication(V),O.onDestroy(()=>{this.detachView(O.hostView),lp(this.components,O),K?.unregisterApplication(V)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;lp(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(J0,[]);d.push(...this._bootstrapListeners),d.forEach(g=>g(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>lp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new oe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function lp(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}const nI=new In("",{providedIn:"root",factory:()=>Qt(Dg).handleError.bind(void 0)});function rI(){const s=Qt(rs),a=Qt(Dg);return c=>s.runOutsideAngular(()=>a.handleError(c))}let QT=(()=>{var s;class a{constructor(){this.zone=Qt(rs),this.applicationRef=Qt(lc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(s=a).\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function wR(){return!1}let ER=(()=>{class a{}return a.__NG_ELEMENT_ID__=XT,a})();function XT(s){return function gl(s,a,c){if(Ws(s)&&!c){const u=Ki(s.index,a);return new Fg(u,u)}return 47&s.type?new Fg(a[Fn],a):null}(zr(),Re(),16==(16&s))}class tS{constructor(){}supports(a){return Lg(a)}create(a){return new TR(a)}}const DR=(s,a)=>a;class TR{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||DR}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,u=this._removalsHead,d=0,g=null;for(;c||u;){const y=!u||c&&c.currentIndex<lI(u,d,g)?c:u,I=lI(y,d,g),b=y.currentIndex;if(y===u)d--,u=u._nextRemoved;else if(c=c._next,null==y.previousIndex)d++;else{g||(g=[]);const x=I-d,O=b-d;if(x!=O){for(let K=0;K<x;K++){const X=K<g.length?g[K]:g[K]=0,be=X+K;O<=be&&be<x&&(g[K]=X+1)}g[y.previousIndex]=O-x}}I!==b&&a(y,I,b)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Lg(a))throw new oe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d,g,y,c=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)g=a[I],y=this._trackByFn(I,g),null!==c&&Object.is(c.trackById,y)?(u&&(c=this._verifyReinsertion(c,g,y,I)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,y,I),u=!0),c=c._next}else d=0,function EE(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let u;for(;!(u=c.next()).done;)a(u.value)}}(a,I=>{y=this._trackByFn(d,I),null!==c&&Object.is(c.trackById,y)?(u&&(c=this._verifyReinsertion(c,I,y,d)),Object.is(c.item,I)||this._addIdentityChange(c,I)):(c=this._mismatch(c,I,y,d),u=!0),c=c._next,d++}),this.length=d;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,u,d){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,d)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,d)):a=this._addAfter(new zm(c,u),g,d),a}_verifyReinsertion(a,c,u,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,d):a.currentIndex!=d&&(a.currentIndex=d,this._addToMoves(a,d)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const d=a._prevRemoved,g=a._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(a,c,u),this._addToMoves(a,u),a}_moveAfter(a,c,u){return this._unlink(a),this._insertAfter(a,c,u),this._addToMoves(a,u),a}_addAfter(a,c,u){return this._insertAfter(a,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,u){const d=null===c?this._itHead:c._next;return a._next=d,a._prev=c,null===d?this._itTail=a:d._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new _l),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,u=a._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _l),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class zm{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xd{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const c=a._prevDup,u=a._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class _l{constructor(){this.map=new Map}put(a){const c=a.trackById;let u=this.map.get(c);u||(u=new Xd,this.map.set(c,u)),u.add(a)}get(a,c){const d=this.map.get(a);return d?d.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lI(s,a,c){const u=s.previousIndex;if(null===u)return u;let d=0;return c&&u<c.length&&(d=c[u]),u+a+d}class nS{constructor(){}supports(a){return a instanceof Map||we(a)}create(){return new rS}}class rS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||we(a)))throw new oe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,d)=>{if(c&&c.key===d)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(d,u);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const u=a._prev;return c._next=a,c._prev=u,a._prev=c,u&&(u._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const d=this._records.get(a);this._maybeAddToChanges(d,c);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const u=new SR(a);return this._records.set(a,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(u=>c(a[u],u))}}class SR{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ev(){return new qm([new tS])}let qm=(()=>{var s;class a{constructor(u){this.factories=u}static create(u,d){if(null!=d){const g=d.factories.slice();u=u.concat(g)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||Ev()),deps:[[a,new ai,new So]]}}find(u){const d=this.factories.find(g=>g.supports(u));if(null!=d)return d;throw new oe(901,!1)}}return(s=a).\u0275prov=Pt({token:s,providedIn:"root",factory:Ev}),a})();function Iv(){return new Wm([new nS])}let Wm=(()=>{var s;class a{constructor(u){this.factories=u}static create(u,d){if(d){const g=d.factories.slice();u=u.concat(g)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||Iv()),deps:[[a,new ai,new So]]}}find(u){const d=this.factories.find(g=>g.supports(u));if(d)return d;throw new oe(901,!1)}}return(s=a).\u0275prov=Pt({token:s,providedIn:"root",factory:Iv}),a})();const bv=cp(null,"core",[]);let MR=(()=>{var s;class a{constructor(u){}}return(s=a).\u0275fac=function(u){return new(u||s)(tn(lc))},s.\u0275mod=zs({type:s}),s.\u0275inj=xn({}),a})();function NR(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function uS(s){const a=Lt(s);if(!a)return null;const c=new Ef(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3106:(ft,Se,F)=>{F.d(Se,{Z:()=>Ye});var f=F(9058),te=F(4537),U=F(534),ne=F(7879);class ie{constructor(Ze,je){this._delegate=Ze,this.firebase=je,(0,U._addComponent)(Ze,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Ze,je=U._DEFAULT_ENTRY_NAME){var wt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(Ze);return!gt.isInitialized()&&"EXPLICIT"===(null===(wt=gt.getComponent())||void 0===wt?void 0:wt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:je})}_removeServiceInstance(Ze,je=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(je)}_addComponent(Ze){(0,U._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,U._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function me(){const Pe=function Fe(Pe){const Ze={},je={__esModule:!0,initializeApp:function oe(Ve,Ke={}){const ue=U.initializeApp(Ve,Ke);if((0,f.r3)(Ze,ue.name))return Ze[ue.name];const Ct=new Pe(ue,je);return Ze[ue.name]=Ct,Ct},app:gt,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function re(Ve){const Ke=Ve.name,ue=Ke.replace("-compat","");if(U._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Ct=($t=gt())=>{if("function"!=typeof $t[ue])throw ve.create("invalid-app-argument",{appName:Ke});return $t[ue]()};void 0!==Ve.serviceProps&&(0,f.ZB)(Ct,Ve.serviceProps),je[ue]=Ct,Pe.prototype[ue]=function(...$t){return this._getService.bind(this,Ke).apply(this,Ve.multipleInstances?$t:[])}}return"PUBLIC"===Ve.type?je[ue]:null},removeApp:function wt(Ve){delete Ze[Ve]},useAsService:function Ae(Ve,Ke){return"serverAuth"===Ke?null:Ke},modularAPIs:U}};function gt(Ve){if(!(0,f.r3)(Ze,Ve=Ve||U._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Ve});return Ze[Ve]}return je.default=je,Object.defineProperty(je,"apps",{get:function Ee(){return Object.keys(Ze).map(Ve=>Ze[Ve])}}),gt.App=Pe,je}(ie);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function Ze(je){(0,f.ZB)(Pe,je)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Pe}(),z=new ne.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=j;!function Ne(Pe){(0,U.registerVersion)("@firebase/app-compat","0.2.13",Pe)}()},534:(ft,Se,F)=>{F.r(Se),F.d(Se,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>go,_DEFAULT_ENTRY_NAME:()=>yt,_addComponent:()=>Pn,_addOrOverwriteComponent:()=>mi,_apps:()=>Mt,_clearComponents:()=>un,_components:()=>wn,_getProvider:()=>Dr,_registerComponent:()=>cn,_removeServiceInstance:()=>ba,deleteApp:()=>Tr,getApp:()=>Ni,getApps:()=>vs,initializeApp:()=>Da,onLog:()=>ws,registerVersion:()=>Cn,setLogLevel:()=>tn});var f=F(5861),te=F(4537),U=F(7879),ne=F(9058);const ie=(_e,se)=>se.some(Le=>_e instanceof Le);let fe,ve;const j=new WeakMap,z=new WeakMap,ee=new WeakMap,He=new WeakMap,Ne=new WeakMap;let Ze={get(_e,se,Le){if(_e instanceof IDBTransaction){if("done"===se)return z.get(_e);if("objectStoreNames"===se)return _e.objectStoreNames||ee.get(_e);if("store"===se)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return oe(_e[se])},set:(_e,se,Le)=>(_e[se]=Le,!0),has:(_e,se)=>_e instanceof IDBTransaction&&("done"===se||"store"===se)||se in _e};function gt(_e){return"function"==typeof _e?function wt(_e){return _e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(_e)?function(...se){return _e.apply(Ee(this),se),oe(j.get(this))}:function(...se){return oe(_e.apply(Ee(this),se))}:function(se,...Le){const pt=_e.call(Ee(this),se,...Le);return ee.set(pt,se.sort?se.sort():[se]),oe(pt)}}(_e):(_e instanceof IDBTransaction&&function Pe(_e){if(z.has(_e))return;const se=new Promise((Le,pt)=>{const Tt=()=>{_e.removeEventListener("complete",Ft),_e.removeEventListener("error",Xt),_e.removeEventListener("abort",Xt)},Ft=()=>{Le(),Tt()},Xt=()=>{pt(_e.error||new DOMException("AbortError","AbortError")),Tt()};_e.addEventListener("complete",Ft),_e.addEventListener("error",Xt),_e.addEventListener("abort",Xt)});z.set(_e,se)}(_e),ie(_e,function Fe(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(_e,Ze):_e)}function oe(_e){if(_e instanceof IDBRequest)return function Ye(_e){const se=new Promise((Le,pt)=>{const Tt=()=>{_e.removeEventListener("success",Ft),_e.removeEventListener("error",Xt)},Ft=()=>{Le(oe(_e.result)),Tt()},Xt=()=>{pt(_e.error),Tt()};_e.addEventListener("success",Ft),_e.addEventListener("error",Xt)});return se.then(Le=>{Le instanceof IDBCursor&&j.set(Le,_e)}).catch(()=>{}),Ne.set(se,_e),se}(_e);if(He.has(_e))return He.get(_e);const se=gt(_e);return se!==_e&&(He.set(_e,se),Ne.set(se,_e)),se}const Ee=_e=>Ne.get(_e),Ve=["get","getKey","getAll","getAllKeys","count"],Ke=["put","add","delete","clear"],ue=new Map;function Ct(_e,se){if(!(_e instanceof IDBDatabase)||se in _e||"string"!=typeof se)return;if(ue.get(se))return ue.get(se);const Le=se.replace(/FromIndex$/,""),pt=se!==Le,Tt=Ke.includes(Le);if(!(Le in(pt?IDBIndex:IDBObjectStore).prototype)||!Tt&&!Ve.includes(Le))return;const Ft=function(){var Xt=(0,f.Z)(function*(ur,...nr){const $s=this.transaction(ur,Tt?"readwrite":"readonly");let Go=$s.store;return pt&&(Go=Go.index(nr.shift())),(yield Promise.all([Go[Le](...nr),Tt&&$s.done]))[0]});return function(nr){return Xt.apply(this,arguments)}}();return ue.set(se,Ft),Ft}!function je(_e){Ze=_e(Ze)}(_e=>({..._e,get:(se,Le,pt)=>Ct(se,Le)||_e.get(se,Le,pt),has:(se,Le)=>!!Ct(se,Le)||_e.has(se,Le)}));class $t{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function br(_e){const se=_e.getComponent();return"VERSION"===se?.type}(Le)){const pt=Le.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Le=>Le).join(" ")}}const gi="@firebase/app",tr=new U.Yd("@firebase/app"),yt="[DEFAULT]",Gt={[gi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Mt=new Map,wn=new Map;function Pn(_e,se){try{_e.container.addComponent(se)}catch(Le){tr.debug(`Component ${se.name} failed to register with FirebaseApp ${_e.name}`,Le)}}function mi(_e,se){_e.container.addOrOverwriteComponent(se)}function cn(_e){const se=_e.name;if(wn.has(se))return tr.debug(`There were multiple attempts to register component ${se}.`),!1;wn.set(se,_e);for(const Le of Mt.values())Pn(Le,_e);return!0}function Dr(_e,se){const Le=_e.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),_e.container.getProvider(se)}function ba(_e,se,Le=yt){Dr(_e,se).clearInstance(Le)}function un(){wn.clear()}const Vt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class as{constructor(se,Le,pt){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Vt.create("app-deleted",{appName:this._name})}}const go="9.23.0";function Da(_e,se={}){let Le=_e;"object"!=typeof se&&(se={name:se});const pt=Object.assign({name:yt,automaticDataCollectionEnabled:!1},se),Tt=pt.name;if("string"!=typeof Tt||!Tt)throw Vt.create("bad-app-name",{appName:String(Tt)});if(Le||(Le=(0,ne.aH)()),!Le)throw Vt.create("no-options");const Ft=Mt.get(Tt);if(Ft){if((0,ne.vZ)(Le,Ft.options)&&(0,ne.vZ)(pt,Ft.config))return Ft;throw Vt.create("duplicate-app",{appName:Tt})}const Xt=new te.H0(Tt);for(const nr of wn.values())Xt.addComponent(nr);const ur=new as(Le,pt,Xt);return Mt.set(Tt,ur),ur}function Ni(_e=yt){const se=Mt.get(_e);if(!se&&_e===yt&&(0,ne.aH)())return Da();if(!se)throw Vt.create("no-app",{appName:_e});return se}function vs(){return Array.from(Mt.values())}function Tr(_e){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(_e){const se=_e.name;Mt.has(se)&&(Mt.delete(se),yield Promise.all(_e.container.getProviders().map(Le=>Le.delete())),_e.isDeleted=!0)})).apply(this,arguments)}function Cn(_e,se,Le){var pt;let Tt=null!==(pt=Gt[_e])&&void 0!==pt?pt:_e;Le&&(Tt+=`-${Le}`);const Ft=Tt.match(/\s|\//),Xt=se.match(/\s|\//);if(Ft||Xt){const ur=[`Unable to register library "${Tt}" with version "${se}":`];return Ft&&ur.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Ft&&Xt&&ur.push("and"),Xt&&ur.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void tr.warn(ur.join(" "))}cn(new te.wA(`${Tt}-version`,()=>({library:Tt,version:se}),"VERSION"))}function ws(_e,se){if(null!==_e&&"function"!=typeof _e)throw Vt.create("invalid-log-argument");(0,U.Am)(_e,se)}function tn(_e){(0,U.Ub)(_e)}const Es="firebase-heartbeat-database",Qt=1,$="firebase-heartbeat-store";let H=null;function Y(){return H||(H=function re(_e,se,{blocked:Le,upgrade:pt,blocking:Tt,terminated:Ft}={}){const Xt=indexedDB.open(_e,se),ur=oe(Xt);return pt&&Xt.addEventListener("upgradeneeded",nr=>{pt(oe(Xt.result),nr.oldVersion,nr.newVersion,oe(Xt.transaction),nr)}),Le&&Xt.addEventListener("blocked",nr=>Le(nr.oldVersion,nr.newVersion,nr)),ur.then(nr=>{Ft&&nr.addEventListener("close",()=>Ft()),Tt&&nr.addEventListener("versionchange",$s=>Tt($s.oldVersion,$s.newVersion,$s))}).catch(()=>{}),ur}(Es,Qt,{upgrade:(_e,se)=>{0===se&&_e.createObjectStore($)}}).catch(_e=>{throw Vt.create("idb-open",{originalErrorMessage:_e.message})})),H}function ce(){return(ce=(0,f.Z)(function*(_e){try{return yield(yield Y()).transaction($).objectStore($).get(zt(_e))}catch(se){if(se instanceof ne.ZR)tr.warn(se.message);else{const Le=Vt.create("idb-get",{originalErrorMessage:se?.message});tr.warn(Le.message)}}})).apply(this,arguments)}function ot(_e,se){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(_e,se){try{const pt=(yield Y()).transaction($,"readwrite");yield pt.objectStore($).put(se,zt(_e)),yield pt.done}catch(Le){if(Le instanceof ne.ZR)tr.warn(Le.message);else{const pt=Vt.create("idb-set",{originalErrorMessage:Le?.message});tr.warn(pt.message)}}})).apply(this,arguments)}function zt(_e){return`${_e.name}!${_e.options.appId}`}class Dt{constructor(se){this.container=se,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new zi(Le),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var se=this;return(0,f.Z)(function*(){const pt=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Zt();if(null===se._heartbeatsCache&&(se._heartbeatsCache=yield se._heartbeatsCachePromise),se._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!se._heartbeatsCache.heartbeats.some(Ft=>Ft.date===Tt))return se._heartbeatsCache.heartbeats.push({date:Tt,agent:pt}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(Ft=>{const Xt=new Date(Ft.date).valueOf();return Date.now()-Xt<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,f.Z)(function*(){if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null===se._heartbeatsCache||0===se._heartbeatsCache.heartbeats.length)return"";const Le=Zt(),{heartbeatsToSend:pt,unsentEntries:Tt}=function Sr(_e,se=1024){const Le=[];let pt=_e.slice();for(const Tt of _e){const Ft=Le.find(Xt=>Xt.agent===Tt.agent);if(Ft){if(Ft.dates.push(Tt.date),Is(Le)>se){Ft.dates.pop();break}}else if(Le.push({agent:Tt.agent,dates:[Tt.date]}),Is(Le)>se){Le.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Le,unsentEntries:pt}}(se._heartbeatsCache.heartbeats),Ft=(0,ne.L)(JSON.stringify({version:2,heartbeats:pt}));return se._heartbeatsCache.lastSentHeartbeatDate=Le,Tt.length>0?(se._heartbeatsCache.heartbeats=Tt,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),Ft})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class zi{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,f.Z)(function*(){return(yield se._canUseIndexedDBPromise)&&(yield function Te(_e){return ce.apply(this,arguments)}(se.app))||{heartbeats:[]}})()}overwrite(se){var Le=this;return(0,f.Z)(function*(){var pt;if(yield Le._canUseIndexedDBPromise){const Ft=yield Le.read();return ot(Le.app,{lastSentHeartbeatDate:null!==(pt=se.lastSentHeartbeatDate)&&void 0!==pt?pt:Ft.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Le=this;return(0,f.Z)(function*(){var pt;if(yield Le._canUseIndexedDBPromise){const Ft=yield Le.read();return ot(Le.app,{lastSentHeartbeatDate:null!==(pt=se.lastSentHeartbeatDate)&&void 0!==pt?pt:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...se.heartbeats]})}})()}}function Is(_e){return(0,ne.L)(JSON.stringify({version:2,heartbeats:_e})).length}!function Oi(_e){cn(new te.wA("platform-logger",se=>new $t(se),"PRIVATE")),cn(new te.wA("heartbeat",se=>new Dt(se),"PRIVATE")),Cn(gi,"0.9.13",_e),Cn(gi,"0.9.13","esm2017"),Cn("fire-js","")}("")},4537:(ft,Se,F)=>{F.d(Se,{H0:()=>Fe,wA:()=>U,zt:()=>ie});var f=F(5861),te=F(9058);class U{constructor(j,z,ee){this.name=j,this.instanceFactory=z,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ne="[DEFAULT]";class ie{constructor(j,z){this.name=j,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const z=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(z)){const ee=new te.BH;if(this.instancesDeferred.set(z,ee),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&ee.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(j){var z;const ee=this.normalizeInstanceIdentifier(j?.identifier),He=null!==(z=j?.optional)&&void 0!==z&&z;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ne){if(He)return null;throw Ne}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ve(me){return"EAGER"===me.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[z,ee]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const Ne=this.getOrInitializeService({instanceIdentifier:He});ee.resolve(Ne)}catch{}}}}clearInstance(j=ne){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const z=Array.from(j.instances.values());yield Promise.all([...z.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...z.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ne){return this.instances.has(j)}getOptions(j=ne){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:z={}}=j,ee=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ee,options:z});for(const[Ne,Ye]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ne)&&Ye.resolve(He);return He}onInit(j,z){var ee;const He=this.normalizeInstanceIdentifier(z),Ne=null!==(ee=this.onInitCallbacks.get(He))&&void 0!==ee?ee:new Set;Ne.add(j),this.onInitCallbacks.set(He,Ne);const Ye=this.instances.get(He);return Ye&&j(Ye,He),()=>{Ne.delete(j)}}invokeOnInitCallbacks(j,z){const ee=this.onInitCallbacks.get(z);if(ee)for(const He of ee)try{He(j,z)}catch{}}getOrInitializeService({instanceIdentifier:j,options:z={}}){let ee=this.instances.get(j);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(me=j,me===ne?void 0:me),options:z}),this.instances.set(j,ee),this.instancesOptions.set(j,z),this.invokeOnInitCallbacks(ee,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,ee)}catch{}var me;return ee||null}normalizeInstanceIdentifier(j=ne){return this.component?this.component.multipleInstances?j:ne:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const z=this.getProvider(j.name);if(z.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);z.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const z=new ie(j,this);return this.providers.set(j,z),z}getProviders(){return Array.from(this.providers.values())}}},7879:(ft,Se,F)=>{F.d(Se,{Am:()=>me,Ub:()=>Fe,Yd:()=>ve,in:()=>te});const f=[];var te=function(j){return j[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",j}(te||{});const U={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ne=te.INFO,ie={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},fe=(j,z,...ee)=>{if(z<j.logLevel)return;const He=(new Date).toISOString(),Ne=ie[z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ne](`[${He}]  ${j.name}:`,...ee)};class ve{constructor(z){this.name=z,this._logLevel=ne,this._logHandler=fe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in te))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?U[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...z),this._logHandler(this,te.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...z),this._logHandler(this,te.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,te.INFO,...z),this._logHandler(this,te.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,te.WARN,...z),this._logHandler(this,te.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...z),this._logHandler(this,te.ERROR,...z)}}function Fe(j){f.forEach(z=>{z.setLogLevel(j)})}function me(j,z){for(const ee of f){let He=null;z&&z.level&&(He=U[z.level]),ee.userLogHandler=null===j?null:(Ne,Ye,...Pe)=>{const Ze=Pe.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch{return null}}).filter(je=>je).join(" ");Ye>=(He??Ne.logLevel)&&j({level:te[Ye].toLowerCase(),message:Ze,args:Pe,type:Ne.name})}}}},3182:(ft,Se,F)=>{F.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=F(534);(0,f.registerVersion)("firebase","9.23.0","app")},7142:(ft,Se,F)=>{F.d(Se,{Z:()=>f.Z});var f=F(3106);f.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(ft,Se,F)=>{F.r(Se);var f=F(5861),te=F(3106),U=F(9058),ne=F(534),ie=F(7582),fe=F(7879),ve=F(4537);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ye=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Pe=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wt=new fe.Yd("@firebase/auth");function oe(v,...p){wt.logLevel<=fe.in.ERROR&&wt.error(`Auth (${ne.SDK_VERSION}): ${v}`,...p)}function Ee(v,...p){throw Ke(v,...p)}function re(v,...p){return Ke(v,...p)}function Ae(v,p,m){const E=Object.assign(Object.assign({},Pe()),{[p]:m});return new U.LL("auth","Firebase",E).create(p,{appName:v.name})}function Ve(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ee(v,"argument-error"),Ae(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return Ze.create(v,...p)}function ue(v,p,...m){if(!v)throw Ke(p,...m)}function Ct(v){const p="INTERNAL ASSERTION FAILED: "+v;throw oe(p),new Error(p)}function $t(v,p){v||Ct(p)}function br(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function gi(){return"http:"===js()||"https:"===js()}function js(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Hs{constructor(p,m){this.shortDelay=p,this.longDelay=m,$t(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function tr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gi()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function de(v,p){$t(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ge{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new Hs(3e4,6e4);function De(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function xe(v,p,m,E){return rt.apply(this,arguments)}function rt(){return(rt=(0,f.Z)(function*(v,p,m,E,M={}){return ct(v,M,(0,f.Z)(function*(){let N={},G={};E&&("GET"===p?G=E:N={body:JSON.stringify(E)});const J=(0,U.xO)(Object.assign({key:v.config.apiKey},G)).slice(1),ke=yield v._getAdditionalHeaders();return ke["Content-Type"]="application/json",v.languageCode&&(ke["X-Firebase-Locale"]=v.languageCode),ge.fetch()(Pt(v,v.config.apiHost,m,J),Object.assign({method:p,headers:ke,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ct(v,p,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ie),p);try{const M=new Mn(v),N=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw xn(v,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const J=N.ok?G.errorMessage:G.error.message,[ke,Ge]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw xn(v,"credential-already-in-use",G);if("EMAIL_EXISTS"===ke)throw xn(v,"email-already-in-use",G);if("USER_DISABLED"===ke)throw xn(v,"user-disabled",G);const it=E[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw Ae(v,it,Ge);Ee(v,it)}}catch(M){if(M instanceof U.ZR)throw M;Ee(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function _t(v,p,m,E){return en.apply(this,arguments)}function en(){return(en=(0,f.Z)(function*(v,p,m,E,M={}){const N=yield xe(v,p,m,E,M);return"mfaPendingCredential"in N&&Ee(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Pt(v,p,m,E){const M=`${p}${m}?${E}`;return v.config.emulator?de(v.config,M):`${v.config.apiScheme}://${M}`}class Mn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(re(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const M=re(v,p,E);return M.customData._tokenResponse=m,M}function pn(){return(pn=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Ri(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function yt(){return(yt=(0,f.Z)(function*(v,p=!1){const m=(0,U.m9)(v),E=yield m.getIdToken(p),M=Mt(E);ue(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const N="object"==typeof M.firebase?M.firebase:void 0,G=N?.sign_in_provider;return{claims:M,token:E,authTime:Ri(Gt(M.auth_time)),issuedAtTime:Ri(Gt(M.iat)),expirationTime:Ri(Gt(M.exp)),signInProvider:G||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Gt(v){return 1e3*Number(v)}function Mt(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return oe("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,U.tV)(m);return M?JSON.parse(M):(oe("Failed to decode base64 JWT payload"),null)}catch(M){return oe("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Pn(v,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof U.ZR&&function cn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Dr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class ba{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function un(v){return Br.apply(this,arguments)}function Br(){return Br=(0,f.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),M=yield Pn(v,function Ca(v,p){return xi.apply(this,arguments)}(m,{idToken:E}));ue(M?.users.length,m,"internal-error");const N=M.users[0];v._notifyReloadListener(N);const G=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?function Da(v){return v.map(p=>{var{providerId:m}=p,E=(0,ie._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(N.providerUserInfo):[],J=function go(v,p){return[...v.filter(E=>!p.some(M=>M.providerId===E.providerId)),...p]}(v.providerData,G),it=!!v.isAnonymous&&!(v.email&&N.passwordHash||J?.length),st={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:J,metadata:new ba(N.createdAt,N.lastLoginAt),isAnonymous:it};Object.assign(v,st)}),Br.apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(v){const p=(0,U.m9)(v);yield un(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(v,p){const m=yield ct(v,{},(0,f.Z)(function*(){const E=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:N}=v.config,G=Pt(v,M,"/v1/token",`key=${N}`),J=yield v._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",ge.fetch()(G,{method:"POST",headers:J,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ue(p.idToken,"internal-error"),ue(typeof p.idToken<"u","internal-error"),ue(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function wn(v){const p=Mt(v);return ue(p,"internal-error"),ue(typeof p.exp<"u","internal-error"),ue(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,f.Z)(function*(){return ue(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,f.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:G}=yield function Ni(v,p){return vs.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(M,N,Number(G))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:M,expirationTime:N}=m,G=new Tr;return E&&(ue("string"==typeof E,"internal-error",{appName:p}),G.refreshToken=E),M&&(ue("string"==typeof M,"internal-error",{appName:p}),G.accessToken=M),N&&(ue("number"==typeof N,"internal-error",{appName:p}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function lr(v,p){ue("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Cn{constructor(p){var{uid:m,auth:E,stsTokenManager:M}=p,N=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new ba(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const E=yield Pn(m,m.stsTokenManager.getToken(m.auth,p));return ue(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function gc(v){return yt.apply(this,arguments)}(this,p)}reload(){return function Vt(v){return as.apply(this,arguments)}(this)}_assign(p){this!==p&&(ue(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Cn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,f.Z)(function*(){let M=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield un(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield Pn(p,function gr(v,p){return pn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,M,N,G,J,ke,Ge,it;const st=null!==(E=m.displayName)&&void 0!==E?E:void 0,On=null!==(M=m.email)&&void 0!==M?M:void 0,eo=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,No=null!==(G=m.photoURL)&&void 0!==G?G:void 0,Yc=null!==(J=m.tenantId)&&void 0!==J?J:void 0,nf=null!==(ke=m._redirectEventId)&&void 0!==ke?ke:void 0,rf=null!==(Ge=m.createdAt)&&void 0!==Ge?Ge:void 0,Qc=null!==(it=m.lastLoginAt)&&void 0!==it?it:void 0,{uid:Oo,emailVerified:Yl,isAnonymous:fg,providerData:Cd,stsTokenManager:bd}=m;ue(Oo&&bd,p,"internal-error");const z_=Tr.fromJSON(this.name,bd);ue("string"==typeof Oo,p,"internal-error"),lr(st,p.name),lr(On,p.name),ue("boolean"==typeof Yl,p,"internal-error"),ue("boolean"==typeof fg,p,"internal-error"),lr(eo,p.name),lr(No,p.name),lr(Yc,p.name),lr(nf,p.name),lr(rf,p.name),lr(Qc,p.name);const Dd=new Cn({uid:Oo,auth:p,email:On,emailVerified:Yl,displayName:st,isAnonymous:fg,photoURL:No,phoneNumber:eo,tenantId:Yc,stsTokenManager:z_,createdAt:rf,lastLoginAt:Qc});return Cd&&Array.isArray(Cd)&&(Dd.providerData=Cd.map(sf=>Object.assign({},sf))),nf&&(Dd._redirectEventId=nf),Dd}static _fromIdTokenResponse(p,m,E=!1){return(0,f.Z)(function*(){const M=new Tr;M.updateFromServerResponse(m);const N=new Cn({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:E});return yield un(N),N})()}}const ws=new Map;function tn(v){$t(v instanceof Function,"Expected a class definition");let p=ws.get(v);return p?($t(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ws.set(v,p),p)}const Qt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var M=this;return(0,f.Z)(function*(){M.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const M=E.storage[m];return void 0===M?null:M})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function $(v,p,m){return`firebase:${v}:${p}:${m}`}class H{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:M,name:N}=this.auth;this.fullUserKey=$(this.userKey,M.apiKey,N),this.fullPersistenceKey=$("persistence",M.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Cn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new H(tn(Qt),p,E);const M=(yield Promise.all(m.map(function(){var Ge=(0,f.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let N=M[0]||tn(Qt);const G=$(E,p.config.apiKey,p.name);let J=null;for(const Ge of m)try{const it=yield Ge._get(G);if(it){const st=Cn._fromJSON(p,it);Ge!==N&&(J=st),N=Ge;break}}catch{}const ke=M.filter(Ge=>Ge._shouldAllowMigration);return N._shouldAllowMigration&&ke.length?(N=ke[0],J&&(yield N._set(G,J.toJSON())),yield Promise.all(m.map(function(){var Ge=(0,f.Z)(function*(it){if(it!==N)try{yield it._remove(G)}catch{}});return function(it){return Ge.apply(this,arguments)}}())),new H(N,p,E)):new H(N,p,E)})()}}function Y(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(vt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Te(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Rn(p))return"Blackberry";if(vn(p))return"Webos";if(ce(p))return"Safari";if((p.includes("chrome/")||ot(p))&&!p.includes("edge/"))return"Chrome";if(zt(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Te(v=(0,U.z$)()){return/firefox\//i.test(v)}function ce(v=(0,U.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ot(v=(0,U.z$)()){return/crios\//i.test(v)}function vt(v=(0,U.z$)()){return/iemobile/i.test(v)}function zt(v=(0,U.z$)()){return/android/i.test(v)}function Rn(v=(0,U.z$)()){return/blackberry/i.test(v)}function vn(v=(0,U.z$)()){return/webos/i.test(v)}function Dt(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Is(v=(0,U.z$)()){return Dt(v)||zt(v)||vn(v)||Rn(v)||/windows phone/i.test(v)||vt(v)}function _e(v,p=[]){let m;switch(v){case"Browser":m=Y((0,U.z$)());break;case"Worker":m=`${Y((0,U.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ne.SDK_VERSION}/${E}`}function Le(){return(Le=(0,f.Z)(function*(v){return(yield xe(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pt(v,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(v,p){return xe(v,"GET","/v2/recaptchaConfig",De(v,p))})).apply(this,arguments)}function Ft(v){return void 0!==v&&void 0!==v.getResponse}function Xt(v){return void 0!==v&&void 0!==v.enterprise}class ur{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function $s(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=M=>{const N=re("internal-error");N.customData=M,m(N)},E.type="text/javascript",E.charset="UTF-8",function nr(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Go(v){return`__${v}${Math.floor(1e6*Math.random())}`}class lh{constructor(p){this.type="recaptcha-enterprise",this.auth=rr(p)}verify(p="verify",m=!1){var E=this;return(0,f.Z)(function*(){function N(){return N=(0,f.Z)(function*(J){if(!m){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var ke=(0,f.Z)(function*(Ge,it){pt(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const On=new ur(st);return null==J.tenantId?J._agentRecaptchaConfig=On:J._tenantRecaptchaConfigs[J.tenantId]=On,Ge(On.siteKey)}it(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{it(st)})});return function(Ge,it){return ke.apply(this,arguments)}}())}),N.apply(this,arguments)}function G(J,ke,Ge){const it=window.grecaptcha;Xt(it)?it.enterprise.ready(()=>{it.enterprise.execute(J,{action:p}).then(st=>{ke(st)}).catch(()=>{ke("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,ke)=>{(function M(J){return N.apply(this,arguments)})(E.auth).then(Ge=>{if(!m&&Xt(window.grecaptcha))G(Ge,J,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));$s("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{G(Ge,J,ke)}).catch(it=>{ke(it)})}}).catch(Ge=>{ke(Ge)})})})()}}function qi(v,p,m){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,f.Z)(function*(v,p,m,E=!1){const M=new lh(v);let N;try{N=yield M.verify(m)}catch{N=yield M.verify(m,!0)}const G=Object.assign({},p);return Object.assign(G,E?{captchaResp:N}:{captchaResponse:N}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class _c{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=N=>new Promise((G,J)=>{try{G(p(N))}catch(ke){J(ke)}});E.onAbort=m,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,f.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const M of m.queue)yield M(p),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const N of E)try{N()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class uh{constructor(p,m,E,M){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gs(this),this.idTokenSubscription=new Gs(this),this.beforeStateQueue=new _c(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=tn(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var M,N;if(!E._deleted&&(E.persistenceManager=yield H.create(E,p),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var E;const M=yield m.assertedPersistence.getCurrentUser();let N=M,G=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const J=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,ke=N?._redirectEventId,Ge=yield m.tryRedirectSignIn(p);(!J||J===ke)&&Ge?.user&&(N=Ge.user,G=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(G)try{yield m.beforeStateQueue.runMiddleware(N)}catch(J){N=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(J))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return ue(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){try{yield un(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function $o(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const E=p?(0,U.m9)(p):null;return E&&ue(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return p&&ue(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(tn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,f.Z)(function*(){const m=yield pt(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new ur(m);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new lh(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,f.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&tn(p)||m._popupRedirectResolver;ue(E,m,"argument-error"),m.redirectPersistenceManager=yield H.create(m,[tn(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var E,M;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,M){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,E,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=_e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(E["X-Firebase-Client"]=M);const N=yield p._getAppCheckToken();return N&&(E["X-Firebase-AppCheck"]=N),E})()}_getAppCheckToken(){var p=this;return(0,f.Z)(function*(){var m;const E=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function gt(v,...p){wt.logLevel<=fe.in.WARN&&wt.warn(`Auth (${ne.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function rr(v){return(0,U.m9)(v)}class Gs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zo(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function hh(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class zs{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ct("not implemented")}_getIdTokenResponse(p){return Ct("not implemented")}_linkToIdToken(p,m){return Ct("not implemented")}_getReauthenticationResolver(p){return Ct("not implemented")}}function Lp(v,p){return yc.apply(this,arguments)}function yc(){return(yc=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:resetPassword",De(v,p))})).apply(this,arguments)}function xu(v,p){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",De(v,p))})).apply(this,arguments)}function gn(v,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithPassword",De(v,p))})).apply(this,arguments)}function jr(v,p){return bl.apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:sendOobCode",De(v,p))})).apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(v,p){return jr(v,p)})).apply(this,arguments)}function vc(v,p){return fh.apply(this,arguments)}function fh(){return(fh=(0,f.Z)(function*(v,p){return jr(v,p)})).apply(this,arguments)}function zn(v,p){return et.apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(v,p){return jr(v,p)})).apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(v,p){return jr(v,p)})).apply(this,arguments)}function Sa(){return(Sa=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithEmailLink",De(v,p))})).apply(this,arguments)}function qo(){return(qo=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithEmailLink",De(v,p))})).apply(this,arguments)}class Nn extends zs{constructor(p,m,E,M=null){super("password",E),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new Nn(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Nn(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){var E;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const N=yield qi(p,M,"signInWithPassword");return gn(p,N)}return gn(p,M).catch(function(){var N=(0,f.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const J=yield qi(p,M,"signInWithPassword");return gn(p,J)}return Promise.reject(G)});return function(G){return N.apply(this,arguments)}}());case"emailLink":return function Pi(v,p){return Sa.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ee(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return xu(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ni(v,p){return qo.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ar(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithIdp",De(v,p))})).apply(this,arguments)}class _i extends zs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new _i(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ee("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:M}=m,N=(0,ie._T)(m,["providerId","signInMethod"]);if(!E||!M)return null;const G=new _i(E,M);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(p){return Ar(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Ar(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ar(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function Cs(){return(Cs=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:sendVerificationCode",De(v,p))})).apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithPhoneNumber",De(v,p))})).apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(v,p){const m=yield _t(v,"POST","/v1/accounts:signInWithPhoneNumber",De(v,p));if(m.temporaryProof)throw xn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ma={USER_NOT_FOUND:"user-not-found"};function Fi(){return(Fi=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithPhoneNumber",De(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Ma)})).apply(this,arguments)}class qn extends zs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qn({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qn({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Fn(v,p){return Aa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function wc(v,p){return yi.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function gh(v,p){return Fi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:N}=p;return E||m||M||N?new qn({verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:N}):null}}class Ht{constructor(p){var m,E,M,N,G,J;const ke=(0,U.zd)((0,U.pd)(p)),Ge=null!==(m=ke.apiKey)&&void 0!==m?m:null,it=null!==(E=ke.oobCode)&&void 0!==E?E:null,st=function Dl(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ke.mode)&&void 0!==M?M:null);ue(Ge&&it&&st,"argument-error"),this.apiKey=Ge,this.operation=st,this.code=it,this.continueUrl=null!==(N=ke.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=ke.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(J=ke.tenantId)&&void 0!==J?J:null}static parseLink(p){const m=function Wo(v){const p=(0,U.zd)((0,U.pd)(v)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,E=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(E?(0,U.zd)((0,U.pd)(E)).link:null)||E||m||p||v}(p);try{return new Ht(m)}catch{return null}}}let Tl=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Nn._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const M=Ht.parseLink(E);return ue(M,"argument-error"),Nn._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class bs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class vi extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Wi extends vi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ue("providerId"in m&&"signInMethod"in m,"argument-error"),_i._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ue(p.idToken||p.accessToken,"argument-error"),_i._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Wi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Wi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:N,nonce:G,providerId:J}=p;if(!E&&!M&&!m&&!N||!J)return null;try{return new Wi(J)._credential({idToken:m,accessToken:E,nonce:G,pendingToken:N})}catch{return null}}}let Zo=(()=>{class v extends vi{constructor(){super("facebook.com")}static credential(m){return _i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ko=(()=>{class v extends vi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return _i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:M}=m;if(!E&&!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Mr=(()=>{class v extends vi{constructor(){super("github.com")}static credential(m){return _i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Wn extends zs{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ar(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Ar(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ar(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:M,pendingToken:N}=m;return E&&M&&N&&E===M?new Wn(E,N):null}static _create(p,m){return new Wn(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xa extends bs{constructor(p){ue(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return xa.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return xa.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Wn.fromJSON(p);return ue(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Wn._create(E,m)}catch{return null}}}let Ws=(()=>{class v extends vi{constructor(){super("twitter.com")}static credential(m,E){return _i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=m;if(!E||!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Zs(v,p){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signUp",De(v,p))})).apply(this,arguments)}class Hr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,M=!1){return(0,f.Z)(function*(){const N=yield Cn._fromIdTokenResponse(p,E,M),G=Ou(E);return new Hr({user:N,providerId:G,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const M=Ou(E);return new Hr({user:p,providerId:M,_tokenResponse:E,operationType:m})})()}}function Ou(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function mh(){return(mh=(0,f.Z)(function*(v){var p;const m=rr(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Hr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Zs(m,{returnSecureToken:!0}),M=yield Hr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ec extends U.ZR{constructor(p,m,E,M){var N;super(m.code,m.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,M){return new Ec(p,m,E,M)}}function Vp(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ec._fromErrorAndOperation(v,N,p,E):N})}function Bp(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Ds(){return Ds=(0,f.Z)(function*(v,p){const m=(0,U.m9)(v);yield Ic(!0,m,p);const{providerUserInfo:E}=yield function Vr(v,p){return Mi.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=Bp(E||[]);return m.providerData=m.providerData.filter(N=>M.has(N.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Ds.apply(this,arguments)}function ku(v,p){return _h.apply(this,arguments)}function _h(){return(_h=(0,f.Z)(function*(v,p,m=!1){const E=yield Pn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Hr._forOperation(v,"link",E)})).apply(this,arguments)}function Ic(v,p,m){return yh.apply(this,arguments)}function yh(){return(yh=(0,f.Z)(function*(v,p,m){yield un(p);const M=!1===v?"provider-already-linked":"no-such-provider";ue(Bp(p.providerData).has(m)===v,p.auth,M)})).apply(this,arguments)}function jp(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(v,p,m=!1){const{auth:E}=v,M="reauthenticate";try{const N=yield Pn(v,Vp(E,M,p,v),m);ue(N.idToken,E,"internal-error");const G=Mt(N.idToken);ue(G,E,"internal-error");const{sub:J}=G;return ue(v.uid===J,E,"user-mismatch"),Hr._forOperation(v,M,N)}catch(N){throw"auth/user-not-found"===N?.code&&Ee(E,"user-mismatch"),N}})).apply(this,arguments)}function Hp(v,p){return vh.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(v,p,m=!1){const E="signIn",M=yield Vp(v,E,p),N=yield Hr._fromIdTokenResponse(v,E,M);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Fu(v,p){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,f.Z)(function*(v,p){return Hp(rr(v),p)})).apply(this,arguments)}function wh(v,p){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,f.Z)(function*(v,p){const m=(0,U.m9)(v);return yield Ic(!1,m,p.providerId),ku(m,p)})).apply(this,arguments)}function Zn(v,p){return $p.apply(this,arguments)}function $p(){return($p=(0,f.Z)(function*(v,p){return jp((0,U.m9)(v),p)})).apply(this,arguments)}function Lu(){return(Lu=(0,f.Z)(function*(v,p){return _t(v,"POST","/v1/accounts:signInWithCustomToken",De(v,p))})).apply(this,arguments)}function Zi(){return Zi=(0,f.Z)(function*(v,p){const m=rr(v),E=yield function Ra(v,p){return Lu.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),M=yield Hr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(M.user),M}),Zi.apply(this,arguments)}class bc{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Dc._fromServerResponse(p,m):"totpInfo"in m?Ch._fromServerResponse(p,m):Ee(p,"internal-error")}}class Dc extends bc{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Dc(m)}}class Ch extends bc{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new Ch(m)}}function Na(v,p,m){var E;ue((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),ue(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ue(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ue(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Oa(){return Oa=(0,f.Z)(function*(v,p,m){var E;const M=rr(v),N={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=M._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const G=yield qi(M,N,"getOobCode",!0);m&&Na(M,G,m),yield vc(M,G)}else m&&Na(M,N,m),yield vc(M,N).catch(function(){var G=(0,f.Z)(function*(J){if("auth/missing-recaptcha-token"!==J.code)return Promise.reject(J);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ke=yield qi(M,N,"getOobCode",!0);m&&Na(M,ke,m),yield vc(M,ke)}});return function(J){return G.apply(this,arguments)}}())}),Oa.apply(this,arguments)}function ka(){return(ka=(0,f.Z)(function*(v,p,m){yield Lp((0,U.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function wi(){return wi=(0,f.Z)(function*(v,p){yield function Lt(v,p){return mr.apply(this,arguments)}((0,U.m9)(v),{oobCode:p})}),wi.apply(this,arguments)}function bh(v,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(v,p){const m=(0,U.m9)(v),E=yield Lp(m,{oobCode:p}),M=E.requestType;switch(ue(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(E.mfaInfo,m,"internal-error");default:ue(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=bc._fromServerResponse(rr(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:M}})).apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(v,p){const{data:m}=yield bh((0,U.m9)(v),p);return m.email})).apply(this,arguments)}function Uu(){return Uu=(0,f.Z)(function*(v,p,m){var E;const M=rr(v),N={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(E=M._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ge=yield qi(M,N,"signUpPassword");G=Zs(M,Ge)}else G=Zs(M,N).catch(function(){var Ge=(0,f.Z)(function*(it){if("auth/missing-recaptcha-token"===it.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield qi(M,N,"signUpPassword");return Zs(M,st)}return Promise.reject(it)});return function(it){return Ge.apply(this,arguments)}}());const J=yield G.catch(Ge=>Promise.reject(Ge)),ke=yield Hr._fromIdTokenResponse(M,"signIn",J);return yield M._updateCurrentUser(ke.user),ke}),Uu.apply(this,arguments)}function Sl(){return Sl=(0,f.Z)(function*(v,p,m){var E;const M=rr(v),N={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function G(J,ke){ue(ke.handleCodeInApp,M,"argument-error"),ke&&Na(M,J,ke)}if(null!==(E=M._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const J=yield qi(M,N,"getOobCode",!0);G(J,m),yield zn(M,J)}else G(N,m),yield zn(M,N).catch(function(){var J=(0,f.Z)(function*(ke){if("auth/missing-recaptcha-token"!==ke.code)return Promise.reject(ke);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield qi(M,N,"getOobCode",!0);G(Ge,m),yield zn(M,Ge)}});return function(ke){return J.apply(this,arguments)}}())}),Sl.apply(this,arguments)}function Gp(){return(Gp=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v),M=Tl.credentialWithLink(p,m||br());return ue(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Fu(E,M)})).apply(this,arguments)}function Sh(){return(Sh=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:createAuthUri",De(v,p))})).apply(this,arguments)}function ju(){return ju=(0,f.Z)(function*(v,p){const E={identifier:p,continueUri:gi()?br():"http://localhost"},{signinMethods:M}=yield function zp(v,p){return Sh.apply(this,arguments)}((0,U.m9)(v),E);return M||[]}),ju.apply(this,arguments)}function La(){return La=(0,f.Z)(function*(v,p){const m=(0,U.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Na(m.auth,M,p);const{email:N}=yield function Nu(v,p){return Ta.apply(this,arguments)}(m.auth,M);N!==v.email&&(yield v.reload())}),La.apply(this,arguments)}function Sc(){return Sc=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Na(E.auth,N,m);const{email:G}=yield function Nt(v,p){return Tn.apply(this,arguments)}(E.auth,N);G!==v.email&&(yield v.reload())}),Sc.apply(this,arguments)}function $u(){return($u=(0,f.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ml(){return Ml=(0,f.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,U.m9)(v),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},G=yield Pn(E,function qp(v,p){return $u.apply(this,arguments)}(E.auth,N));E.displayName=G.displayName||null,E.photoURL=G.photoUrl||null;const J=E.providerData.find(({providerId:ke})=>"password"===ke);J&&(J.displayName=E.displayName,J.photoURL=E.photoURL),yield E._updateTokensIfNecessary(G)}),Ml.apply(this,arguments)}function Ss(v,p,m){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(v,p,m){const{auth:E}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const G=yield Pn(v,xu(E,N));yield v._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class ln{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Mc extends ln{constructor(p,m,E,M){super(p,m,E),this.username=M}}class Ua extends ln{constructor(p,m){super(p,"facebook.com",m)}}class Gr extends Mc{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Va extends ln{constructor(p,m){super(p,"google.com",m)}}class xh extends Mc{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Ys(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Mh(v){var p,m;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const G=null===(m=null===(p=Mt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(G)return new ln(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!E)return null;switch(E){case"facebook.com":return new Ua(N,M);case"github.com":return new Gr(N,M);case"google.com":return new Va(N,M);case"twitter.com":return new xh(N,M,v.screenName||null);case"custom":case"anonymous":return new ln(N,null);default:return new ln(N,E,M)}}(m)}class yo{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new yo("enroll",p,m)}static _fromMfaPendingCredential(p){return new yo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return yo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return yo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class bt{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=rr(p),M=m.customData._serverResponse,N=(M.mfaInfo||[]).map(J=>bc._fromServerResponse(E,J));ue(M.mfaPendingCredential,E,"internal-error");const G=yo._fromMfaPendingCredential(M.mfaPendingCredential);return new bt(G,N,function(){var J=(0,f.Z)(function*(ke){const Ge=yield ke._process(E,G);delete M.mfaInfo,delete M.mfaPendingCredential;const it=Object.assign(Object.assign({},M),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(m.operationType){case"signIn":const st=yield Hr._fromIdTokenResponse(E,m.operationType,it);return yield E._updateCurrentUser(st.user),st;case"reauthenticate":return ue(m.user,E,"internal-error"),Hr._forOperation(m.user,m.operationType,it);default:Ee(E,"internal-error")}});return function(ke){return J.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}class cs{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>bc._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new cs(p)}getSession(){var p=this;return(0,f.Z)(function*(){return yo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,f.Z)(function*(){const M=p,N=yield E.getSession(),G=yield Pn(E.user,M._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(G),E.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){const E="string"==typeof p?p:p.uid,M=yield m.user.getIdToken();try{const N=yield Pn(m.user,function Ku(v,p){return xe(v,"POST","/v2/accounts/mfaEnrollment:withdraw",De(v,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:G})=>G!==E),yield m.user._updateTokensIfNecessary(N),yield m.user.reload()}catch(N){throw N}})()}}const Ba=new WeakMap,Yu="__sak";class Qu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Yu,"1"),this.storage.removeItem(Yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const vo=(()=>{class v extends Qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yp(){const v=(0,U.z$)();return ce(v)||Dt(v)}()&&function Oi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Is(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),N=this.localCache[E];M!==N&&m(E,N,M)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((J,ke,Ge)=>{this.notifyListeners(J,Ge)});const M=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(M);if(m.newValue!==J)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!E)return}const N=()=>{const J=this.storage.getItem(M);!E&&this.localCache[M]===J||this.notifyListeners(M,J)},G=this.storage.getItem(M);!function zi(){return(0,U.w1)()&&10===document.documentMode}()||G===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const N of Array.from(M))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var M=()=>super._set,N=this;return(0,f.Z)(function*(){yield M().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,M=this;return(0,f.Z)(function*(){const N=yield E().call(M,m);return M.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,M=this;return(0,f.Z)(function*(){yield E().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),wo=(()=>{class v extends Qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let ls=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const M=m,{eventId:N,eventType:G,data:J}=M.data,ke=E.handlersMap[G];if(!ke?.size)return;M.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Ge=Array.from(ke).map(function(){var st=(0,f.Z)(function*(On){return On(M.origin,J)});return function(On){return st.apply(this,arguments)}}()),it=yield function Rl(v){return Promise.all(v.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Ge);M.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:it})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function xc(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class Xu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var M=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,J;return new Promise((ke,Ge)=>{const it=xc("",20);N.port1.start();const st=setTimeout(()=>{Ge(new Error("unsupported_event"))},E);J={messageChannel:N,onMessage(On){const eo=On;if(eo.data.eventId===it)switch(eo.data.status){case"ack":clearTimeout(st),G=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),ke(eo.data.response);break;default:clearTimeout(st),clearTimeout(G),Ge(new Error("invalid_response"))}}},M.handlers.add(J),N.port1.addEventListener("message",J.onMessage),M.target.postMessage({eventType:p,eventId:it,data:m},[N.port2])}).finally(()=>{J&&M.removeMessageHandler(J)})})()}}function Bn(){return window}function Nl(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function Yi(){return(Yi=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const us="firebaseLocalStorageDb",Rc="firebaseLocalStorage",Fh="fbase_key";class Nc{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Oc(v,p){return v.transaction([Rc],p?"readwrite":"readonly").objectStore(Rc)}function kc(){const v=indexedDB.open(us,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Rc,{keyPath:Fh})}catch(M){m(M)}}),v.addEventListener("success",(0,f.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Rc)?p(E):(E.close(),yield function Ju(){const v=indexedDB.deleteDatabase(us);return new Nc(v).toPromise()}(),p(yield kc()))}))})}function Yo(v,p,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(v,p,m){const E=Oc(v,!0).put({[Fh]:p,value:m});return new Nc(E).toPromise()})).apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(v,p){const m=Oc(v,!1).get(p),E=yield new Nc(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Fc(v,p){const m=Oc(v,!0).delete(p);return new Nc(m).toPromise()}const Qo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield kc()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let M=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(M++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return Nl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=ls._getInstance(function Ln(){return Nl()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(M,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(M,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(M,N){return["keyChanged"]});return function(M,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,M;if(m.activeServiceWorker=yield function ri(){return Yi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Xu(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);N&&null!==(E=N[0])&&void 0!==E&&E.fulfilled&&null!==(M=N[0])&&void 0!==M&&M.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ol(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield kc();return yield Yo(m,Yu,"1"),yield Fc(m,Yu),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(N=>Yo(N,m,E)),M.localCache[m]=E,M.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const M=yield E._withRetries(N=>function kl(v,p){return Pc.apply(this,arguments)}(N,m));return E.localCache[m]=M,M})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(M=>Fc(M,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(G=>{const J=Oc(G,!1).getAll();return new Nc(J).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:G,value:J}of E)N.add(G),JSON.stringify(m.localCache[G])!==JSON.stringify(J)&&(m.notifyListeners(G,J),M.push(G));for(const G of Object.keys(m.localCache))m.localCache[G]&&!N.has(G)&&(m.notifyListeners(G,null),M.push(G));return M})()}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const N of Array.from(M))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Lc=1e12;class Jp{constructor(p){this.auth=p,this.counter=Lc,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new Uc(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Lc;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Lc))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(p||Lc))||void 0===E||E.execute(),""})()}}class Uc{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;ue(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eg(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vc=Go("rcb"),td=new Hs(3e4,6e4);class Xo{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Bn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ue(function Uh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Ft(Bn().grecaptcha)?Promise.resolve(Bn().grecaptcha):new Promise((E,M)=>{const N=Bn().setTimeout(()=>{M(re(p,"network-request-failed"))},td.get());Bn()[Vc]=()=>{Bn().clearTimeout(N),delete Bn()[Vc];const J=Bn().grecaptcha;if(!J||!Ft(J))return void M(re(p,"internal-error"));const ke=J.render;J.render=(Ge,it)=>{const st=ke(Ge,it);return this.counter++,st},this.hostLanguage=m,E(J)},$s(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Vc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),M(re(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Bn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nd{load(p){return(0,f.Z)(function*(){return new Jp(p)})()}clearedOneInstance(){}}const ja="recaptcha",rd={theme:"light",type:"image"};class Pl{constructor(p,m=Object.assign({},rd),E){this.parameters=m,this.type=ja,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rr(E),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;ue(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nd:new Xo,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const G=J=>{J&&(p.tokenChangeListeners.delete(G),N(J))};p.tokenChangeListeners.add(G),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Bn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){ue(gi()&&!Nl(),p.auth,"internal-error"),yield function Fl(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function se(v){return Le.apply(this,arguments)}(p.auth);ue(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jo{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qn._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Ii(){return(Ii=(0,f.Z)(function*(v,p,m){const E=rr(v),M=yield Ll(E,p,(0,U.m9)(m));return new Jo(M,N=>Fu(E,N))})).apply(this,arguments)}function dn(){return(dn=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v);yield Ic(!1,E,"phone");const M=yield Ll(E.auth,p,(0,U.m9)(m));return new Jo(M,N=>wh(E,N))})).apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v),M=yield Ll(E.auth,p,(0,U.m9)(m));return new Jo(M,N=>Zn(E,N))})).apply(this,arguments)}function Ll(v,p,m){return id.apply(this,arguments)}function id(){return id=(0,f.Z)(function*(v,p,m){var E;const M=yield m.verify();try{let N;if(ue("string"==typeof M,v,"argument-error"),ue(m.type===ja,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const G=N.session;if("phoneNumber"in N)return ue("enroll"===G.type,v,"internal-error"),(yield function Oh(v,p){return xe(v,"POST","/v2/accounts/mfaEnrollment:start",De(v,p))}(v,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ue("signin"===G.type,v,"internal-error");const J=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return ue(J,v,"missing-multi-factor-info"),(yield function Lh(v,p){return xe(v,"POST","/v2/accounts/mfaSignIn:start",De(v,p))}(v,{mfaPendingCredential:G.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function ph(v,p){return Cs.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:M});return G}}finally{m._reset()}}),id.apply(this,arguments)}function Vh(){return(Vh=(0,f.Z)(function*(v,p){yield ku((0,U.m9)(v),p)})).apply(this,arguments)}let ea=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=rr(m)}verifyPhoneNumber(m,E){return Ll(this.auth,m,(0,U.m9)(E))}static credential(m,E){return qn._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:M}=m;return E&&M?qn._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Io(v,p){return p?tn(p):(ue(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class dr extends zs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ar(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ar(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ar(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function mt(v){return Hp(v.auth,new dr(v),v.bypassAuthState)}function Hc(v){const{auth:p,user:m}=v;return ue(m,p,"internal-error"),jp(m,new dr(v),v.bypassAuthState)}function Ha(v){return Co.apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(v){const{auth:p,user:m}=v;return ue(m,p,"internal-error"),ku(m,new dr(v),v.bypassAuthState)})).apply(this,arguments)}class ta{constructor(p,m,E,M,N=!1){this.auth=p,this.resolver=E,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(E,M){p.pendingPromise={resolve:E,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:N,tenantId:G,error:J,type:ke}=p;if(J)return void m.reject(J);const Ge={auth:m.auth,requestUri:E,sessionId:M,tenantId:G||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ke)(Ge))}catch(it){m.reject(it)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return mt;case"linkViaPopup":case"linkViaRedirect":return Ha;case"reauthViaPopup":case"reauthViaRedirect":return Hc;default:Ee(this.auth,"internal-error")}}resolve(p){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xi=new Hs(2e3,1e4);function Bh(){return(Bh=(0,f.Z)(function*(v,p,m){const E=rr(v);Ve(v,p,bs);const M=Io(E,m);return new na(E,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function od(){return(od=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v);Ve(E.auth,p,bs);const M=Io(E.auth,m);return new na(E.auth,"reauthViaPopup",p,M,E).executeNotNull()})).apply(this,arguments)}function $c(){return($c=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v);Ve(E.auth,p,bs);const M=Io(E.auth,m);return new na(E.auth,"linkViaPopup",p,M,E).executeNotNull()})).apply(this,arguments)}let na=(()=>{class v extends ta{constructor(m,E,M,N,G){super(m,E,N,G),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return ue(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){$t(1===m.filter.length,"Popup operations only handle one event");const E=xc();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(re(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(re(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Xi.get())};m()}}return v.currentPopupAction=null,v})();const Qs="pendingRedirect",$a=new Map;class ad extends ta{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=$a.get(m.auth._key());if(!E){try{const N=(yield function bo(v,p){return Vl.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(N)}catch(M){E=()=>Promise.reject(M)}$a.set(m.auth._key(),E)}return m.bypassAuthState||$a.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const M=yield E.auth._redirectUserForId(p.eventId);if(M)return E.user=M,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Vl(){return(Vl=(0,f.Z)(function*(v,p){const m=Gc(p),E=Hn(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(m));return yield E._remove(m),M})).apply(this,arguments)}function cd(v,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(v,p){return Hn(v)._set(Gc(p),"true")})).apply(this,arguments)}function ia(v,p){$a.set(v._key(),p)}function Hn(v){return tn(v._redirectPersistence)}function Gc(v){return $(Qs,v.config.apiKey,v.name)}function Bl(v,p,m){return function Xs(v,p,m){return En.apply(this,arguments)}(v,p,m)}function En(){return(En=(0,f.Z)(function*(v,p,m){const E=rr(v);Ve(v,p,bs),yield E._initializationPromise;const M=Io(E,m);return yield cd(M,E),M._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function sa(v,p,m){return function Ga(v,p,m){return Rr.apply(this,arguments)}(v,p,m)}function Rr(){return(Rr=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v);Ve(E.auth,p,bs),yield E.auth._initializationPromise;const M=Io(E.auth,m);yield cd(M,E.auth);const N=yield Vi(E);return M._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function ii(v,p,m){return function jl(v,p,m){return za.apply(this,arguments)}(v,p,m)}function za(){return(za=(0,f.Z)(function*(v,p,m){const E=(0,U.m9)(v);Ve(E.auth,p,bs),yield E.auth._initializationPromise;const M=Io(E.auth,m);yield Ic(!1,E,p.providerId),yield cd(M,E.auth);const N=yield Vi(E);return M._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(v,p){return yield rr(v)._initializationPromise,Ci(v,p,!1)})).apply(this,arguments)}function Ci(v,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,f.Z)(function*(v,p,m=!1){const E=rr(v),M=Io(E,p),G=yield new ad(E,M,m).execute();return G&&!m&&(delete G.user._redirectEventId,yield E._persistUserIfCurrent(G.user),yield E._setRedirectUser(null,p)),G})).apply(this,arguments)}function Vi(v){return xs.apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(v){const p=xc(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Wa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function zc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ud(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!ud(p)){const M=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(re(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ld(p))}saveEventToCache(p){this.cachedEventUids.add(ld(p)),this.lastProcessedEventTime=Date.now()}}function ld(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function ud({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Bt(v){return qc.apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(v,p={}){return xe(v,"GET","/v1/projects",p)})).apply(this,arguments)}const cw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ds=/^https?/;function To(){return(To=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Bt(v);for(const m of p)try{if(mn(m))return}catch{}Ee(v,"unauthorized-domain")})).apply(this,arguments)}function mn(v){const p=br(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const G=new URL(v);return""===G.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&G.hostname===E}if(!ds.test(m))return!1;if(cw.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const jh=new Hs(3e4,6e4);function aa(){const v=Bn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let si=null;const dd=new Hs(5e3,15e3),hd="__/auth/iframe",ca="emulator/auth/iframe",ng={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ig(v){const p=v.config;ue(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?de(p,ca):`https://${v.config.authDomain}/${hd}`,E={apiKey:p.apiKey,appName:v.name,v:ne.SDK_VERSION},M=rg.get(v.config.apiHost);M&&(E.eid=M);const N=v._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,U.xO)(E).slice(1)}`}function T(){return T=(0,f.Z)(function*(v){const p=yield function Ji(v){return si=si||function bi(v){return new Promise((p,m)=>{var E,M,N;function G(){aa(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{aa(),m(re(v,"network-request-failed"))},timeout:jh.get()})}if(null!==(M=null===(E=Bn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(N=Bn().gapi)||void 0===N||!N.load){const J=Go("iframefcb");return Bn()[J]=()=>{gapi.load?G():m(re(v,"network-request-failed"))},$s(`https://apis.google.com/js/api.js?onload=${J}`).catch(ke=>m(ke))}G()}}).catch(p=>{throw si=null,p})}(v),si}(v),m=Bn().gapi;return ue(m,v,"internal-error"),p.open({where:document.body,url:ig(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ng,dontclear:!0},E=>new Promise(function(){var M=(0,f.Z)(function*(N,G){yield E.restyle({setHideOnLeave:!1});const J=re(v,"network-request-failed"),ke=Bn().setTimeout(()=>{G(J)},dd.get());function Ge(){Bn().clearTimeout(ke),N(E)}E.ping(Ge).then(Ge,()=>{G(J)})});return function(N,G){return M.apply(this,arguments)}}()))}),T.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qe{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const St="__/auth/handler",At="emulator/auth/handler",oi=encodeURIComponent("fac");function Sn(v,p,m,E,M,N){return Za.apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(v,p,m,E,M,N){ue(v.config.authDomain,v,"auth-domain-config-required"),ue(v.config.apiKey,v,"invalid-api-key");const G={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ne.SDK_VERSION,eventId:M};if(p instanceof bs){p.setDefaultLanguage(v.languageCode),G.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(G.customParameters=JSON.stringify(p.getCustomParameters()));for(const[it,st]of Object.entries(N||{}))G[it]=st}if(p instanceof vi){const it=p.getScopes().filter(st=>""!==st);it.length>0&&(G.scopes=it.join(","))}v.tenantId&&(G.tid=v.tenantId);const J=G;for(const it of Object.keys(J))void 0===J[it]&&delete J[it];const ke=yield v._getAppCheckToken(),Ge=ke?`#${oi}=${encodeURIComponent(ke)}`:"";return`${function So({config:v}){return v.emulator?de(v,At):`https://${v.authDomain}/${St}`}(v)}?${(0,U.xO)(J).slice(1)}${Ge}`})).apply(this,arguments)}const Rs="webStorageSupport",Ns=class ai{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wo,this._completeRedirectFn=Ci,this._overrideRedirectResult=ia}_openPopup(p,m,E,M){var N=this;return(0,f.Z)(function*(){var G;$t(null===(G=N.eventManagers[p._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const J=yield Sn(p,m,E,br(),M);return function ze(v,p,m,E=500,M=600){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),G=Math.max((window.screen.availWidth-E)/2,0).toString();let J="";const ke=Object.assign(Object.assign({},R),{width:E.toString(),height:M.toString(),top:N,left:G}),Ge=(0,U.z$)().toLowerCase();m&&(J=ot(Ge)?"_blank":m),Te(Ge)&&(p=p||"http://localhost",ke.scrollbars="yes");const it=Object.entries(ke).reduce((On,[eo,No])=>`${On}${eo}=${No},`,"");if(function Sr(v=(0,U.z$)()){var p;return Dt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ge)&&"_self"!==J)return function ut(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",J),new qe(null);const st=window.open(p||"",J,it);ue(st,v,"popup-blocked");try{st.focus()}catch{}return new qe(st)}(p,J,xc())})()}_openRedirect(p,m,E,M){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(p),function A_(v){Bn().location.href=v}(yield Sn(p,m,E,br(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:N}=this.eventManagers[m];return M?Promise.resolve(M):($t(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const E=yield function C(v){return T.apply(this,arguments)}(p),M=new Wa(p);return E.register("authEvent",N=>(ue(N?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=E,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Rs,{type:Rs},M=>{var N;const G=null===(N=M?.[0])||void 0===N?void 0:N[Rs];void 0!==G&&m(!!G),Ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function tg(v){return To.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Is()||ce()||Dt()}};class fd{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class pd extends fd{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new pd(p)}_finalizeEnroll(p,m,E){return function Zp(v,p){return xe(v,"POST","/v2/accounts/mfaEnrollment:finalize",De(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function x_(v,p){return xe(v,"POST","/v2/accounts/mfaSignIn:finalize",De(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hh=(()=>{class v{constructor(){}static assertion(m){return pd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Hl="@firebase/auth";class vC{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ua(){return window}(0,U.Pz)("authIdTokenMaxAge"),function k_(v){(0,ne._registerComponent)(new ve.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),N=p.getProvider("app-check-internal"),{apiKey:G,authDomain:J}=E.options;ue(G&&!G.includes(":"),"invalid-api-key",{appName:E.name});const ke={apiKey:G,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_e(v)},Ge=new uh(E,M,N,ke);return function Fp(v,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(tn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(Ge,m),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new ve.wA("auth-internal",p=>{const m=rr(p.getProvider("auth").getImmediate());return new vC(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(Hl,"0.23.2",function O_(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ne.registerVersion)(Hl,"0.23.2","esm2017")}("Browser");function zh(){return zh=(0,f.Z)(function*(v,p,m){var E;const{BuildInfo:M}=ua();$t(p.sessionId,"AuthEvent did not contain a session ID");const N=yield function EC(v){return Gl.apply(this,arguments)}(p.sessionId),G={};return Dt()?G.ibi=M.packageName:zt()?G.apn=M.packageName:Ee(v,"operation-not-supported-in-this-environment"),M.displayName&&(G.appDisplayName=M.displayName),G.sessionId=N,Sn(v,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,G)}),zh.apply(this,arguments)}function cg(){return(cg=(0,f.Z)(function*(v){const{BuildInfo:p}=ua(),m={};Dt()?m.iosBundleId=p.packageName:zt()?m.androidPackageName=p.packageName:Ee(v,"operation-not-supported-in-this-environment"),yield Bt(v,m)})).apply(this,arguments)}function gd(){return(gd=(0,f.Z)(function*(v,p,m){const{cordova:E}=ua();let M=()=>{};try{yield new Promise((N,G)=>{let J=null;function ke(){var st;N();const On=null===(st=E.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof On&&On(),"function"==typeof m?.close&&m.close()}function Ge(){J||(J=window.setTimeout(()=>{G(re(v,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&Ge()}p.addPassiveListener(ke),document.addEventListener("resume",Ge,!1),zt()&&document.addEventListener("visibilitychange",it,!1),M=()=>{p.removePassiveListener(ke),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",it,!1),J&&window.clearTimeout(J)}})}finally{M()}})).apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(v){const p=function Wh(v){if($t(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class P_ extends Wa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function lg(v){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(v){const p=yield Mo()._get(Wc(v));return p&&(yield Mo()._remove(Wc(v))),p})).apply(this,arguments)}function Zh(){const v=[];for(let m=0;m<20;m++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function Mo(){return tn(vo)}function Wc(v){return $("authEvent",v.config.apiKey,v.name)}function md(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,U.zd)(m.join("?"))}const Xh=class Qh{constructor(){this._redirectPersistence=wo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ci,this._overrideRedirectResult=ia}_initialize(p){var m=this;return(0,f.Z)(function*(){const E=p._key();let M=m.eventManagers.get(E);return M||(M=new P_(p),m.eventManagers.set(E,M),m.attachCallbackListeners(p,M)),M})()}_openPopup(p){Ee(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,M){var N=this;return(0,f.Z)(function*(){!function wC(v){var p,m,E,M,N,G,J,ke,Ge,it;const st=ua();ue("function"==typeof(null===(p=st?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(m=st?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(N=null===(M=null===(E=st?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(ke=null===(J=null===(G=st?.cordova)||void 0===G?void 0:G.plugins)||void 0===J?void 0:J.browsertab)||void 0===ke?void 0:ke.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(it=null===(Ge=st?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===it?void 0:it.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const G=yield N._initialize(p);yield G.initialized(),G.resetRedirect(),function ra(){$a.clear()}(),yield N._originValidation(p);const J=function CC(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Zh(),postBody:null,tenantId:v.tenantId,error:re(v,"no-auth-event")}}(p,E,M);yield function fw(v,p){return Mo()._set(Wc(v),p)}(p,J);const ke=yield function $l(v,p,m){return zh.apply(this,arguments)}(p,J,m),Ge=yield function hw(v){const{cordova:p}=ua();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let M=null;E?p.plugins.browsertab.openUrl(v):M=p.InAppBrowser.open(v,function Zt(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(M)})})}(ke);return function qh(v,p,m){return gd.apply(this,arguments)}(p,G,Ge)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ag(v){return cg.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:M,BuildInfo:N}=ua(),G=setTimeout((0,f.Z)(function*(){yield lg(p),m.onEvent(F_())}),500),J=function(){var it=(0,f.Z)(function*(st){clearTimeout(G);const On=yield lg(p);let eo=null;On&&st?.url&&(eo=function hs(v,p){var m,E;const M=function Kh(v){const p=md(v),m=p.link?decodeURIComponent(p.link):void 0,E=md(m).link,M=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return md(M).link||M||E||m||v}(p);if(M.includes("/__/auth/callback")){const N=md(M),G=N.firebaseError?function xo(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,J=null===(E=null===(m=G?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],ke=J?re(J):null;return ke?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(On,st.url)),m.onEvent(eo||F_())});return function(On){return it.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,J);const ke=M,Ge=`${N.packageName.toLowerCase()}://`;ua().handleOpenURL=function(){var it=(0,f.Z)(function*(st){if(st.toLowerCase().startsWith(Ge)&&J({url:st}),"function"==typeof ke)try{ke(st)}catch(On){console.error(On)}});return function(st){return it.apply(this,arguments)}}()}};function F_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:re("no-auth-event")}}function _d(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function dg(v=(0,U.z$)()){return!("file:"!==_d()&&"ionic:"!==_d()&&"capacitor:"!==_d()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function zl(){try{const v=self.localStorage,p=xc();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Bi(v=(0,U.z$)()){return function yw(){return(0,U.w1)()&&11===document?.documentMode}()||function yd(v=(0,U.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,U.hl)()}catch{return ql()&&(0,U.hl)()}return!1}function ql(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fs(){return(function mw(){return"http:"===_d()||"https:"===_d()}()||(0,U.ru)()||dg())&&!function _w(){return(0,U.b$)()||(0,U.UG)()}()&&zl()&&!ql()}function or(){return dg()&&typeof document<"u"}function vd(){return(vd=(0,f.Z)(function*(){return!!or()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Kr={LOCAL:"local",NONE:"none",SESSION:"session"},Zc=ue,V_="persistence";function Jh(v){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,f.Z)(function*(v){yield v._initializationPromise;const p=ef(),m=$(V_,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function ef(){var v;try{return(null===(v=function U_(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Ed=ue;class Os{constructor(){this.browserResolver=tn(Ns),this.cordovaResolver=tn(Xh),this.underlyingResolver=null,this._redirectPersistence=wo,this._completeRedirectFn=Ci,this._overrideRedirectResult=ia}_initialize(p){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,M){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,m,E,M)})()}_openRedirect(p,m,E,M){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,m,E,M)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return or()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ed(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Wl(){return vd.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function j_(v){return v.unwrap()}function H_(v){return Kc(v)}function Kc(v){const{_tokenResponse:p}=v instanceof U.ZR?v.customData:v;if(!p)return null;if(!(v instanceof U.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ea.credentialFromResult(v);const m=p.providerId;if(!m||m===me.PASSWORD)return null;let E;switch(m){case me.GOOGLE:E=Ko;break;case me.FACEBOOK:E=Zo;break;case me.GITHUB:E=Mr;break;case me.TWITTER:E=Ws;break;default:const{oauthIdToken:M,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:J,nonce:ke}=p;return N||G||M||J?J?m.startsWith("saml.")?Wn._create(m,J):_i._fromParams({providerId:m,signInMethod:m,pendingToken:J,idToken:M,accessToken:N}):new Wi(m).credential({idToken:M,accessToken:N,rawNonce:ke}):null}return v instanceof U.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function ji(v,p){return p.catch(m=>{throw m instanceof U.ZR&&function vw(v,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Id(v,function Zu(v,p){var m;const E=(0,U.m9)(v),M=p;return ue(p.customData.operationType,E,"argument-error"),ue(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),bt._fromError(E,M)}(v,p));else if(E){const M=Kc(p),N=p;M&&(N.credential=M,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const M=m.user;return{operationType:m.operationType,credential:H_(m),additionalUserInfo:Ys(m),user:Js.getOrCreate(M)}})}function tf(v,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>ji(v,m.confirm(E))}})).apply(this,arguments)}class Id{constructor(p,m){this.resolver=m,this.auth=function Ya(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ji(j_(this.auth),this.resolver.resolveSignIn(p))}}class Js{constructor(p){this._delegate=p,this.multiFactor=function Ph(v){const p=(0,U.m9)(v);return Ba.has(p)||Ba.set(p,cs._fromUser(p)),Ba.get(p)}(p)}static getOrCreate(p){return Js.USER_MAP.has(p)||Js.USER_MAP.set(p,new Js(p)),Js.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,f.Z)(function*(){return ji(m.auth,wh(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,f.Z)(function*(){return tf(E.auth,function jc(v,p,m){return dn.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,f.Z)(function*(){return ji(m.auth,function Ul(v,p,m){return $c.apply(this,arguments)}(m._delegate,p,Os))})()}linkWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield Jh(rr(m.auth)),ii(m._delegate,p,Os)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,f.Z)(function*(){return ji(m.auth,Zn(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return tf(this.auth,function dt(v,p,m){return Wr.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return ji(this.auth,function Ui(v,p,m){return od.apply(this,arguments)}(this._delegate,p,Os))}reauthenticateWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield Jh(rr(m.auth)),sa(m._delegate,p,Os)})()}sendEmailVerification(p){return function Hu(v,p){return La.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,f.Z)(function*(){return yield function T_(v,p){return Ds.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Gu(v,p){return Ss((0,U.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Ah(v,p){return Ss((0,U.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function sd(v,p){return Vh.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Wp(v,p){return Ml.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Al(v,p,m){return Sc.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Js.USER_MAP=new WeakMap;const Qa=ue;let Kl=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=m.options;Qa(M,"invalid-api-key",{appName:m.name}),Qa(M,"invalid-api-key",{appName:m.name});const N=typeof window<"u"?Os:void 0;this._delegate=E.initialize({options:{persistence:ww(M,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Cl(v,p,m){const E=rr(v);ue(E._canInitEmulator,E,"emulator-config-failed"),ue(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const M=!!m?.disableWarnings,N=zo(p),{host:G,port:J}=function dh(v){const p=zo(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const N=M[1];return{host:N,port:hh(E.substr(N.length+1))}}{const[N,G]=E.split(":");return{host:N,port:hh(G)}}}(p);E.config.emulator={url:`${N}//${G}${null===J?"":`:${J}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:G,port:J,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function b_(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function ir(v,p){return wi.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return bh(this._delegate,m)}confirmPasswordReset(m,E){return function Ts(v,p,m){return ka.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var M=this;return(0,f.Z)(function*(){return ji(M._delegate,function Dh(v,p,m){return Uu.apply(this,arguments)}(M._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Bu(v,p){return ju.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Vu(v,p){const m=Ht.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){Qa(fs(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function qa(v,p){return Zr.apply(this,arguments)}(m._delegate,Os);return E?ji(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function pw(v,p){rr(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,M){const{next:N,error:G,complete:J}=hg(m,E,M);return this._delegate.onAuthStateChanged(N,G,J)}onIdTokenChanged(m,E,M){const{next:N,error:G,complete:J}=hg(m,E,M);return this._delegate.onIdTokenChanged(N,G,J)}sendSignInLinkToEmail(m,E){return function Fa(v,p,m){return Sl.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function aw(v,p,m){return Oa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,f.Z)(function*(){let M;switch(function wd(v,p){Zc(Object.values(Kr).includes(p),v,"invalid-persistence-type"),(0,U.b$)()?Zc(p!==Kr.SESSION,v,"unsupported-persistence-type"):(0,U.UG)()?Zc(p===Kr.NONE,v,"unsupported-persistence-type"):ql()?Zc(p===Kr.NONE||p===Kr.LOCAL&&(0,U.hl)(),v,"unsupported-persistence-type"):Zc(p===Kr.NONE||zl(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Kr.SESSION:M=wo;break;case Kr.LOCAL:M=(yield tn(Qo)._isAvailable())?Qo:vo;break;case Kr.NONE:M=Qt;break;default:return Ee("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return ji(this._delegate,function Up(v){return mh.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return ji(this._delegate,Fu(this._delegate,m))}signInWithCustomToken(m){return ji(this._delegate,function Ih(v,p){return Zi.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return ji(this._delegate,function Th(v,p,m){return Fu((0,U.m9)(v),Tl.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return ji(this._delegate,function $r(v,p,m){return Gp.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return tf(this._delegate,function Qi(v,p,m){return Ii.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,f.Z)(function*(){return Qa(fs(),E._delegate,"operation-not-supported-in-this-environment"),ji(E._delegate,function sr(v,p,m){return Bh.apply(this,arguments)}(E._delegate,m,Os))})()}signInWithRedirect(m){var E=this;return(0,f.Z)(function*(){return Qa(fs(),E._delegate,"operation-not-supported-in-this-environment"),yield Jh(E._delegate),Bl(E._delegate,m,Os)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Tc(v,p){return Ks.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Kr,v})();function hg(v,p,m){let E=v;"function"!=typeof v&&({next:E,error:p,complete:m}=v);const M=E;return{next:G=>M(G&&Js.getOrCreate(G)),error:p,complete:m}}function ww(v,p){const m=function B_(v,p){const m=ef();if(!m)return[];const E=$(V_,v,p);switch(m.getItem(E)){case Kr.NONE:return[Qt];case Kr.LOCAL:return[Qo,wo];case Kr.SESSION:return[wo];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(Qo)&&m.push(Qo),typeof window<"u")for(const E of[vo,wo])m.includes(E)||m.push(E);return m.includes(Qt)||m.push(Qt),m}class $_{constructor(){this.providerId="phone",this._delegate=new ea(j_(te.Z.auth()))}static credential(p,m){return ea.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}$_.PHONE_SIGN_IN_METHOD=ea.PHONE_SIGN_IN_METHOD,$_.PROVIDER_ID=ea.PROVIDER_ID;const bC=ue;class DC{constructor(p,m,E=te.Z.app()){var M;bC(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Pl(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G_(v){v.INTERNAL.registerComponent(new ve.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Kl(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Tl,FacebookAuthProvider:Zo,GithubAuthProvider:Mr,GoogleAuthProvider:Ko,OAuthProvider:Wi,SAMLAuthProvider:xa,PhoneAuthProvider:$_,PhoneMultiFactorGenerator:Hh,RecaptchaVerifier:DC,TwitterAuthProvider:Ws,Auth:Kl,AuthCredential:zs,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(te.Z)},5861:(ft,Se,F)=>{function f(U,ne,ie,fe,ve,Fe,me){try{var j=U[Fe](me),z=j.value}catch(ee){return void ie(ee)}j.done?ne(z):Promise.resolve(z).then(fe,ve)}function te(U){return function(){var ne=this,ie=arguments;return new Promise(function(fe,ve){var Fe=U.apply(ne,ie);function me(z){f(Fe,fe,ve,me,j,"next",z)}function j(z){f(Fe,fe,ve,me,j,"throw",z)}me(void 0)})}}F.d(Se,{Z:()=>te})},7582:(ft,Se,F)=>{function ne(de,ge){var Ie={};for(var Ce in de)Object.prototype.hasOwnProperty.call(de,Ce)&&ge.indexOf(Ce)<0&&(Ie[Ce]=de[Ce]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(Ce=Object.getOwnPropertySymbols(de);De<Ce.length;De++)ge.indexOf(Ce[De])<0&&Object.prototype.propertyIsEnumerable.call(de,Ce[De])&&(Ie[Ce[De]]=de[Ce[De]])}return Ie}function ee(de,ge,Ie,Ce){return new(Ie||(Ie=Promise))(function(xe,rt){function ct(en){try{_t(Ce.next(en))}catch(Pt){rt(Pt)}}function Vn(en){try{_t(Ce.throw(en))}catch(Pt){rt(Pt)}}function _t(en){en.done?xe(en.value):function De(xe){return xe instanceof Ie?xe:new Ie(function(rt){rt(xe)})}(en.value).then(ct,Vn)}_t((Ce=Ce.apply(de,ge||[])).next())})}function oe(de){return this instanceof oe?(this.v=de,this):new oe(de)}function Ee(de,ge,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,Ce=Ie.apply(de,ge||[]),xe=[];return De={},rt("next"),rt("throw"),rt("return"),De[Symbol.asyncIterator]=function(){return this},De;function rt(Mn){Ce[Mn]&&(De[Mn]=function(xn){return new Promise(function(gr,pn){xe.push([Mn,xn,gr,pn])>1||ct(Mn,xn)})})}function ct(Mn,xn){try{!function Vn(Mn){Mn.value instanceof oe?Promise.resolve(Mn.value.v).then(_t,en):Pt(xe[0][2],Mn)}(Ce[Mn](xn))}catch(gr){Pt(xe[0][3],gr)}}function _t(Mn){ct("next",Mn)}function en(Mn){ct("throw",Mn)}function Pt(Mn,xn){Mn(xn),xe.shift(),xe.length&&ct(xe[0][0],xe[0][1])}}function Ae(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,ge=de[Symbol.asyncIterator];return ge?ge.call(de):(de=function Pe(de){var ge="function"==typeof Symbol&&Symbol.iterator,Ie=ge&&de[ge],Ce=0;if(Ie)return Ie.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Ce>=de.length&&(de=void 0),{value:de&&de[Ce++],done:!de}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),Ie={},Ce("next"),Ce("throw"),Ce("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function Ce(xe){Ie[xe]=de[xe]&&function(rt){return new Promise(function(ct,Vn){!function De(xe,rt,ct,Vn){Promise.resolve(Vn).then(function(_t){xe({value:_t,done:ct})},rt)}(ct,Vn,(rt=de[xe](rt)).done,rt.value)})}}}F.d(Se,{FC:()=>Ee,KL:()=>Ae,_T:()=>ne,mG:()=>ee,qq:()=>oe}),"function"==typeof SuppressedError&&SuppressedError}},ft=>{ft(ft.s=8807)}]);